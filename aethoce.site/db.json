{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"themes/butterfly/source/css/custom.css","path":"css/custom.css","modified":0,"renderable":1},{"_id":"themes/butterfly/source/css/index.styl","path":"css/index.styl","modified":0,"renderable":1},{"_id":"themes/butterfly/source/css/var.styl","path":"css/var.styl","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/404.jpg","path":"img/404.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/cover.jpg","path":"img/cover.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/cover.png","path":"img/cover.png","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/favicon.png","path":"img/favicon.png","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/fa356abf001878e1f67524905db9f9f.png","path":"img/fa356abf001878e1f67524905db9f9f.png","modified":0,"renderable":1}],"Cache":[{"_id":"source/_posts/hello-world.md","hash":"acad91ace80b80295b11a9b7ad4c29a2dcfdd8fb","modified":1670291387420},{"_id":"themes/butterfly/package.json","hash":"513295c02e8b78606be2c3993f5068c928189467","modified":1667146250000},{"_id":"themes/butterfly/LICENSE","hash":"1128f8f91104ba9ef98d37eea6523a888dcfa5de","modified":1667146250000},{"_id":"themes/butterfly/_config.yml","hash":"f01db705a502fa8e70995aad178e2f0b56f0f7b3","modified":1672026826665},{"_id":"themes/butterfly/plugins.yml","hash":"d46811a3c50f7057681ac496de4beda107aa26b6","modified":1667146250000},{"_id":"themes/butterfly/languages/default.yml","hash":"1e37a3695d50e3e61d7c36e58a6dac872a4a56cd","modified":1667146250000},{"_id":"themes/butterfly/languages/en.yml","hash":"d1bb560698eb8b0079495b7b18b44facb610f9fd","modified":1667146250000},{"_id":"themes/butterfly/README.md","hash":"c34579d9d7239828ce7d8abc235521eaf4ea9e17","modified":1667146250000},{"_id":"themes/butterfly/README_CN.md","hash":"25cfdbaf9883095322259c4f49bd08f0a7cffa0e","modified":1667146250000},{"_id":"themes/butterfly/languages/zh-CN.yml","hash":"28b6f0c39155651d747eb595e0a283bc97be2e09","modified":1667146250000},{"_id":"themes/butterfly/languages/zh-TW.yml","hash":"947f794e862bb2813e36887f777bdb760f70a322","modified":1667146250000},{"_id":"themes/butterfly/layout/category.pug","hash":"710708cfdb436bc875602abf096c919ccdf544db","modified":1667146250000},{"_id":"themes/butterfly/layout/archive.pug","hash":"a0c034c2d319320a54046805e80b58dc48b7e233","modified":1667146250000},{"_id":"themes/butterfly/layout/index.pug","hash":"e1c3146834c16e6077406180858add0a8183875a","modified":1667146250000},{"_id":"themes/butterfly/layout/page.pug","hash":"baf469784aef227e4cc840550888554588e87a13","modified":1667146250000},{"_id":"themes/butterfly/layout/post.pug","hash":"fc9f45252d78fcd15e4a82bfd144401cba5b169a","modified":1667146250000},{"_id":"themes/butterfly/layout/tag.pug","hash":"0440f42569df2676273c026a92384fa7729bc4e9","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/additional-js.pug","hash":"346b6b650b9dee4844f3be7865886002f82da24c","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/404.pug","hash":"cb49f737aca272ccfeb62880bd651eccee72a129","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/footer.pug","hash":"02390a5b6ae1f57497b22ba2e6be9f13cfb7acac","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/layout.pug","hash":"919020d4cd7ae68694b2326edeed4328c7f933cd","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/head.pug","hash":"7dee9b73acdec2a34d41a45119ebe8bb8650bf6c","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/pagination.pug","hash":"0b80f04950bd0fe5e6c4e7b7559adf4d0ce28436","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/rightside.pug","hash":"699d0d2cff233628752956c4434125c8203f7d63","modified":1667146250000},{"_id":"themes/butterfly/scripts/events/404.js","hash":"83cd7f73225ccad123afbd526ce1834eb1eb6a6d","modified":1667146250000},{"_id":"themes/butterfly/scripts/events/comment.js","hash":"a3d1f417965ca20253c36f9e93429f3df6268856","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/sidebar.pug","hash":"8d39473ed112d113674a0f689f63fae06c72abd2","modified":1667146250000},{"_id":"themes/butterfly/scripts/events/stylus.js","hash":"9819f0996234fbd80d6c50a9e526c56ebf22588d","modified":1667146250000},{"_id":"themes/butterfly/scripts/events/welcome.js","hash":"3cfc46c749e2fd7ae9c2a17206238ed0e0e17e7d","modified":1667146250000},{"_id":"themes/butterfly/scripts/events/cdn.js","hash":"acfe765fb2c607bff7198630dbfa53a888c36357","modified":1667146250000},{"_id":"themes/butterfly/scripts/filters/post_lazyload.js","hash":"932df912976261929f809b7dbd4eb473e7787345","modified":1667146250000},{"_id":"themes/butterfly/scripts/events/init.js","hash":"b4940a5c73d3a5cd8bb5883e3041ecdd905a74e0","modified":1667146250000},{"_id":"themes/butterfly/scripts/tag/button.js","hash":"91d954f6e9fe6e571eb8ec9f8996294b2dc3688e","modified":1667146250000},{"_id":"themes/butterfly/scripts/tag/flink.js","hash":"ab62919fa567b95fbe14889517abda649991b1ee","modified":1667146250000},{"_id":"themes/butterfly/scripts/filters/random_cover.js","hash":"21379ed2dccb69c43b893895c9d56238c11e5f43","modified":1667146250000},{"_id":"themes/butterfly/scripts/tag/gallery.js","hash":"f79c99f6c5b626c272dc2bed2b0250d6b91bb28a","modified":1667146250000},{"_id":"themes/butterfly/scripts/tag/hide.js","hash":"396c3ab1bcf1c7693ad7e506eadd13016c6769b6","modified":1667146250000},{"_id":"themes/butterfly/scripts/tag/inlineImg.js","hash":"a43ee2c7871bdd93cb6beb804429e404570f7929","modified":1667146250000},{"_id":"themes/butterfly/scripts/tag/label.js","hash":"03b2afef41d02bd1045c89578a02402c28356006","modified":1667146250000},{"_id":"themes/butterfly/scripts/tag/mermaid.js","hash":"531808a290b8bdd66bac2faab211ada8e9646a37","modified":1667146250000},{"_id":"themes/butterfly/scripts/tag/note.js","hash":"d51812b43924f1bbf413c67499510dd125022005","modified":1667146250000},{"_id":"themes/butterfly/scripts/tag/tabs.js","hash":"6c6e415623d0fd39da016d9e353bb4f5cca444f5","modified":1667146250000},{"_id":"themes/butterfly/scripts/tag/timeline.js","hash":"300eb779588bf35a1b687d9f829d866074b707e3","modified":1667146250000},{"_id":"themes/butterfly/scripts/helpers/aside_archives.js","hash":"2ec66513d5322f185d2071acc052978ba9415a8e","modified":1667146250000},{"_id":"themes/butterfly/scripts/helpers/findArchiveLength.js","hash":"ee3e70098eb0849497d50b75e18cf4a27c397d52","modified":1667146250000},{"_id":"themes/butterfly/scripts/helpers/aside_categories.js","hash":"e00efdb5d02bc5c6eb4159e498af69fa61a7dbb9","modified":1667146250000},{"_id":"themes/butterfly/scripts/helpers/related_post.js","hash":"d368a8830e506c8b5eb6512b709ec8db354d5ea1","modified":1667146250000},{"_id":"themes/butterfly/scripts/helpers/inject_head_js.js","hash":"b4cd617c619d1a0df93603721a6fa1317526174b","modified":1667146250000},{"_id":"themes/butterfly/scripts/helpers/page.js","hash":"763dab5c83f50c1c62fffc9a9dfedea29bb4e629","modified":1667146250000},{"_id":"themes/butterfly/source/css/index.styl","hash":"861998e4ac67a59529a8245a9130d68f826c9c12","modified":1667146250000},{"_id":"themes/butterfly/source/css/custom.css","hash":"72e2f45ac68fc1ab15ceb6fc9dcd6cb6ec921747","modified":1672481221740},{"_id":"themes/butterfly/source/css/var.styl","hash":"e018dad9f674fc5564112b99032fe5fe8b2d195f","modified":1667146250000},{"_id":"themes/butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1667146250000},{"_id":"themes/butterfly/source/js/main.js","hash":"189359400f6cd4d814ca9ebb5a27b96f7031bce3","modified":1667146250000},{"_id":"themes/butterfly/source/js/utils.js","hash":"0b95daada72abb5d64a1e3236049a60120e47cca","modified":1667146250000},{"_id":"themes/butterfly/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/head/analytics.pug","hash":"15530d9ac59c576d79af75dd687efe71e8d261b0","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/head/google_adsense.pug","hash":"95a37e92b39c44bcbea4be7e29ddb3921c5b8220","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/head/config.pug","hash":"2df5a033104775ee9c8715925bb32c3ec5b75da0","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/head/Open_Graph.pug","hash":"fe4d847177b824e09c75e9c7b723184c708c569a","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/head/noscript.pug","hash":"d16ad2ee0ff5751fd7f8a5ce1b83935518674977","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/head/preconnect.pug","hash":"65a23b5170204e55b813ce13a79d799b66b7382c","modified":1667146250000},{"_id":"themes/butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/head/config_site.pug","hash":"7df90c8e432e33716517ab918b0a125bc284041b","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/head/pwa.pug","hash":"3d492cfe645d37c94d30512e0b230b0a09913148","modified":1667146250000},{"_id":"themes/butterfly/source/js/tw_cn.js","hash":"5c1391c9e96950833641f178b5f23c58422fb659","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/head/site_verification.pug","hash":"e2e8d681f183f00ce5ee239c42d2e36b3744daad","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/header/index.pug","hash":"aa175e2254704335f4da09175e59ef2375ca7d03","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/header/nav.pug","hash":"78a3abd90bb3c18cd773d3d5abac3541e7f415e5","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/header/menu_item.pug","hash":"31346a210f4f9912c5b29f51d8f659913492f388","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/header/post-info.pug","hash":"9698f22751778dde063cbfbd01c59ca4462ccd85","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/header/social.pug","hash":"0d953e51d04a9294a64153c89c20f491a9ec42d4","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/loading/fullpage-loading.pug","hash":"c4b86758f3a3deae4612c31d725814c8753a7804","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/loading/index.pug","hash":"131f344d68b4c241d6e03849b243ee792fcd3cea","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/loading/pace.pug","hash":"278855fe4399489bdef0393697bb87420e671fe9","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/mixins/article-sort.pug","hash":"2fb74d0b0e4b98749427c5a1a1b0acb6c85fadc4","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/mixins/post-ui.pug","hash":"6ae047d566289294cc2f6192cacbff297cec9f1a","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/page/default-page.pug","hash":"12c65c174d26a41821df9bad26cdf1087ec5b0ca","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/page/flink.pug","hash":"e3d574921fca8e756923bf3b303835e57b9a26b2","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/page/tags.pug","hash":"6311eda08e4515281c51bd49f43902a51832383c","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/effect.pug","hash":"6528e86656906117a1af6b90e0349c2c4651d5e1","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/post/post-copyright.pug","hash":"ebecba46a5f4efe1c98a386df06c56e26fbd07b9","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/aplayer.pug","hash":"c7cfade2b160380432c47eef4cd62273b6508c58","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/post/reward.pug","hash":"864869c43fe5b5bb6f4ac6b13dd4bfb16ea47550","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/prismjs.pug","hash":"ffb9ea15a2b54423cd4cd441e2d061b8233e9b58","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/pangu.pug","hash":"0f024e36b8116118233e10118714bde304e01e12","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/widget/card_ad.pug","hash":"60dc48a7b5d89c2a49123c3fc5893ab9c57dd225","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/pjax.pug","hash":"fc0b09068009edd4026d90a669608cbe211aeecf","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/subtitle.pug","hash":"142621f70bedcb5033ee99a988f7bb6c5eea3493","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/widget/card_announcement.pug","hash":"ae392459ad401a083ca51ee0b27526b3c1e1faed","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/widget/card_author.pug","hash":"e37468e63db2a0ac09b65d21b7de3e62425bb455","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/widget/card_archives.pug","hash":"86897010fe71503e239887fd8f6a4f5851737be9","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/widget/card_newest_comment.pug","hash":"6d93564a8bd13cb9b52ee5e178db3bcbf18b1bc6","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/widget/card_categories.pug","hash":"d1a416d0a8a7916d0b1a41d73adc66f8c811e493","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/widget/card_bottom_self.pug","hash":"13dc8ce922e2e2332fe6ad5856ebb5dbf9ea4444","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/widget/card_tags.pug","hash":"438aea3e713ed16b7559b9a80a9c5ec0221263df","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/widget/card_post_toc.pug","hash":"3057a2f6f051355e35d3b205121af8735100eacf","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/widget/card_top_self.pug","hash":"ae67c6d4130a6c075058a9c1faea1648bcc6f83e","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/widget/index.pug","hash":"7fb096656c8a6c21a4b6a5100885b1081d6021ed","modified":1667146250000},{"_id":"themes/butterfly/source/css/_global/function.styl","hash":"644d520fe80cc82058467708ab82ccad313b0c27","modified":1667146250000},{"_id":"themes/butterfly/source/css/_global/index.styl","hash":"714f19e7d66df84938bd1b82b33d5667abe1f147","modified":1667146250000},{"_id":"themes/butterfly/source/css/_highlight/theme.styl","hash":"bcd384c8b2aa0390c9eb69ac1abbfd1240ce1da4","modified":1667146250000},{"_id":"themes/butterfly/source/css/_layout/aside.styl","hash":"a0010d833ed30211601c1e0bbbc68e85b77428c6","modified":1667146250000},{"_id":"themes/butterfly/source/css/_layout/chat.styl","hash":"f9a5d3f1fc5ed0ed2ee4c1eaa58ed650d11ddebd","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/widget/card_recent_post.pug","hash":"9c1229af6ab48961021886882c473514101fba21","modified":1667146250000},{"_id":"themes/butterfly/source/css/_layout/comments.styl","hash":"c61dccca690d486c3d9c29cf028d87b777385141","modified":1667146250000},{"_id":"themes/butterfly/source/css/_highlight/highlight.styl","hash":"2f95e99b8351fbecd9037a1bbdc3fee9d6ea8a77","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/widget/card_webinfo.pug","hash":"35ce167c5a275211bfc1fa3d49adfde5b404d98f","modified":1667146250000},{"_id":"themes/butterfly/source/css/_layout/footer.styl","hash":"26be2afa9d4e7016cf3c42a6cd166f01e8e4ad5c","modified":1667146250000},{"_id":"themes/butterfly/source/css/_layout/loading.styl","hash":"ac2aeee9926f75b2a0098efe1c114126987430f2","modified":1667146250000},{"_id":"themes/butterfly/source/css/_layout/post.styl","hash":"23db4e3cab68fed78601fc8a9c39ff5753bcc716","modified":1667146250000},{"_id":"themes/butterfly/source/css/_layout/head.styl","hash":"a457a0dbe23af21a7b6b8bfc5ee103c9fe92e89c","modified":1667146250000},{"_id":"themes/butterfly/source/css/_layout/pagination.styl","hash":"fb9f78bfbb79579f1d752cb73fb6d25c8418e0fd","modified":1667146250000},{"_id":"themes/butterfly/source/css/_layout/relatedposts.styl","hash":"d53de408cb27a2e704aba7f7402b7caebe0410d8","modified":1667146250000},{"_id":"themes/butterfly/source/css/_layout/rightside.styl","hash":"bd88ee30ebf8ca2e7b4d3a034c317fd61733921f","modified":1667146250000},{"_id":"themes/butterfly/source/css/_layout/sidebar.styl","hash":"631ca35a38bc4ac052e9caf47508ff1f99842fc7","modified":1667146250000},{"_id":"themes/butterfly/source/css/_layout/reward.styl","hash":"c5cfed620708807a48076b5ee59b0ba84e29aa80","modified":1667146250000},{"_id":"themes/butterfly/source/css/_layout/third-party.styl","hash":"56389925671c7e8da0c033769421269e15e8f795","modified":1667146250000},{"_id":"themes/butterfly/source/css/_mode/darkmode.styl","hash":"a92984f566c97bb4179f34be79240af1552c6f17","modified":1667146250000},{"_id":"themes/butterfly/source/css/_mode/readmode.styl","hash":"69f8e9414526dfda3af9a71c8e528fdd0ecbbfe5","modified":1667146250000},{"_id":"themes/butterfly/source/css/_page/404.styl","hash":"50dbb9e6d98c71ffe16741b8c1b0c1b9771efd2b","modified":1667146250000},{"_id":"themes/butterfly/source/css/_page/archives.styl","hash":"6f4b4ede52305bce9b22c8c897dcbde8af6e2ce4","modified":1667146250000},{"_id":"themes/butterfly/source/css/_page/common.styl","hash":"a58d35d698885f1034dedbe99f7dbc1a801412c6","modified":1667146250000},{"_id":"themes/butterfly/source/css/_page/homepage.styl","hash":"8c90483d461e09cb06e91b16d8bb7b3205b0a40c","modified":1667146250000},{"_id":"themes/butterfly/source/css/_page/flink.styl","hash":"98d755b686ee833e9da10afaa40c4ec2bd66c19a","modified":1667146250000},{"_id":"themes/butterfly/source/css/_search/index.styl","hash":"39d61cbe0c1e937f83ba3b147afaa29b4de2f87d","modified":1667146250000},{"_id":"themes/butterfly/source/css/_search/algolia.styl","hash":"51e45625929d57c9df3ba9090af99b9b7bb9a15b","modified":1667146250000},{"_id":"themes/butterfly/source/css/_page/categories.styl","hash":"f01ee74948cedb44e53cd3bb1ef36b7d2778ede7","modified":1667146250000},{"_id":"themes/butterfly/source/css/_search/local-search.styl","hash":"25e58a7a8bda4b73d0a0e551643ca01b09ccd7e5","modified":1667146250000},{"_id":"themes/butterfly/source/css/_tags/button.styl","hash":"45f0c32bdea117540f6b14ebac6450d7142bd710","modified":1667146250000},{"_id":"themes/butterfly/source/css/_page/tags.styl","hash":"580feb7e8b0822a1be48ac380f8c5c53b1523321","modified":1667146250000},{"_id":"themes/butterfly/source/css/_tags/hide.styl","hash":"ce489ca2e249e2a3cf71584e20d84bdb022e3475","modified":1667146250000},{"_id":"themes/butterfly/source/css/_tags/hexo.styl","hash":"d76c38adf1d9c1279ef4241835667789f5b736e0","modified":1667146250000},{"_id":"themes/butterfly/source/css/_tags/inlineImg.styl","hash":"df9d405c33a9a68946b530410f64096bcb72560c","modified":1667146250000},{"_id":"themes/butterfly/source/css/_tags/gallery.styl","hash":"a310e48f826a4cacc55d8e68f43806e5085554f6","modified":1667146250000},{"_id":"themes/butterfly/source/css/_tags/label.styl","hash":"66c59e193d794cdb02cca7bd1dc4aea5a19d7e84","modified":1667146250000},{"_id":"themes/butterfly/source/css/_tags/tabs.styl","hash":"bf9568444dd54e39dc59b461323dcd38942f27d9","modified":1667146250000},{"_id":"themes/butterfly/source/css/_tags/note.styl","hash":"85ae91c83691ea4511f4277da1194a185251cc78","modified":1667146250000},{"_id":"themes/butterfly/source/css/_third-party/normalize.min.css","hash":"2c18a1c9604af475b4749def8f1959df88d8b276","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/artalk.pug","hash":"99d9b17668260b242749c16851d9ec1024d31899","modified":1667146250000},{"_id":"themes/butterfly/source/css/_tags/timeline.styl","hash":"f071156d439556e7463ed4bc61ceee87170d5d08","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/disqus.pug","hash":"d85c3737b5c9548553a78b757a7698df126a52cf","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/fb.pug","hash":"b2aadea7351fae8382b8c2a3b9de810d922b0ec1","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/index.pug","hash":"b2d274db84ef22fbd6d5ea8f4404821898934209","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/twikoo.pug","hash":"58406a7a3bf45815769f652bf3ef81e57dcd07eb","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/remark42.pug","hash":"001e8be47854b891efe04013c240c38fed4185eb","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/chat/chatra.pug","hash":"481cd5053bafb1a19f623554a27d3aa077ea59c3","modified":1667146250000},{"_id":"themes/butterfly/source/js/search/local-search.js","hash":"3071a4208fdf89ad7e0031536dd6ffa7bc951e4d","modified":1667146250000},{"_id":"themes/butterfly/source/js/search/algolia.js","hash":"9feb248552667c53ce1b19bc7a295215f8c77008","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/valine.pug","hash":"39427e107230a10790972349c9dd4c4f31d55eb7","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/chat/crisp.pug","hash":"76634112c64023177260d1317ae39cef2a68e35f","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/chat/daovoice.pug","hash":"cfe63e7d26a6665df6aa32ca90868ad48e05ec04","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/waline.pug","hash":"5f648086a33a32d169a2f8d8c549c08aa02f67db","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/chat/gitter.pug","hash":"d1d2474420bf4edc2e43ccdff6f92b8b082143df","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/chat/index.pug","hash":"0611d9216f4c128ebdea4cc21454c3dc4a6398d5","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/chat/messenger.pug","hash":"ccb7d8ce3ded7364f9a15334b68ad73869fca757","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/chat/tidio.pug","hash":"24a926756c2300b9c561aaab6bd3a71fdd16e16d","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/artalk.pug","hash":"49dcc23815e1d5264bb65c91e7dc67b1a723d1ea","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/facebook_comments.pug","hash":"eefdaa94956adc7a3ca90dd8edcd70a7574b439c","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqus.pug","hash":"8ec24c1939895ac0db2b2e8700bc9307b4ceb53c","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqusjs.pug","hash":"98ef20f8a3b10c1692f9b2b3c06033d2da8a8eae","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/giscus.pug","hash":"591ef23c583690bd74af0cafb09af64ba5bd8151","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/gitalk.pug","hash":"22e2ef30fe5eb1db7566e89943c74ece029b2a8e","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/livere.pug","hash":"52ea8aa26b84d3ad38ae28cdf0f163e9ca8dced7","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/index.pug","hash":"351fe25fbf02635b1f9e86e5e244c7d61f69baa7","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/remark42.pug","hash":"e9bdf80d6796afc04eb809dbbe780d97f22c7fcd","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/js.pug","hash":"00ed91c52939b9675b316137f854d13684c895a6","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/utterances.pug","hash":"a737046e730eb7264606ba0536218964044492f9","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/twikoo.pug","hash":"e18fbd88d8942e53e771f29b26209ab735c5c567","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/valine.pug","hash":"e55b9c0f8ced231f47eb88bd7f4ec99f29c5c29d","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/github-issues.pug","hash":"e846ddfe4a63b15d1416f6055f5756af5e3da7c6","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/artalk.pug","hash":"c12c898b35dd014780c1f3220ddbe12e7270983c","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"04b2a5882e789a988e41d45abe606f0617b08e38","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/comments/waline.pug","hash":"15462d1ed04651ad3b430c682842ac400f6f9b47","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/index.pug","hash":"4ec0642f2d5444acfab570a6f8c7868e7ff43fde","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/remark42.pug","hash":"ab167c00da4506f591b96f0591bf5bd214a26d4b","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"233907dd7f5b5f33412701d2ccffbc0bbae8707b","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/waline.pug","hash":"dd0bc119029b62dce5dc965d5de7377e438fa29a","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/math/index.pug","hash":"b8ae5fd7d74e1edcef21f5004fc96147e064d219","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/valine.pug","hash":"d19e1c2c0a50f0e4547d71a17b9be88e8152f17c","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/math/mathjax.pug","hash":"1c846c8d51649b8554d91536323eaeb20c8fc236","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/math/katex.pug","hash":"dfcbd9881be569ea420eff1a6b00e4f4dbe2138e","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/search/index.pug","hash":"da3b9437d061ee68dbc383057db5c73034c49605","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/search/local-search.pug","hash":"178c9cdcc4ce5a006885b24ce4a3d624e4734899","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/math/mermaid.pug","hash":"8e33aca36a4d3ae9e041ba05ced8eff56ae38f77","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/share/addtoany.pug","hash":"85c92f8a7e44d7cd1c86f089a05be438535e5362","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/search/algolia.pug","hash":"e8245d0b4933129bb1c485d8de11a9e52e676348","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/share/index.pug","hash":"4c4a9c15215ae8ac5eadb0e086b278f76db9ee92","modified":1667146250000},{"_id":"themes/butterfly/source/css/_highlight/highlight/diff.styl","hash":"cf1fae641c927621a4df1be5ca4a853b9b526e23","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/share/share-js.pug","hash":"f61d63724ea5c5f352568b3a16bde023affefbe5","modified":1667146250000},{"_id":"themes/butterfly/source/css/_highlight/highlight/index.styl","hash":"18804c58239d95798fa86d0597f32d7f7dd30051","modified":1667146250000},{"_id":"themes/butterfly/source/css/_highlight/prismjs/index.styl","hash":"5dc2e0bcae9a54bfb9bdcc82d02ae5a3cf1ca97d","modified":1667146250000},{"_id":"themes/butterfly/layout/includes/third-party/share/add-this.pug","hash":"2980f1889226ca981aa23b8eb1853fde26dcf89a","modified":1667146250000},{"_id":"themes/butterfly/source/css/_highlight/prismjs/diff.styl","hash":"5972c61f5125068cbe0af279a0c93a54847fdc3b","modified":1667146250000},{"_id":"themes/butterfly/source/css/_highlight/prismjs/line-number.styl","hash":"8970cc1916c982b64a1478792b2822d1d31e276d","modified":1667146250000},{"_id":"themes/butterfly/source/img/cover.jpg","hash":"2d5c1d879a3ac23235687a7a0f9428410f511058","modified":1670728356000},{"_id":"themes/butterfly/source/img/cover.png","hash":"ce5a8583e0fdc740b12ee86370024fcc74817991","modified":1670727410630},{"_id":"public/atom.xml","hash":"468caa380d8e4f932f4fa2f2bdbc9f3bf9b456a8","modified":1672484950342},{"_id":"public/sitemap.xml","hash":"cadc8c22b19c2d2c8bc79a7f95e1c9ae76e9c84b","modified":1672484950342},{"_id":"public/sitemap.txt","hash":"1b3e60859ef04c5f0a5f4e9034bf556b0d702f5a","modified":1672484950342},{"_id":"public/archives/2022/12/index.html","hash":"ffcff9a946451335d1eefc4639c2e6a9fd991675","modified":1672484950342},{"_id":"public/index.html","hash":"2348e5542e2c8eda3e2c69ec1780177a4c1bccab","modified":1672484950342},{"_id":"public/archives/index.html","hash":"6b4cd64e17384758292207dff71c302c3e073a6d","modified":1672484950342},{"_id":"public/archives/2022/index.html","hash":"4040e91689f8646f59ffac3b3348c66d860b66f0","modified":1672484950342},{"_id":"public/2022/12/11/hello-world/index.html","hash":"f105a057d0bcad3d13bc4af13618b3338e9cdefc","modified":1670756318356},{"_id":"public/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1670756318356},{"_id":"public/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1670756318356},{"_id":"public/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1670756318356},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1670756318356},{"_id":"public/css/custom.css","hash":"72e2f45ac68fc1ab15ceb6fc9dcd6cb6ec921747","modified":1670756318356},{"_id":"public/css/index.css","hash":"6cdc246b0b9ff65a7a1754550a04e5bbf13798e6","modified":1670756318356},{"_id":"public/js/utils.js","hash":"0b95daada72abb5d64a1e3236049a60120e47cca","modified":1670756318356},{"_id":"public/js/search/local-search.js","hash":"3071a4208fdf89ad7e0031536dd6ffa7bc951e4d","modified":1670756318356},{"_id":"public/js/search/algolia.js","hash":"9feb248552667c53ce1b19bc7a295215f8c77008","modified":1670756318356},{"_id":"public/js/tw_cn.js","hash":"5c1391c9e96950833641f178b5f23c58422fb659","modified":1670756318356},{"_id":"public/js/main.js","hash":"189359400f6cd4d814ca9ebb5a27b96f7031bce3","modified":1670756318356},{"_id":"public/img/cover.jpg","hash":"2d5c1d879a3ac23235687a7a0f9428410f511058","modified":1670756318356},{"_id":"public/img/cover.png","hash":"ce5a8583e0fdc740b12ee86370024fcc74817991","modified":1670756318356},{"_id":"source/_posts/HPL.md","hash":"1ce5180ce79f58f8bd92db7f45b39fb1ea9f5f75","modified":1672481221722},{"_id":"public/2022/12/11/HPL/index.html","hash":"77b5476c380f1a900ef75c225fa1d9c695a02ed0","modified":1672026840251},{"_id":"source/tags/index.md","hash":"94d0a8ac3397a40d774abce7d33a90c125c4f055","modified":1670893924874},{"_id":"public/tags/index.html","hash":"3344d5730b041f03ec120e1f107c983ed27fcbf6","modified":1672484950342},{"_id":"public/tags/High-Performance-Computing/index.html","hash":"6a0288df1498ad8030c99ff1ceaac7e408943dd7","modified":1672484950342},{"_id":"source/_posts/SYN.md","hash":"1b37d186a86de990ee7a5c15a60ea9b100d68b23","modified":1672481221722},{"_id":"themes/butterfly/source/img/fa356abf001878e1f67524905db9f9f.png","hash":"b0d06e4289618a33a7a15fe86c8d4aced3193eaa","modified":1670924880856},{"_id":"public/tags/Cyberspace-Security/index.html","hash":"5e7259d1bf87eef76fdcd8aa6c7658def16fff5d","modified":1672484950342},{"_id":"public/2022/12/06/SYN/index.html","hash":"fb4b047a3c9c412e86fb9f60cb2353ab2bd5701d","modified":1672026840251},{"_id":"public/img/fa356abf001878e1f67524905db9f9f.png","hash":"b0d06e4289618a33a7a15fe86c8d4aced3193eaa","modified":1671874812574},{"_id":"source/_posts/QoS.md","hash":"2f2704a7e9eba7f424a2d4a8646f285ee31008ba","modified":1672481221722},{"_id":"public/tags/Computer-Network/index.html","hash":"e3bedf8c0fe041a7ae2c76d19096845d2cc3fba1","modified":1672484950342},{"_id":"public/2022/12/24/QoS/index.html","hash":"c2633ef7c7a0a1db910611b6d123acbc2da74968","modified":1671883267643},{"_id":"public/archives/2022/10/index.html","hash":"3096d585263d476961067e7558af4fb97d31a963","modified":1672484950342},{"_id":"public/2022/10/13/QoS/index.html","hash":"62fd8d9c7530b3385579368eaa42e0b82879d072","modified":1672484950342},{"_id":"source/_posts/Graf.md","hash":"d55e8c6a6a7144def0fd45c52833a1b6315f4c1f","modified":1672481221722},{"_id":"source/_posts/TCP.md","hash":"3356e2fe1ccc8274bc5108d910cd3b91a13d9e21","modified":1672481221722},{"_id":"public/archives/2022/09/index.html","hash":"e9afe5ca23ccbfde5dceecc21cac9d479972d6d4","modified":1672484950342},{"_id":"public/tags/Devops/index.html","hash":"899223d7be8054f6eaed2281d27c74009601b16d","modified":1672484950342},{"_id":"public/2022/12/07/Graf/index.html","hash":"66602977cbe926026e06e16e5bd382d15d8184f7","modified":1672484950342},{"_id":"public/2022/09/23/TCP/index.html","hash":"44033639c1e8e4911a49a19ff2bc7ab5b6eb3939","modified":1672484950342},{"_id":"source/_posts/abouthttp2.md","hash":"3aa23fc5ef9e00ab297c2d0b1246e7020dc504e8","modified":1672481221723},{"_id":"source/_posts/bbr.md","hash":"70b0599e0abb0d71721f20d5661d647ac80be909","modified":1672481221723},{"_id":"source/_posts/http2.md","hash":"4d393543a8e52148912c907da566df76aa0970ad","modified":1672481221723},{"_id":"public/2022/12/26/abouthttp2/index.html","hash":"d730117aedffd68c0141525f8b74f4da2d76cbf4","modified":1672484950342},{"_id":"public/2022/12/26/bbr/index.html","hash":"0136fcff368bfd1d90a9104952b43181bfcb84d3","modified":1672484950342},{"_id":"public/2022/12/26/http2/index.html","hash":"f5738d206077ee58efb07befa1385d88070ac855","modified":1672484950342},{"_id":"source/_posts/01.md","hash":"fc8351e1c781ca912c34ce4f0d85721ffde7109b","modified":1672481729957},{"_id":"public/2022/12/31/HPL/index.html","hash":"1dcdb9ceafeeda822c8cee603d5dfd12b2d1c61b","modified":1672484950342},{"_id":"public/2022/12/31/SYN/index.html","hash":"78f155c5f5c5b1ed43f1744c47cf0d55ac5aacbe","modified":1672484950342},{"_id":"public/2022/12/22/01/index.html","hash":"7061d641ec1973efebf8963db033cc3007e6e584","modified":1672484950342},{"_id":"public/tags/Pytorch/index.html","hash":"9b096f4228e842ff26d1260adc9b80cb30bbb3e2","modified":1672484950342},{"_id":"source/_posts/02.md","hash":"0ee84420a8c4e3f04c759281663f4f7aff09939f","modified":1672484900691},{"_id":"source/.DS_Store","hash":"cc75fbdb977a72e3c33a32b977ec965c1597d5c5","modified":1672484944404},{"_id":"public/2022/12/29/02/index.html","hash":"64b09761d724fe548dbb1dfa78ec408de91fab9f","modified":1672484950342}],"Category":[],"Data":[],"Page":[{"title":"标签","date":"2022-12-13T00:21:48.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2022-12-13 8:21:48\ntype: \"tags\"\n---\n","updated":"2022-12-13T01:12:04.874Z","path":"tags/index.html","comments":1,"layout":"page","_id":"clblj6mcm0000q4g7dgar4kqu","content":"","site":{"data":{}},"cover":"/img/cover.jpg","excerpt":"","more":""}],"Post":[{"title":"高性能计算-基准测试程序Linpack（HPL）","cover":"https://s2.loli.net/2022/12/12/SH7Yhl2dIbEpzcm.jpg","_content":"\n\n自通用计算机时代开始以来，就出现了各种用于评估计算机性能的基准测试程序。这些程序的性质通常反映了构建计算机的预期目的，同时还提供了可以与制造商的理论性能估计进行比较的经验性能测量。\n\n高性能计算中最广泛使用的基准之一就是Linpack基准，它的起源是一个线性代数运算包，后来被Lapack库和其他竞争对手取代。但Linpack的基准测试程序在以后的日子里继续发挥强大的影响力。\n\nHPL，即(High-Performance *Linpack*)是早期Linpack的衍生产品，其高度并行化的设计，使得它用于评估TOP500超级计算机的性能排名。\n\n## 编译安装HPL\n\n### 环境依赖\n\n在安装HPL之前，系统上需要安装好支持C语言和Fortran77语言的编译器，我个人选择使用gcc与gfortran ，我将用他们来安装BLAS、MPICH以及HPL本体。\n\n#### BLAS\n\n到[BLAS官网](http://www.netlib.org/blas/)下载好源码，使用tar指令解压。进入BLAS文件夹，执行编译指令：\n\n```shell\ngfortran -c -O3 *.f \n# 编译所有的 .f 文件，生成 .o文件\n \nar rv libblas.a *.o  \n# 链接所有的 .o文件，生成.a 文件\n \ncp libblas.a /usr/local/lib  \n#将库文件复制到系统库目录\n```\n\n#### MPICH\n\n到[MPICH官网](https://www.mpich.org/downloads/)下载源码包，使用tar指令解压。进入mpich文件夹进行配置：\n\n```\n./configure --prefix=/home/software/mpich-4.0.3\n```\n\n然后`make&&make install`完成安装。\n\n记得编辑`.bashrc`以配置环境变量。可参考下方配置：\n\n```\n# mpich\n\nexport MPI_HOME=/home/software/mpich-4.0.3\n\nexport PATH=$MPI_HOME/bin:$PATH\n\nexport PATH=$PATH:$MPI_HOME/include\n\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$MPI_HOME/lib\n\nexport MANPATN=$MANPATH:$MPI_HOME/man\n```\n\n最后激活环境变量即可使用：\n\n```\nsource .bashrc\n```\n\n#### HPL\n\n于[HPL官网](https://netlib.org/benchmark/hpl/)下载源码包，使用`tar`指令解压后进入其`setup`目录。\n\n手写Make文件是一件痛苦的事情，好在这里有一些针对各种体系结构的编译设置实例。对于此实例，我们需要执行`make_generic`脚本以生成用于创建编译设置的模板。\n\n```\ncd hpl-2.3/setup\nsh make_generic\ncp Make.UNKNOWN ..Make.linux\ncd ..\n```\n\n现在，我们需要修改`Make.linux`文件，以声明hpl2.3目录以及BLAS库的位置.\n\n```\n97 LAlib\t= -lblas\n```\n\n使用-L标志为编译器提供库位置，例如我的BLAS库安装在`/usr/local/lib`中，则将97行更改为：\n\n```\n97 LAlib\t= -L/usr/local/lib -lblas\n```\n\n另外在第70行指定`hpl-2.3`目录的位置，在64行将架构体系的名称从UNKNOWN改为linux\n\n准备好`Make.linux`文件后，发出以下指令来编译HPL。\n\n`make arch=linux`\n\n这将在`bin/linux`目录里创建HPL的可执行文件xhpl。\n\n### 调试HPL参数文件\n\n伴随`xhpl`可执行文件的是一个参数文件(HPL.dat)，用于调整HPL的计算参数。\n\n下面给出一个示例：\n\n```\nHPLinpack benchmark input file\nInnovative Computing Laboratory, University of Tennessee\nHPL.out      output file name (if any)\n6            device out (6=stdout,7=stderr,file)\n1            # of problems sizes (N)\n143360 256000 1000         Ns  \n1            # of NBs\n384 192 256      NBs \n1            PMAP process mapping (0=Row-,1=Column-major)\n1            # of process grids (P x Q)\n1 2          Ps  \n1 2          Qs  \n16.0         threshold\n1            # of panel fact\n2 1 0        PFACTs (0=left, 1=Crout, 2=Right)\n1            # of recursive stopping criterium\n2            NBMINs (>= 1)\n1            # of panels in recursion\n2            NDIVs\n1            # of recursive panel fact.\n1 0 2        RFACTs (0=left, 1=Crout, 2=Right)\n1            # of broadcast\n0            BCASTs (0=1rg,1=1rM,2=2rg,3=2rM,4=Lng,5=LnM)\n1            # of lookahead depth\n0            DEPTHs (>=0)\n0            SWAP (0=bin-exch,1=long,2=mix)\n1            swapping threshold\n1            L1 in (0=transposed,1=no-transposed) form\n1            U  in (0=transposed,1=no-transposed) form\n0            Equilibration (0=no,1=yes)\n8            memory alignment in double (> 0)\n```\n\n测试过程中您可以根据节点的硬件配置，调整HPL.dat文件中相关参数，参数的说明如下所示。\n\n- 第5~6行内容。\n\n  ```shell\n  1            # of problems sizes (N)，N表示求解的矩阵数量与规模\n  143360 256000 1000         Ns  \n  ```\n\n  N表示求解的矩阵数量与规模。矩阵规模N越大，有效计算所占的比例也越大，系统浮点处理性能也就越高。但矩阵规模越大会导致内存消耗量越多，如果系统实际内存空间不足，使用缓存、性能会大幅度降低。矩阵占用系统总内存的80%左右为最佳，即N×N×8=系统总内存×80%（其中总内存的单位为字节）。\n\n- 第7~8行内容。\n\n  ```shell\n  1            # of NBs，NB表示求解矩阵过程中矩阵分块的大小\n  384 192 256      NBs \n  ```\n\n  求解矩阵过程中矩阵分块的大小。分块大小对性能有很大的影响，NB的选择和软硬件许多因素密切相关。NB值的选择主要是通过实际测试得出最优值，一般遵循以下规律：\n\n  - NB不能太大或太小，一般小于384。\n  - NB×8一定是缓存行的倍数。\n  - NB的大小和通信方式、矩阵规模、网络、处理器速度等有关系。\n\n  一般通过单节点或单CPU测试可以得到几个较好的NB值，但当系统规模增加、问题规模变大，有些NB取值所得性能会下降。因此建议在小规模测试时选择3个性能不错的NB值，再通过大规模测试检验这些选择。\n\n- 第10~12行内容。\n\n  ```shell\n  1            # of process grids (P x Q)，P表示水平方向处理器个数，Q表示垂直方向处理器个数\n  1 2          Ps  \n  1 2          Qs  \n  ```\n\n  P表示水平方向处理器个数，Q表示垂直方向处理器个数。P×Q表示二维处理器网格。P×Q=系统CPU数=进程数。一般情况下一个进程对应一个CPU，可以得到最佳性能。对于Intel ® Xeon ®，关闭超线程可以提高HPL性能。P和Q的取值一般遵循以下规律：\n\n  - P≤Q，一般情况下P的取值小于Q，因为列向通信量（通信次数和通信数据量）要远大于横向通信。\n  - P建议选择2的幂。HPL中水平方向通信采用二元交换法（Binary Exchange），当水平方向处理器个数P为2的幂时性能最优。\n","source":"_posts/HPL.md","raw":"---\ntitle: 高性能计算-基准测试程序Linpack（HPL）\ncover: https://s2.loli.net/2022/12/12/SH7Yhl2dIbEpzcm.jpg\ntags: High Performance Computing\n---\n\n\n自通用计算机时代开始以来，就出现了各种用于评估计算机性能的基准测试程序。这些程序的性质通常反映了构建计算机的预期目的，同时还提供了可以与制造商的理论性能估计进行比较的经验性能测量。\n\n高性能计算中最广泛使用的基准之一就是Linpack基准，它的起源是一个线性代数运算包，后来被Lapack库和其他竞争对手取代。但Linpack的基准测试程序在以后的日子里继续发挥强大的影响力。\n\nHPL，即(High-Performance *Linpack*)是早期Linpack的衍生产品，其高度并行化的设计，使得它用于评估TOP500超级计算机的性能排名。\n\n## 编译安装HPL\n\n### 环境依赖\n\n在安装HPL之前，系统上需要安装好支持C语言和Fortran77语言的编译器，我个人选择使用gcc与gfortran ，我将用他们来安装BLAS、MPICH以及HPL本体。\n\n#### BLAS\n\n到[BLAS官网](http://www.netlib.org/blas/)下载好源码，使用tar指令解压。进入BLAS文件夹，执行编译指令：\n\n```shell\ngfortran -c -O3 *.f \n# 编译所有的 .f 文件，生成 .o文件\n \nar rv libblas.a *.o  \n# 链接所有的 .o文件，生成.a 文件\n \ncp libblas.a /usr/local/lib  \n#将库文件复制到系统库目录\n```\n\n#### MPICH\n\n到[MPICH官网](https://www.mpich.org/downloads/)下载源码包，使用tar指令解压。进入mpich文件夹进行配置：\n\n```\n./configure --prefix=/home/software/mpich-4.0.3\n```\n\n然后`make&&make install`完成安装。\n\n记得编辑`.bashrc`以配置环境变量。可参考下方配置：\n\n```\n# mpich\n\nexport MPI_HOME=/home/software/mpich-4.0.3\n\nexport PATH=$MPI_HOME/bin:$PATH\n\nexport PATH=$PATH:$MPI_HOME/include\n\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$MPI_HOME/lib\n\nexport MANPATN=$MANPATH:$MPI_HOME/man\n```\n\n最后激活环境变量即可使用：\n\n```\nsource .bashrc\n```\n\n#### HPL\n\n于[HPL官网](https://netlib.org/benchmark/hpl/)下载源码包，使用`tar`指令解压后进入其`setup`目录。\n\n手写Make文件是一件痛苦的事情，好在这里有一些针对各种体系结构的编译设置实例。对于此实例，我们需要执行`make_generic`脚本以生成用于创建编译设置的模板。\n\n```\ncd hpl-2.3/setup\nsh make_generic\ncp Make.UNKNOWN ..Make.linux\ncd ..\n```\n\n现在，我们需要修改`Make.linux`文件，以声明hpl2.3目录以及BLAS库的位置.\n\n```\n97 LAlib\t= -lblas\n```\n\n使用-L标志为编译器提供库位置，例如我的BLAS库安装在`/usr/local/lib`中，则将97行更改为：\n\n```\n97 LAlib\t= -L/usr/local/lib -lblas\n```\n\n另外在第70行指定`hpl-2.3`目录的位置，在64行将架构体系的名称从UNKNOWN改为linux\n\n准备好`Make.linux`文件后，发出以下指令来编译HPL。\n\n`make arch=linux`\n\n这将在`bin/linux`目录里创建HPL的可执行文件xhpl。\n\n### 调试HPL参数文件\n\n伴随`xhpl`可执行文件的是一个参数文件(HPL.dat)，用于调整HPL的计算参数。\n\n下面给出一个示例：\n\n```\nHPLinpack benchmark input file\nInnovative Computing Laboratory, University of Tennessee\nHPL.out      output file name (if any)\n6            device out (6=stdout,7=stderr,file)\n1            # of problems sizes (N)\n143360 256000 1000         Ns  \n1            # of NBs\n384 192 256      NBs \n1            PMAP process mapping (0=Row-,1=Column-major)\n1            # of process grids (P x Q)\n1 2          Ps  \n1 2          Qs  \n16.0         threshold\n1            # of panel fact\n2 1 0        PFACTs (0=left, 1=Crout, 2=Right)\n1            # of recursive stopping criterium\n2            NBMINs (>= 1)\n1            # of panels in recursion\n2            NDIVs\n1            # of recursive panel fact.\n1 0 2        RFACTs (0=left, 1=Crout, 2=Right)\n1            # of broadcast\n0            BCASTs (0=1rg,1=1rM,2=2rg,3=2rM,4=Lng,5=LnM)\n1            # of lookahead depth\n0            DEPTHs (>=0)\n0            SWAP (0=bin-exch,1=long,2=mix)\n1            swapping threshold\n1            L1 in (0=transposed,1=no-transposed) form\n1            U  in (0=transposed,1=no-transposed) form\n0            Equilibration (0=no,1=yes)\n8            memory alignment in double (> 0)\n```\n\n测试过程中您可以根据节点的硬件配置，调整HPL.dat文件中相关参数，参数的说明如下所示。\n\n- 第5~6行内容。\n\n  ```shell\n  1            # of problems sizes (N)，N表示求解的矩阵数量与规模\n  143360 256000 1000         Ns  \n  ```\n\n  N表示求解的矩阵数量与规模。矩阵规模N越大，有效计算所占的比例也越大，系统浮点处理性能也就越高。但矩阵规模越大会导致内存消耗量越多，如果系统实际内存空间不足，使用缓存、性能会大幅度降低。矩阵占用系统总内存的80%左右为最佳，即N×N×8=系统总内存×80%（其中总内存的单位为字节）。\n\n- 第7~8行内容。\n\n  ```shell\n  1            # of NBs，NB表示求解矩阵过程中矩阵分块的大小\n  384 192 256      NBs \n  ```\n\n  求解矩阵过程中矩阵分块的大小。分块大小对性能有很大的影响，NB的选择和软硬件许多因素密切相关。NB值的选择主要是通过实际测试得出最优值，一般遵循以下规律：\n\n  - NB不能太大或太小，一般小于384。\n  - NB×8一定是缓存行的倍数。\n  - NB的大小和通信方式、矩阵规模、网络、处理器速度等有关系。\n\n  一般通过单节点或单CPU测试可以得到几个较好的NB值，但当系统规模增加、问题规模变大，有些NB取值所得性能会下降。因此建议在小规模测试时选择3个性能不错的NB值，再通过大规模测试检验这些选择。\n\n- 第10~12行内容。\n\n  ```shell\n  1            # of process grids (P x Q)，P表示水平方向处理器个数，Q表示垂直方向处理器个数\n  1 2          Ps  \n  1 2          Qs  \n  ```\n\n  P表示水平方向处理器个数，Q表示垂直方向处理器个数。P×Q表示二维处理器网格。P×Q=系统CPU数=进程数。一般情况下一个进程对应一个CPU，可以得到最佳性能。对于Intel ® Xeon ®，关闭超线程可以提高HPL性能。P和Q的取值一般遵循以下规律：\n\n  - P≤Q，一般情况下P的取值小于Q，因为列向通信量（通信次数和通信数据量）要远大于横向通信。\n  - P建议选择2的幂。HPL中水平方向通信采用二元交换法（Binary Exchange），当水平方向处理器个数P为2的幂时性能最优。\n","slug":"HPL","published":1,"date":"2022-12-31T10:07:01.722Z","updated":"2022-12-31T10:07:01.722Z","_id":"clblitu7p0000hwg7asxs7inf","comments":1,"layout":"post","photos":[],"link":"","content":"<p>自通用计算机时代开始以来，就出现了各种用于评估计算机性能的基准测试程序。这些程序的性质通常反映了构建计算机的预期目的，同时还提供了可以与制造商的理论性能估计进行比较的经验性能测量。</p>\n<p>高性能计算中最广泛使用的基准之一就是Linpack基准，它的起源是一个线性代数运算包，后来被Lapack库和其他竞争对手取代。但Linpack的基准测试程序在以后的日子里继续发挥强大的影响力。</p>\n<p>HPL，即(High-Performance <em>Linpack</em>)是早期Linpack的衍生产品，其高度并行化的设计，使得它用于评估TOP500超级计算机的性能排名。</p>\n<h2 id=\"编译安装HPL\"><a href=\"#编译安装HPL\" class=\"headerlink\" title=\"编译安装HPL\"></a>编译安装HPL</h2><h3 id=\"环境依赖\"><a href=\"#环境依赖\" class=\"headerlink\" title=\"环境依赖\"></a>环境依赖</h3><p>在安装HPL之前，系统上需要安装好支持C语言和Fortran77语言的编译器，我个人选择使用gcc与gfortran ，我将用他们来安装BLAS、MPICH以及HPL本体。</p>\n<h4 id=\"BLAS\"><a href=\"#BLAS\" class=\"headerlink\" title=\"BLAS\"></a>BLAS</h4><p>到<a href=\"http://www.netlib.org/blas/\">BLAS官网</a>下载好源码，使用tar指令解压。进入BLAS文件夹，执行编译指令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gfortran -c -O3 *.f </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">编译所有的 .f 文件，生成 .o文件</span></span><br><span class=\"line\"> </span><br><span class=\"line\">ar rv libblas.a *.o  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">链接所有的 .o文件，生成.a 文件</span></span><br><span class=\"line\"> </span><br><span class=\"line\">cp libblas.a /usr/local/lib  </span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">将库文件复制到系统库目录</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"MPICH\"><a href=\"#MPICH\" class=\"headerlink\" title=\"MPICH\"></a>MPICH</h4><p>到<a href=\"https://www.mpich.org/downloads/\">MPICH官网</a>下载源码包，使用tar指令解压。进入mpich文件夹进行配置：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix=/home/software/mpich-4.0.3</span><br></pre></td></tr></table></figure>\n\n<p>然后<code>make&amp;&amp;make install</code>完成安装。</p>\n<p>记得编辑<code>.bashrc</code>以配置环境变量。可参考下方配置：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># mpich</span><br><span class=\"line\"></span><br><span class=\"line\">export MPI_HOME=/home/software/mpich-4.0.3</span><br><span class=\"line\"></span><br><span class=\"line\">export PATH=$MPI_HOME/bin:$PATH</span><br><span class=\"line\"></span><br><span class=\"line\">export PATH=$PATH:$MPI_HOME/include</span><br><span class=\"line\"></span><br><span class=\"line\">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$MPI_HOME/lib</span><br><span class=\"line\"></span><br><span class=\"line\">export MANPATN=$MANPATH:$MPI_HOME/man</span><br></pre></td></tr></table></figure>\n\n<p>最后激活环境变量即可使用：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source .bashrc</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"HPL\"><a href=\"#HPL\" class=\"headerlink\" title=\"HPL\"></a>HPL</h4><p>于<a href=\"https://netlib.org/benchmark/hpl/\">HPL官网</a>下载源码包，使用<code>tar</code>指令解压后进入其<code>setup</code>目录。</p>\n<p>手写Make文件是一件痛苦的事情，好在这里有一些针对各种体系结构的编译设置实例。对于此实例，我们需要执行<code>make_generic</code>脚本以生成用于创建编译设置的模板。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd hpl-2.3/setup</span><br><span class=\"line\">sh make_generic</span><br><span class=\"line\">cp Make.UNKNOWN ..Make.linux</span><br><span class=\"line\">cd ..</span><br></pre></td></tr></table></figure>\n\n<p>现在，我们需要修改<code>Make.linux</code>文件，以声明hpl2.3目录以及BLAS库的位置.</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">97 LAlib\t= -lblas</span><br></pre></td></tr></table></figure>\n\n<p>使用-L标志为编译器提供库位置，例如我的BLAS库安装在<code>/usr/local/lib</code>中，则将97行更改为：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">97 LAlib\t= -L/usr/local/lib -lblas</span><br></pre></td></tr></table></figure>\n\n<p>另外在第70行指定<code>hpl-2.3</code>目录的位置，在64行将架构体系的名称从UNKNOWN改为linux</p>\n<p>准备好<code>Make.linux</code>文件后，发出以下指令来编译HPL。</p>\n<p><code>make arch=linux</code></p>\n<p>这将在<code>bin/linux</code>目录里创建HPL的可执行文件xhpl。</p>\n<h3 id=\"调试HPL参数文件\"><a href=\"#调试HPL参数文件\" class=\"headerlink\" title=\"调试HPL参数文件\"></a>调试HPL参数文件</h3><p>伴随<code>xhpl</code>可执行文件的是一个参数文件(HPL.dat)，用于调整HPL的计算参数。</p>\n<p>下面给出一个示例：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HPLinpack benchmark input file</span><br><span class=\"line\">Innovative Computing Laboratory, University of Tennessee</span><br><span class=\"line\">HPL.out      output file name (if any)</span><br><span class=\"line\">6            device out (6=stdout,7=stderr,file)</span><br><span class=\"line\">1            # of problems sizes (N)</span><br><span class=\"line\">143360 256000 1000         Ns  </span><br><span class=\"line\">1            # of NBs</span><br><span class=\"line\">384 192 256      NBs </span><br><span class=\"line\">1            PMAP process mapping (0=Row-,1=Column-major)</span><br><span class=\"line\">1            # of process grids (P x Q)</span><br><span class=\"line\">1 2          Ps  </span><br><span class=\"line\">1 2          Qs  </span><br><span class=\"line\">16.0         threshold</span><br><span class=\"line\">1            # of panel fact</span><br><span class=\"line\">2 1 0        PFACTs (0=left, 1=Crout, 2=Right)</span><br><span class=\"line\">1            # of recursive stopping criterium</span><br><span class=\"line\">2            NBMINs (&gt;= 1)</span><br><span class=\"line\">1            # of panels in recursion</span><br><span class=\"line\">2            NDIVs</span><br><span class=\"line\">1            # of recursive panel fact.</span><br><span class=\"line\">1 0 2        RFACTs (0=left, 1=Crout, 2=Right)</span><br><span class=\"line\">1            # of broadcast</span><br><span class=\"line\">0            BCASTs (0=1rg,1=1rM,2=2rg,3=2rM,4=Lng,5=LnM)</span><br><span class=\"line\">1            # of lookahead depth</span><br><span class=\"line\">0            DEPTHs (&gt;=0)</span><br><span class=\"line\">0            SWAP (0=bin-exch,1=long,2=mix)</span><br><span class=\"line\">1            swapping threshold</span><br><span class=\"line\">1            L1 in (0=transposed,1=no-transposed) form</span><br><span class=\"line\">1            U  in (0=transposed,1=no-transposed) form</span><br><span class=\"line\">0            Equilibration (0=no,1=yes)</span><br><span class=\"line\">8            memory alignment in double (&gt; 0)</span><br></pre></td></tr></table></figure>\n\n<p>测试过程中您可以根据节点的硬件配置，调整HPL.dat文件中相关参数，参数的说明如下所示。</p>\n<ul>\n<li><p>第5~6行内容。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1            # of problems sizes (N)，N表示求解的矩阵数量与规模</span><br><span class=\"line\">143360 256000 1000         Ns  </span><br></pre></td></tr></table></figure>\n\n<p>N表示求解的矩阵数量与规模。矩阵规模N越大，有效计算所占的比例也越大，系统浮点处理性能也就越高。但矩阵规模越大会导致内存消耗量越多，如果系统实际内存空间不足，使用缓存、性能会大幅度降低。矩阵占用系统总内存的80%左右为最佳，即N×N×8&#x3D;系统总内存×80%（其中总内存的单位为字节）。</p>\n</li>\n<li><p>第7~8行内容。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1            # of NBs，NB表示求解矩阵过程中矩阵分块的大小</span><br><span class=\"line\">384 192 256      NBs </span><br></pre></td></tr></table></figure>\n\n<p>求解矩阵过程中矩阵分块的大小。分块大小对性能有很大的影响，NB的选择和软硬件许多因素密切相关。NB值的选择主要是通过实际测试得出最优值，一般遵循以下规律：</p>\n<ul>\n<li>NB不能太大或太小，一般小于384。</li>\n<li>NB×8一定是缓存行的倍数。</li>\n<li>NB的大小和通信方式、矩阵规模、网络、处理器速度等有关系。</li>\n</ul>\n<p>一般通过单节点或单CPU测试可以得到几个较好的NB值，但当系统规模增加、问题规模变大，有些NB取值所得性能会下降。因此建议在小规模测试时选择3个性能不错的NB值，再通过大规模测试检验这些选择。</p>\n</li>\n<li><p>第10~12行内容。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1            # of process grids (P x Q)，P表示水平方向处理器个数，Q表示垂直方向处理器个数</span><br><span class=\"line\">1 2          Ps  </span><br><span class=\"line\">1 2          Qs  </span><br></pre></td></tr></table></figure>\n\n<p>P表示水平方向处理器个数，Q表示垂直方向处理器个数。P×Q表示二维处理器网格。P×Q&#x3D;系统CPU数&#x3D;进程数。一般情况下一个进程对应一个CPU，可以得到最佳性能。对于Intel ® Xeon ®，关闭超线程可以提高HPL性能。P和Q的取值一般遵循以下规律：</p>\n<ul>\n<li>P≤Q，一般情况下P的取值小于Q，因为列向通信量（通信次数和通信数据量）要远大于横向通信。</li>\n<li>P建议选择2的幂。HPL中水平方向通信采用二元交换法（Binary Exchange），当水平方向处理器个数P为2的幂时性能最优。</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>自通用计算机时代开始以来，就出现了各种用于评估计算机性能的基准测试程序。这些程序的性质通常反映了构建计算机的预期目的，同时还提供了可以与制造商的理论性能估计进行比较的经验性能测量。</p>\n<p>高性能计算中最广泛使用的基准之一就是Linpack基准，它的起源是一个线性代数运算包，后来被Lapack库和其他竞争对手取代。但Linpack的基准测试程序在以后的日子里继续发挥强大的影响力。</p>\n<p>HPL，即(High-Performance <em>Linpack</em>)是早期Linpack的衍生产品，其高度并行化的设计，使得它用于评估TOP500超级计算机的性能排名。</p>\n<h2 id=\"编译安装HPL\"><a href=\"#编译安装HPL\" class=\"headerlink\" title=\"编译安装HPL\"></a>编译安装HPL</h2><h3 id=\"环境依赖\"><a href=\"#环境依赖\" class=\"headerlink\" title=\"环境依赖\"></a>环境依赖</h3><p>在安装HPL之前，系统上需要安装好支持C语言和Fortran77语言的编译器，我个人选择使用gcc与gfortran ，我将用他们来安装BLAS、MPICH以及HPL本体。</p>\n<h4 id=\"BLAS\"><a href=\"#BLAS\" class=\"headerlink\" title=\"BLAS\"></a>BLAS</h4><p>到<a href=\"http://www.netlib.org/blas/\">BLAS官网</a>下载好源码，使用tar指令解压。进入BLAS文件夹，执行编译指令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gfortran -c -O3 *.f </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">编译所有的 .f 文件，生成 .o文件</span></span><br><span class=\"line\"> </span><br><span class=\"line\">ar rv libblas.a *.o  </span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">链接所有的 .o文件，生成.a 文件</span></span><br><span class=\"line\"> </span><br><span class=\"line\">cp libblas.a /usr/local/lib  </span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">将库文件复制到系统库目录</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"MPICH\"><a href=\"#MPICH\" class=\"headerlink\" title=\"MPICH\"></a>MPICH</h4><p>到<a href=\"https://www.mpich.org/downloads/\">MPICH官网</a>下载源码包，使用tar指令解压。进入mpich文件夹进行配置：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix=/home/software/mpich-4.0.3</span><br></pre></td></tr></table></figure>\n\n<p>然后<code>make&amp;&amp;make install</code>完成安装。</p>\n<p>记得编辑<code>.bashrc</code>以配置环境变量。可参考下方配置：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># mpich</span><br><span class=\"line\"></span><br><span class=\"line\">export MPI_HOME=/home/software/mpich-4.0.3</span><br><span class=\"line\"></span><br><span class=\"line\">export PATH=$MPI_HOME/bin:$PATH</span><br><span class=\"line\"></span><br><span class=\"line\">export PATH=$PATH:$MPI_HOME/include</span><br><span class=\"line\"></span><br><span class=\"line\">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$MPI_HOME/lib</span><br><span class=\"line\"></span><br><span class=\"line\">export MANPATN=$MANPATH:$MPI_HOME/man</span><br></pre></td></tr></table></figure>\n\n<p>最后激活环境变量即可使用：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">source .bashrc</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"HPL\"><a href=\"#HPL\" class=\"headerlink\" title=\"HPL\"></a>HPL</h4><p>于<a href=\"https://netlib.org/benchmark/hpl/\">HPL官网</a>下载源码包，使用<code>tar</code>指令解压后进入其<code>setup</code>目录。</p>\n<p>手写Make文件是一件痛苦的事情，好在这里有一些针对各种体系结构的编译设置实例。对于此实例，我们需要执行<code>make_generic</code>脚本以生成用于创建编译设置的模板。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd hpl-2.3/setup</span><br><span class=\"line\">sh make_generic</span><br><span class=\"line\">cp Make.UNKNOWN ..Make.linux</span><br><span class=\"line\">cd ..</span><br></pre></td></tr></table></figure>\n\n<p>现在，我们需要修改<code>Make.linux</code>文件，以声明hpl2.3目录以及BLAS库的位置.</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">97 LAlib\t= -lblas</span><br></pre></td></tr></table></figure>\n\n<p>使用-L标志为编译器提供库位置，例如我的BLAS库安装在<code>/usr/local/lib</code>中，则将97行更改为：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">97 LAlib\t= -L/usr/local/lib -lblas</span><br></pre></td></tr></table></figure>\n\n<p>另外在第70行指定<code>hpl-2.3</code>目录的位置，在64行将架构体系的名称从UNKNOWN改为linux</p>\n<p>准备好<code>Make.linux</code>文件后，发出以下指令来编译HPL。</p>\n<p><code>make arch=linux</code></p>\n<p>这将在<code>bin/linux</code>目录里创建HPL的可执行文件xhpl。</p>\n<h3 id=\"调试HPL参数文件\"><a href=\"#调试HPL参数文件\" class=\"headerlink\" title=\"调试HPL参数文件\"></a>调试HPL参数文件</h3><p>伴随<code>xhpl</code>可执行文件的是一个参数文件(HPL.dat)，用于调整HPL的计算参数。</p>\n<p>下面给出一个示例：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HPLinpack benchmark input file</span><br><span class=\"line\">Innovative Computing Laboratory, University of Tennessee</span><br><span class=\"line\">HPL.out      output file name (if any)</span><br><span class=\"line\">6            device out (6=stdout,7=stderr,file)</span><br><span class=\"line\">1            # of problems sizes (N)</span><br><span class=\"line\">143360 256000 1000         Ns  </span><br><span class=\"line\">1            # of NBs</span><br><span class=\"line\">384 192 256      NBs </span><br><span class=\"line\">1            PMAP process mapping (0=Row-,1=Column-major)</span><br><span class=\"line\">1            # of process grids (P x Q)</span><br><span class=\"line\">1 2          Ps  </span><br><span class=\"line\">1 2          Qs  </span><br><span class=\"line\">16.0         threshold</span><br><span class=\"line\">1            # of panel fact</span><br><span class=\"line\">2 1 0        PFACTs (0=left, 1=Crout, 2=Right)</span><br><span class=\"line\">1            # of recursive stopping criterium</span><br><span class=\"line\">2            NBMINs (&gt;= 1)</span><br><span class=\"line\">1            # of panels in recursion</span><br><span class=\"line\">2            NDIVs</span><br><span class=\"line\">1            # of recursive panel fact.</span><br><span class=\"line\">1 0 2        RFACTs (0=left, 1=Crout, 2=Right)</span><br><span class=\"line\">1            # of broadcast</span><br><span class=\"line\">0            BCASTs (0=1rg,1=1rM,2=2rg,3=2rM,4=Lng,5=LnM)</span><br><span class=\"line\">1            # of lookahead depth</span><br><span class=\"line\">0            DEPTHs (&gt;=0)</span><br><span class=\"line\">0            SWAP (0=bin-exch,1=long,2=mix)</span><br><span class=\"line\">1            swapping threshold</span><br><span class=\"line\">1            L1 in (0=transposed,1=no-transposed) form</span><br><span class=\"line\">1            U  in (0=transposed,1=no-transposed) form</span><br><span class=\"line\">0            Equilibration (0=no,1=yes)</span><br><span class=\"line\">8            memory alignment in double (&gt; 0)</span><br></pre></td></tr></table></figure>\n\n<p>测试过程中您可以根据节点的硬件配置，调整HPL.dat文件中相关参数，参数的说明如下所示。</p>\n<ul>\n<li><p>第5~6行内容。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1            # of problems sizes (N)，N表示求解的矩阵数量与规模</span><br><span class=\"line\">143360 256000 1000         Ns  </span><br></pre></td></tr></table></figure>\n\n<p>N表示求解的矩阵数量与规模。矩阵规模N越大，有效计算所占的比例也越大，系统浮点处理性能也就越高。但矩阵规模越大会导致内存消耗量越多，如果系统实际内存空间不足，使用缓存、性能会大幅度降低。矩阵占用系统总内存的80%左右为最佳，即N×N×8&#x3D;系统总内存×80%（其中总内存的单位为字节）。</p>\n</li>\n<li><p>第7~8行内容。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1            # of NBs，NB表示求解矩阵过程中矩阵分块的大小</span><br><span class=\"line\">384 192 256      NBs </span><br></pre></td></tr></table></figure>\n\n<p>求解矩阵过程中矩阵分块的大小。分块大小对性能有很大的影响，NB的选择和软硬件许多因素密切相关。NB值的选择主要是通过实际测试得出最优值，一般遵循以下规律：</p>\n<ul>\n<li>NB不能太大或太小，一般小于384。</li>\n<li>NB×8一定是缓存行的倍数。</li>\n<li>NB的大小和通信方式、矩阵规模、网络、处理器速度等有关系。</li>\n</ul>\n<p>一般通过单节点或单CPU测试可以得到几个较好的NB值，但当系统规模增加、问题规模变大，有些NB取值所得性能会下降。因此建议在小规模测试时选择3个性能不错的NB值，再通过大规模测试检验这些选择。</p>\n</li>\n<li><p>第10~12行内容。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1            # of process grids (P x Q)，P表示水平方向处理器个数，Q表示垂直方向处理器个数</span><br><span class=\"line\">1 2          Ps  </span><br><span class=\"line\">1 2          Qs  </span><br></pre></td></tr></table></figure>\n\n<p>P表示水平方向处理器个数，Q表示垂直方向处理器个数。P×Q表示二维处理器网格。P×Q&#x3D;系统CPU数&#x3D;进程数。一般情况下一个进程对应一个CPU，可以得到最佳性能。对于Intel ® Xeon ®，关闭超线程可以提高HPL性能。P和Q的取值一般遵循以下规律：</p>\n<ul>\n<li>P≤Q，一般情况下P的取值小于Q，因为列向通信量（通信次数和通信数据量）要远大于横向通信。</li>\n<li>P建议选择2的幂。HPL中水平方向通信采用二元交换法（Binary Exchange），当水平方向处理器个数P为2的幂时性能最优。</li>\n</ul>\n</li>\n</ul>\n"},{"title":"记录镜像站遭遇SYN泛洪攻击的诊断与防御","_content":"\n## 异常的连接数\n\n近日，镜像站莫名遭到多次攻击，症状表现为TCP连接数异常上升，久久得不到释放。后台监控检测到大量5XX错误，CPU负载高，正常业务受到较大影响。\n\n通过使用netstat命令可以统计服务器当前的各种TCP状态：\n\n```shell\nnetstat -n | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}'\n```\n\n我站在受攻击时的状态列表如下：\n\n```shell\nTIME_WAIT 168\nCLOSE_WAIT 9\nSYN_SENT 3\nFIN_WAIT1 229\nFIN_WAIT2 113\nESTABLISHED 234\nSYN_RECV 1272\nCLOSING 3\nLAST_ACK 97\n```\n\n可以明显发现SYN_RECV连接数异常增多。\n\n仅通过这一现象就可以判断为服务器受到了SYN Flood泛洪攻击。\n\n## SYN Flood泛洪攻击\n\n### 什么是SYN Flood攻击\n\nSYN 泛洪（半开连接攻击）是一种拒绝服务(DDoS)攻击，旨在耗尽可用服务器资源，致使服务器无法传输合法流量。攻击者通过重复发送初始连接请求 (SYN) 数据包，可击垮目标服务器计算机上的所有可用端口，导致目标设备在响应正常业务流量时表现迟钝乃至全无响应。\n\n### SYN Flood攻击的原理\n\nSYN泛洪攻击，是利用TCP连接的握手过程中的缺陷实现的。\n\n攻击者通过发送大量伪造的TCP连接请求，常用假冒的IP或IP号段发来海量的请求连接的第一个握手包（SYN包），被攻击服务器回应第二个握手包（SYN+ACK包），因为对方是假冒IP，对方永远收不到包且不会回应第三个握手包。导致被攻击服务器保持大量SYN_RECV状态的“半连接”，并且会重试默认5次回应第二个握手包，塞满TCP等待连接队列。\n\n![SYN Flood DDoS 攻击动画](https://www.cloudflare.com/img/learning/ddos/syn-flood-ddos-attack/syn-flood-attack-ddos-attack-diagram-2.png)\n\n### 防御SYN Flood\n\n#### 增大Nginx的并发限制\n\n适度调整Nginx主配置文件中的` worker_rlimit_nofile` 和` worker_connections`\n\n可参考如下配置：\n\n```nginx\nuser root root;\nworker_processes 4;\nworker_rlimit_nofile 65535;\n\n#error_log logs/error.log;\n#error_log logs/error.log notice;\n#error_log logs/error.log info;\n\n#pid logs/nginx.pid;\nevents {\n        use epoll;\n        worker_connections 65535;\n}\n```\n\n然后通过`nginx -s reload`命令热重载Nginx配置文件\n\n#### 调整系统TCP栈参数\n\n 在sysctl配置文件中，调整如下参数可有效减轻SYN Flood攻击带来的损害。\n\n- `net.core.netdev_max_backlog`\n\n  接受自网卡、但未被内核协议栈处理的报文队列长度\n\n- `net.ipv4.tcp_max_syn_backlog`\n\n  SYN_RCVD连接状态的最大个数\n\n- `net.ipv4.tcp_abort_on_overflow`\n\n  超出处理能力时，对新来的SYN直接回报RST，丢弃连接\n\n#### 增大linux的最大文件句柄数限制\n\n使用` ulimit -n` 查看本系统的最大文件句柄数限制，默认是1024\n\n可以通过修改` /etc/security/limts.conf`来改变该限制：\n\n在文件的最后追加：\n\n```\n* soft nofile 655360\n* hard nofile 655360\n```\n\n最前面的`*`代表全局设置。\n\n","source":"_posts/SYN.md","raw":"---\ntitle: 记录镜像站遭遇SYN泛洪攻击的诊断与防御\ntags: Cyberspace Security\n---\n\n## 异常的连接数\n\n近日，镜像站莫名遭到多次攻击，症状表现为TCP连接数异常上升，久久得不到释放。后台监控检测到大量5XX错误，CPU负载高，正常业务受到较大影响。\n\n通过使用netstat命令可以统计服务器当前的各种TCP状态：\n\n```shell\nnetstat -n | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}'\n```\n\n我站在受攻击时的状态列表如下：\n\n```shell\nTIME_WAIT 168\nCLOSE_WAIT 9\nSYN_SENT 3\nFIN_WAIT1 229\nFIN_WAIT2 113\nESTABLISHED 234\nSYN_RECV 1272\nCLOSING 3\nLAST_ACK 97\n```\n\n可以明显发现SYN_RECV连接数异常增多。\n\n仅通过这一现象就可以判断为服务器受到了SYN Flood泛洪攻击。\n\n## SYN Flood泛洪攻击\n\n### 什么是SYN Flood攻击\n\nSYN 泛洪（半开连接攻击）是一种拒绝服务(DDoS)攻击，旨在耗尽可用服务器资源，致使服务器无法传输合法流量。攻击者通过重复发送初始连接请求 (SYN) 数据包，可击垮目标服务器计算机上的所有可用端口，导致目标设备在响应正常业务流量时表现迟钝乃至全无响应。\n\n### SYN Flood攻击的原理\n\nSYN泛洪攻击，是利用TCP连接的握手过程中的缺陷实现的。\n\n攻击者通过发送大量伪造的TCP连接请求，常用假冒的IP或IP号段发来海量的请求连接的第一个握手包（SYN包），被攻击服务器回应第二个握手包（SYN+ACK包），因为对方是假冒IP，对方永远收不到包且不会回应第三个握手包。导致被攻击服务器保持大量SYN_RECV状态的“半连接”，并且会重试默认5次回应第二个握手包，塞满TCP等待连接队列。\n\n![SYN Flood DDoS 攻击动画](https://www.cloudflare.com/img/learning/ddos/syn-flood-ddos-attack/syn-flood-attack-ddos-attack-diagram-2.png)\n\n### 防御SYN Flood\n\n#### 增大Nginx的并发限制\n\n适度调整Nginx主配置文件中的` worker_rlimit_nofile` 和` worker_connections`\n\n可参考如下配置：\n\n```nginx\nuser root root;\nworker_processes 4;\nworker_rlimit_nofile 65535;\n\n#error_log logs/error.log;\n#error_log logs/error.log notice;\n#error_log logs/error.log info;\n\n#pid logs/nginx.pid;\nevents {\n        use epoll;\n        worker_connections 65535;\n}\n```\n\n然后通过`nginx -s reload`命令热重载Nginx配置文件\n\n#### 调整系统TCP栈参数\n\n 在sysctl配置文件中，调整如下参数可有效减轻SYN Flood攻击带来的损害。\n\n- `net.core.netdev_max_backlog`\n\n  接受自网卡、但未被内核协议栈处理的报文队列长度\n\n- `net.ipv4.tcp_max_syn_backlog`\n\n  SYN_RCVD连接状态的最大个数\n\n- `net.ipv4.tcp_abort_on_overflow`\n\n  超出处理能力时，对新来的SYN直接回报RST，丢弃连接\n\n#### 增大linux的最大文件句柄数限制\n\n使用` ulimit -n` 查看本系统的最大文件句柄数限制，默认是1024\n\n可以通过修改` /etc/security/limts.conf`来改变该限制：\n\n在文件的最后追加：\n\n```\n* soft nofile 655360\n* hard nofile 655360\n```\n\n最前面的`*`代表全局设置。\n\n","slug":"SYN","published":1,"date":"2022-12-31T10:07:01.722Z","updated":"2022-12-31T10:07:01.722Z","_id":"clc1r3i820000u4g7bm633qim","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"异常的连接数\"><a href=\"#异常的连接数\" class=\"headerlink\" title=\"异常的连接数\"></a>异常的连接数</h2><p>近日，镜像站莫名遭到多次攻击，症状表现为TCP连接数异常上升，久久得不到释放。后台监控检测到大量5XX错误，CPU负载高，正常业务受到较大影响。</p>\n<p>通过使用netstat命令可以统计服务器当前的各种TCP状态：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">netstat -n | awk &#x27;/^tcp/ &#123;++S[$NF]&#125; END &#123;for(a in S) print a, S[a]&#125;&#x27;</span><br></pre></td></tr></table></figure>\n\n<p>我站在受攻击时的状态列表如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TIME_WAIT 168</span><br><span class=\"line\">CLOSE_WAIT 9</span><br><span class=\"line\">SYN_SENT 3</span><br><span class=\"line\">FIN_WAIT1 229</span><br><span class=\"line\">FIN_WAIT2 113</span><br><span class=\"line\">ESTABLISHED 234</span><br><span class=\"line\">SYN_RECV 1272</span><br><span class=\"line\">CLOSING 3</span><br><span class=\"line\">LAST_ACK 97</span><br></pre></td></tr></table></figure>\n\n<p>可以明显发现SYN_RECV连接数异常增多。</p>\n<p>仅通过这一现象就可以判断为服务器受到了SYN Flood泛洪攻击。</p>\n<h2 id=\"SYN-Flood泛洪攻击\"><a href=\"#SYN-Flood泛洪攻击\" class=\"headerlink\" title=\"SYN Flood泛洪攻击\"></a>SYN Flood泛洪攻击</h2><h3 id=\"什么是SYN-Flood攻击\"><a href=\"#什么是SYN-Flood攻击\" class=\"headerlink\" title=\"什么是SYN Flood攻击\"></a>什么是SYN Flood攻击</h3><p>SYN 泛洪（半开连接攻击）是一种拒绝服务(DDoS)攻击，旨在耗尽可用服务器资源，致使服务器无法传输合法流量。攻击者通过重复发送初始连接请求 (SYN) 数据包，可击垮目标服务器计算机上的所有可用端口，导致目标设备在响应正常业务流量时表现迟钝乃至全无响应。</p>\n<h3 id=\"SYN-Flood攻击的原理\"><a href=\"#SYN-Flood攻击的原理\" class=\"headerlink\" title=\"SYN Flood攻击的原理\"></a>SYN Flood攻击的原理</h3><p>SYN泛洪攻击，是利用TCP连接的握手过程中的缺陷实现的。</p>\n<p>攻击者通过发送大量伪造的TCP连接请求，常用假冒的IP或IP号段发来海量的请求连接的第一个握手包（SYN包），被攻击服务器回应第二个握手包（SYN+ACK包），因为对方是假冒IP，对方永远收不到包且不会回应第三个握手包。导致被攻击服务器保持大量SYN_RECV状态的“半连接”，并且会重试默认5次回应第二个握手包，塞满TCP等待连接队列。</p>\n<p><img src=\"https://www.cloudflare.com/img/learning/ddos/syn-flood-ddos-attack/syn-flood-attack-ddos-attack-diagram-2.png\" alt=\"SYN Flood DDoS 攻击动画\"></p>\n<h3 id=\"防御SYN-Flood\"><a href=\"#防御SYN-Flood\" class=\"headerlink\" title=\"防御SYN Flood\"></a>防御SYN Flood</h3><h4 id=\"增大Nginx的并发限制\"><a href=\"#增大Nginx的并发限制\" class=\"headerlink\" title=\"增大Nginx的并发限制\"></a>增大Nginx的并发限制</h4><p>适度调整Nginx主配置文件中的<code> worker_rlimit_nofile</code> 和<code> worker_connections</code></p>\n<p>可参考如下配置：</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">user</span> root root;</span><br><span class=\"line\"><span class=\"attribute\">worker_processes</span> <span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"attribute\">worker_rlimit_nofile</span> <span class=\"number\">65535</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#error_log logs/error.log;</span></span><br><span class=\"line\"><span class=\"comment\">#error_log logs/error.log notice;</span></span><br><span class=\"line\"><span class=\"comment\">#error_log logs/error.log info;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#pid logs/nginx.pid;</span></span><br><span class=\"line\"><span class=\"section\">events</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">use</span> <span class=\"literal\">epoll</span>;</span><br><span class=\"line\">        <span class=\"attribute\">worker_connections</span> <span class=\"number\">65535</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>然后通过<code>nginx -s reload</code>命令热重载Nginx配置文件</p>\n<h4 id=\"调整系统TCP栈参数\"><a href=\"#调整系统TCP栈参数\" class=\"headerlink\" title=\"调整系统TCP栈参数\"></a>调整系统TCP栈参数</h4><p> 在sysctl配置文件中，调整如下参数可有效减轻SYN Flood攻击带来的损害。</p>\n<ul>\n<li><p><code>net.core.netdev_max_backlog</code></p>\n<p>接受自网卡、但未被内核协议栈处理的报文队列长度</p>\n</li>\n<li><p><code>net.ipv4.tcp_max_syn_backlog</code></p>\n<p>SYN_RCVD连接状态的最大个数</p>\n</li>\n<li><p><code>net.ipv4.tcp_abort_on_overflow</code></p>\n<p>超出处理能力时，对新来的SYN直接回报RST，丢弃连接</p>\n</li>\n</ul>\n<h4 id=\"增大linux的最大文件句柄数限制\"><a href=\"#增大linux的最大文件句柄数限制\" class=\"headerlink\" title=\"增大linux的最大文件句柄数限制\"></a>增大linux的最大文件句柄数限制</h4><p>使用<code> ulimit -n</code> 查看本系统的最大文件句柄数限制，默认是1024</p>\n<p>可以通过修改<code> /etc/security/limts.conf</code>来改变该限制：</p>\n<p>在文件的最后追加：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">* soft nofile 655360</span><br><span class=\"line\">* hard nofile 655360</span><br></pre></td></tr></table></figure>\n\n<p>最前面的<code>*</code>代表全局设置。</p>\n","site":{"data":{}},"cover":"/img/cover.jpg","excerpt":"","more":"<h2 id=\"异常的连接数\"><a href=\"#异常的连接数\" class=\"headerlink\" title=\"异常的连接数\"></a>异常的连接数</h2><p>近日，镜像站莫名遭到多次攻击，症状表现为TCP连接数异常上升，久久得不到释放。后台监控检测到大量5XX错误，CPU负载高，正常业务受到较大影响。</p>\n<p>通过使用netstat命令可以统计服务器当前的各种TCP状态：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">netstat -n | awk &#x27;/^tcp/ &#123;++S[$NF]&#125; END &#123;for(a in S) print a, S[a]&#125;&#x27;</span><br></pre></td></tr></table></figure>\n\n<p>我站在受攻击时的状态列表如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TIME_WAIT 168</span><br><span class=\"line\">CLOSE_WAIT 9</span><br><span class=\"line\">SYN_SENT 3</span><br><span class=\"line\">FIN_WAIT1 229</span><br><span class=\"line\">FIN_WAIT2 113</span><br><span class=\"line\">ESTABLISHED 234</span><br><span class=\"line\">SYN_RECV 1272</span><br><span class=\"line\">CLOSING 3</span><br><span class=\"line\">LAST_ACK 97</span><br></pre></td></tr></table></figure>\n\n<p>可以明显发现SYN_RECV连接数异常增多。</p>\n<p>仅通过这一现象就可以判断为服务器受到了SYN Flood泛洪攻击。</p>\n<h2 id=\"SYN-Flood泛洪攻击\"><a href=\"#SYN-Flood泛洪攻击\" class=\"headerlink\" title=\"SYN Flood泛洪攻击\"></a>SYN Flood泛洪攻击</h2><h3 id=\"什么是SYN-Flood攻击\"><a href=\"#什么是SYN-Flood攻击\" class=\"headerlink\" title=\"什么是SYN Flood攻击\"></a>什么是SYN Flood攻击</h3><p>SYN 泛洪（半开连接攻击）是一种拒绝服务(DDoS)攻击，旨在耗尽可用服务器资源，致使服务器无法传输合法流量。攻击者通过重复发送初始连接请求 (SYN) 数据包，可击垮目标服务器计算机上的所有可用端口，导致目标设备在响应正常业务流量时表现迟钝乃至全无响应。</p>\n<h3 id=\"SYN-Flood攻击的原理\"><a href=\"#SYN-Flood攻击的原理\" class=\"headerlink\" title=\"SYN Flood攻击的原理\"></a>SYN Flood攻击的原理</h3><p>SYN泛洪攻击，是利用TCP连接的握手过程中的缺陷实现的。</p>\n<p>攻击者通过发送大量伪造的TCP连接请求，常用假冒的IP或IP号段发来海量的请求连接的第一个握手包（SYN包），被攻击服务器回应第二个握手包（SYN+ACK包），因为对方是假冒IP，对方永远收不到包且不会回应第三个握手包。导致被攻击服务器保持大量SYN_RECV状态的“半连接”，并且会重试默认5次回应第二个握手包，塞满TCP等待连接队列。</p>\n<p><img src=\"https://www.cloudflare.com/img/learning/ddos/syn-flood-ddos-attack/syn-flood-attack-ddos-attack-diagram-2.png\" alt=\"SYN Flood DDoS 攻击动画\"></p>\n<h3 id=\"防御SYN-Flood\"><a href=\"#防御SYN-Flood\" class=\"headerlink\" title=\"防御SYN Flood\"></a>防御SYN Flood</h3><h4 id=\"增大Nginx的并发限制\"><a href=\"#增大Nginx的并发限制\" class=\"headerlink\" title=\"增大Nginx的并发限制\"></a>增大Nginx的并发限制</h4><p>适度调整Nginx主配置文件中的<code> worker_rlimit_nofile</code> 和<code> worker_connections</code></p>\n<p>可参考如下配置：</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">user</span> root root;</span><br><span class=\"line\"><span class=\"attribute\">worker_processes</span> <span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"attribute\">worker_rlimit_nofile</span> <span class=\"number\">65535</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#error_log logs/error.log;</span></span><br><span class=\"line\"><span class=\"comment\">#error_log logs/error.log notice;</span></span><br><span class=\"line\"><span class=\"comment\">#error_log logs/error.log info;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#pid logs/nginx.pid;</span></span><br><span class=\"line\"><span class=\"section\">events</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">use</span> <span class=\"literal\">epoll</span>;</span><br><span class=\"line\">        <span class=\"attribute\">worker_connections</span> <span class=\"number\">65535</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>然后通过<code>nginx -s reload</code>命令热重载Nginx配置文件</p>\n<h4 id=\"调整系统TCP栈参数\"><a href=\"#调整系统TCP栈参数\" class=\"headerlink\" title=\"调整系统TCP栈参数\"></a>调整系统TCP栈参数</h4><p> 在sysctl配置文件中，调整如下参数可有效减轻SYN Flood攻击带来的损害。</p>\n<ul>\n<li><p><code>net.core.netdev_max_backlog</code></p>\n<p>接受自网卡、但未被内核协议栈处理的报文队列长度</p>\n</li>\n<li><p><code>net.ipv4.tcp_max_syn_backlog</code></p>\n<p>SYN_RCVD连接状态的最大个数</p>\n</li>\n<li><p><code>net.ipv4.tcp_abort_on_overflow</code></p>\n<p>超出处理能力时，对新来的SYN直接回报RST，丢弃连接</p>\n</li>\n</ul>\n<h4 id=\"增大linux的最大文件句柄数限制\"><a href=\"#增大linux的最大文件句柄数限制\" class=\"headerlink\" title=\"增大linux的最大文件句柄数限制\"></a>增大linux的最大文件句柄数限制</h4><p>使用<code> ulimit -n</code> 查看本系统的最大文件句柄数限制，默认是1024</p>\n<p>可以通过修改<code> /etc/security/limts.conf</code>来改变该限制：</p>\n<p>在文件的最后追加：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">* soft nofile 655360</span><br><span class=\"line\">* hard nofile 655360</span><br></pre></td></tr></table></figure>\n\n<p>最前面的<code>*</code>代表全局设置。</p>\n"},{"title":"云场景下的网络QoS","cover":"https://s2.loli.net/2022/12/24/FI1YkGehQyVKs9T.jpg","date":"2022-10-13T12:46:25.000Z","_content":"\n公共的网络链路总会不可避免的产生带宽抢占的问题，我们通常使用QoS技术保障大多数用户的服务质量。\n\n![img](https://static001.geekbang.org/resource/image/74/11/747b0d537fd1705171ffcca3faf96211.jpg?wh=1539*646)\n\n一台服务器能控制的只有出方向的QoS，通过Shaping将出站流量整形，至于入栈流量只能通过Policy决定丢弃哪一部分数据包。\n\n## 队列方式控制网络QoS\n\nLinux下的TC就主要是使用队列技术控制的网络QoS。\n\n### 无类别排队规则\n\n不分类（或称无类别）排队规则（classless queueing disciplines）可以对某个网络 接口（interface）上的所有流量进行**无差别整形**。包括对数据进行：\n\n- 重新调度（reschedule）\n- 增加延迟（delay）\n- 丢弃（drop）\n\n与 classless qdisc 对应的是 classful qdisc，即有类别（或称分类别）排队规则。目前最常用的classless qdisc 是**pfifo_fast**，这也是很多系统上的 默认排队规则。\n\n##### pfifo_fast 先入先出队列\n\n如名字所示，这是一个先入先出(FIFO)队列，因此对所有的包都一视同仁。\n\n![img](https://arthurchiao.art/assets/img/lartc-qdisc/pfifo_fast-qdisc.png)\n\npfifo_fast有三个所谓的 “band”（可理解为三个队列），编号分别为 0、1、2：\n\n![img](https://static001.geekbang.org/resource/image/e3/6c/e391b4b79580a7d66afe4307ff3f6f6c.jpg?wh=2037*1175)\n\n- 每个band上分别执行 FIFO 规则。\n- 如果band 0有数据，就不会处理band 1；同理，band 1有数据时，不会去处理band 2。\n- 内核会检查数据包的 `TOS`字段，将“最小延迟”的包放到band 0。\n\n\n\n##### Stochastic Fair Queuing (随机公平队列)\n\n![img](https://static001.geekbang.org/resource/image/b6/99/b6ec2e4e20ddee7d6952b7fa4586ba99.jpg?wh=2177*1182)\n\n这种无类别队列规则会建立很多的 FIFO 的队列，TCP Session 会计算 hash 值，通过 hash 值分配到某个队列。在队列的另一端，网络包会通过轮询策略从各个队列中取出发送。这样不会有一个 Session 占据所有的流量。\n\n当然，如果两个 Session 的 hash 是一样的，会共享一个队列，也有可能互相影响。hash 函数会经常改变，从而 session 不会总是相互影响。\n\n\n\n##### Tolen Bucket Filte (TBF,令牌桶规则)\n\n![img](https://static001.geekbang.org/resource/image/14/9b/145c6f8593bf7603eae79246b9d6859b.jpg?wh=1894*1100)\n\n所有的网络包排成队列进行发送，但不是到了队头就能发送，而是需要拿到令牌才能发送。\n\n令牌根据设定的速度生成，所以即便队列很长，也是按照一定的速度进行发送的。当没有包在队列中的时候，令牌还是以既定的速度生成，但是不是无限累积的，而是放满了桶为止。\n\n设置桶的大小为了避免下面的情况：当长时间没有网络包发送的时候，积累了大量的令牌，突然来了大量的网络包，每个都能得到令牌，造成瞬间流量大增。","source":"_posts/QoS.md","raw":"---\ntitle: 云场景下的网络QoS\ncover: https://s2.loli.net/2022/12/24/FI1YkGehQyVKs9T.jpg\ntags: Computer Network\ndate: 2022/10/13 20:46:25\n---\n\n公共的网络链路总会不可避免的产生带宽抢占的问题，我们通常使用QoS技术保障大多数用户的服务质量。\n\n![img](https://static001.geekbang.org/resource/image/74/11/747b0d537fd1705171ffcca3faf96211.jpg?wh=1539*646)\n\n一台服务器能控制的只有出方向的QoS，通过Shaping将出站流量整形，至于入栈流量只能通过Policy决定丢弃哪一部分数据包。\n\n## 队列方式控制网络QoS\n\nLinux下的TC就主要是使用队列技术控制的网络QoS。\n\n### 无类别排队规则\n\n不分类（或称无类别）排队规则（classless queueing disciplines）可以对某个网络 接口（interface）上的所有流量进行**无差别整形**。包括对数据进行：\n\n- 重新调度（reschedule）\n- 增加延迟（delay）\n- 丢弃（drop）\n\n与 classless qdisc 对应的是 classful qdisc，即有类别（或称分类别）排队规则。目前最常用的classless qdisc 是**pfifo_fast**，这也是很多系统上的 默认排队规则。\n\n##### pfifo_fast 先入先出队列\n\n如名字所示，这是一个先入先出(FIFO)队列，因此对所有的包都一视同仁。\n\n![img](https://arthurchiao.art/assets/img/lartc-qdisc/pfifo_fast-qdisc.png)\n\npfifo_fast有三个所谓的 “band”（可理解为三个队列），编号分别为 0、1、2：\n\n![img](https://static001.geekbang.org/resource/image/e3/6c/e391b4b79580a7d66afe4307ff3f6f6c.jpg?wh=2037*1175)\n\n- 每个band上分别执行 FIFO 规则。\n- 如果band 0有数据，就不会处理band 1；同理，band 1有数据时，不会去处理band 2。\n- 内核会检查数据包的 `TOS`字段，将“最小延迟”的包放到band 0。\n\n\n\n##### Stochastic Fair Queuing (随机公平队列)\n\n![img](https://static001.geekbang.org/resource/image/b6/99/b6ec2e4e20ddee7d6952b7fa4586ba99.jpg?wh=2177*1182)\n\n这种无类别队列规则会建立很多的 FIFO 的队列，TCP Session 会计算 hash 值，通过 hash 值分配到某个队列。在队列的另一端，网络包会通过轮询策略从各个队列中取出发送。这样不会有一个 Session 占据所有的流量。\n\n当然，如果两个 Session 的 hash 是一样的，会共享一个队列，也有可能互相影响。hash 函数会经常改变，从而 session 不会总是相互影响。\n\n\n\n##### Tolen Bucket Filte (TBF,令牌桶规则)\n\n![img](https://static001.geekbang.org/resource/image/14/9b/145c6f8593bf7603eae79246b9d6859b.jpg?wh=1894*1100)\n\n所有的网络包排成队列进行发送，但不是到了队头就能发送，而是需要拿到令牌才能发送。\n\n令牌根据设定的速度生成，所以即便队列很长，也是按照一定的速度进行发送的。当没有包在队列中的时候，令牌还是以既定的速度生成，但是不是无限累积的，而是放满了桶为止。\n\n设置桶的大小为了避免下面的情况：当长时间没有网络包发送的时候，积累了大量的令牌，突然来了大量的网络包，每个都能得到令牌，造成瞬间流量大增。","slug":"QoS","published":1,"updated":"2022-12-31T10:07:01.722Z","_id":"clc1w4qdq0000y8g77ft106wy","comments":1,"layout":"post","photos":[],"link":"","content":"<p>公共的网络链路总会不可避免的产生带宽抢占的问题，我们通常使用QoS技术保障大多数用户的服务质量。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/74/11/747b0d537fd1705171ffcca3faf96211.jpg?wh=1539*646\" alt=\"img\"></p>\n<p>一台服务器能控制的只有出方向的QoS，通过Shaping将出站流量整形，至于入栈流量只能通过Policy决定丢弃哪一部分数据包。</p>\n<h2 id=\"队列方式控制网络QoS\"><a href=\"#队列方式控制网络QoS\" class=\"headerlink\" title=\"队列方式控制网络QoS\"></a>队列方式控制网络QoS</h2><p>Linux下的TC就主要是使用队列技术控制的网络QoS。</p>\n<h3 id=\"无类别排队规则\"><a href=\"#无类别排队规则\" class=\"headerlink\" title=\"无类别排队规则\"></a>无类别排队规则</h3><p>不分类（或称无类别）排队规则（classless queueing disciplines）可以对某个网络 接口（interface）上的所有流量进行<strong>无差别整形</strong>。包括对数据进行：</p>\n<ul>\n<li>重新调度（reschedule）</li>\n<li>增加延迟（delay）</li>\n<li>丢弃（drop）</li>\n</ul>\n<p>与 classless qdisc 对应的是 classful qdisc，即有类别（或称分类别）排队规则。目前最常用的classless qdisc 是<strong>pfifo_fast</strong>，这也是很多系统上的 默认排队规则。</p>\n<h5 id=\"pfifo-fast-先入先出队列\"><a href=\"#pfifo-fast-先入先出队列\" class=\"headerlink\" title=\"pfifo_fast 先入先出队列\"></a>pfifo_fast 先入先出队列</h5><p>如名字所示，这是一个先入先出(FIFO)队列，因此对所有的包都一视同仁。</p>\n<p><img src=\"https://arthurchiao.art/assets/img/lartc-qdisc/pfifo_fast-qdisc.png\" alt=\"img\"></p>\n<p>pfifo_fast有三个所谓的 “band”（可理解为三个队列），编号分别为 0、1、2：</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/e3/6c/e391b4b79580a7d66afe4307ff3f6f6c.jpg?wh=2037*1175\" alt=\"img\"></p>\n<ul>\n<li>每个band上分别执行 FIFO 规则。</li>\n<li>如果band 0有数据，就不会处理band 1；同理，band 1有数据时，不会去处理band 2。</li>\n<li>内核会检查数据包的 <code>TOS</code>字段，将“最小延迟”的包放到band 0。</li>\n</ul>\n<h5 id=\"Stochastic-Fair-Queuing-随机公平队列\"><a href=\"#Stochastic-Fair-Queuing-随机公平队列\" class=\"headerlink\" title=\"Stochastic Fair Queuing (随机公平队列)\"></a>Stochastic Fair Queuing (随机公平队列)</h5><p><img src=\"https://static001.geekbang.org/resource/image/b6/99/b6ec2e4e20ddee7d6952b7fa4586ba99.jpg?wh=2177*1182\" alt=\"img\"></p>\n<p>这种无类别队列规则会建立很多的 FIFO 的队列，TCP Session 会计算 hash 值，通过 hash 值分配到某个队列。在队列的另一端，网络包会通过轮询策略从各个队列中取出发送。这样不会有一个 Session 占据所有的流量。</p>\n<p>当然，如果两个 Session 的 hash 是一样的，会共享一个队列，也有可能互相影响。hash 函数会经常改变，从而 session 不会总是相互影响。</p>\n<h5 id=\"Tolen-Bucket-Filte-TBF-令牌桶规则\"><a href=\"#Tolen-Bucket-Filte-TBF-令牌桶规则\" class=\"headerlink\" title=\"Tolen Bucket Filte (TBF,令牌桶规则)\"></a>Tolen Bucket Filte (TBF,令牌桶规则)</h5><p><img src=\"https://static001.geekbang.org/resource/image/14/9b/145c6f8593bf7603eae79246b9d6859b.jpg?wh=1894*1100\" alt=\"img\"></p>\n<p>所有的网络包排成队列进行发送，但不是到了队头就能发送，而是需要拿到令牌才能发送。</p>\n<p>令牌根据设定的速度生成，所以即便队列很长，也是按照一定的速度进行发送的。当没有包在队列中的时候，令牌还是以既定的速度生成，但是不是无限累积的，而是放满了桶为止。</p>\n<p>设置桶的大小为了避免下面的情况：当长时间没有网络包发送的时候，积累了大量的令牌，突然来了大量的网络包，每个都能得到令牌，造成瞬间流量大增。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>公共的网络链路总会不可避免的产生带宽抢占的问题，我们通常使用QoS技术保障大多数用户的服务质量。</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/74/11/747b0d537fd1705171ffcca3faf96211.jpg?wh=1539*646\" alt=\"img\"></p>\n<p>一台服务器能控制的只有出方向的QoS，通过Shaping将出站流量整形，至于入栈流量只能通过Policy决定丢弃哪一部分数据包。</p>\n<h2 id=\"队列方式控制网络QoS\"><a href=\"#队列方式控制网络QoS\" class=\"headerlink\" title=\"队列方式控制网络QoS\"></a>队列方式控制网络QoS</h2><p>Linux下的TC就主要是使用队列技术控制的网络QoS。</p>\n<h3 id=\"无类别排队规则\"><a href=\"#无类别排队规则\" class=\"headerlink\" title=\"无类别排队规则\"></a>无类别排队规则</h3><p>不分类（或称无类别）排队规则（classless queueing disciplines）可以对某个网络 接口（interface）上的所有流量进行<strong>无差别整形</strong>。包括对数据进行：</p>\n<ul>\n<li>重新调度（reschedule）</li>\n<li>增加延迟（delay）</li>\n<li>丢弃（drop）</li>\n</ul>\n<p>与 classless qdisc 对应的是 classful qdisc，即有类别（或称分类别）排队规则。目前最常用的classless qdisc 是<strong>pfifo_fast</strong>，这也是很多系统上的 默认排队规则。</p>\n<h5 id=\"pfifo-fast-先入先出队列\"><a href=\"#pfifo-fast-先入先出队列\" class=\"headerlink\" title=\"pfifo_fast 先入先出队列\"></a>pfifo_fast 先入先出队列</h5><p>如名字所示，这是一个先入先出(FIFO)队列，因此对所有的包都一视同仁。</p>\n<p><img src=\"https://arthurchiao.art/assets/img/lartc-qdisc/pfifo_fast-qdisc.png\" alt=\"img\"></p>\n<p>pfifo_fast有三个所谓的 “band”（可理解为三个队列），编号分别为 0、1、2：</p>\n<p><img src=\"https://static001.geekbang.org/resource/image/e3/6c/e391b4b79580a7d66afe4307ff3f6f6c.jpg?wh=2037*1175\" alt=\"img\"></p>\n<ul>\n<li>每个band上分别执行 FIFO 规则。</li>\n<li>如果band 0有数据，就不会处理band 1；同理，band 1有数据时，不会去处理band 2。</li>\n<li>内核会检查数据包的 <code>TOS</code>字段，将“最小延迟”的包放到band 0。</li>\n</ul>\n<h5 id=\"Stochastic-Fair-Queuing-随机公平队列\"><a href=\"#Stochastic-Fair-Queuing-随机公平队列\" class=\"headerlink\" title=\"Stochastic Fair Queuing (随机公平队列)\"></a>Stochastic Fair Queuing (随机公平队列)</h5><p><img src=\"https://static001.geekbang.org/resource/image/b6/99/b6ec2e4e20ddee7d6952b7fa4586ba99.jpg?wh=2177*1182\" alt=\"img\"></p>\n<p>这种无类别队列规则会建立很多的 FIFO 的队列，TCP Session 会计算 hash 值，通过 hash 值分配到某个队列。在队列的另一端，网络包会通过轮询策略从各个队列中取出发送。这样不会有一个 Session 占据所有的流量。</p>\n<p>当然，如果两个 Session 的 hash 是一样的，会共享一个队列，也有可能互相影响。hash 函数会经常改变，从而 session 不会总是相互影响。</p>\n<h5 id=\"Tolen-Bucket-Filte-TBF-令牌桶规则\"><a href=\"#Tolen-Bucket-Filte-TBF-令牌桶规则\" class=\"headerlink\" title=\"Tolen Bucket Filte (TBF,令牌桶规则)\"></a>Tolen Bucket Filte (TBF,令牌桶规则)</h5><p><img src=\"https://static001.geekbang.org/resource/image/14/9b/145c6f8593bf7603eae79246b9d6859b.jpg?wh=1894*1100\" alt=\"img\"></p>\n<p>所有的网络包排成队列进行发送，但不是到了队头就能发送，而是需要拿到令牌才能发送。</p>\n<p>令牌根据设定的速度生成，所以即便队列很长，也是按照一定的速度进行发送的。当没有包在队列中的时候，令牌还是以既定的速度生成，但是不是无限累积的，而是放满了桶为止。</p>\n<p>设置桶的大小为了避免下面的情况：当长时间没有网络包发送的时候，积累了大量的令牌，突然来了大量的网络包，每个都能得到令牌，造成瞬间流量大增。</p>\n"},{"title":"QLUT镜像站的日志监控及预警方案","cover":"https://s2.loli.net/2022/12/24/FI1YkGehQyVKs9T.jpg","date":"2022-12-06T17:27:20.000Z","_content":"\n十分意外镜像站用户增长速度如此之快，面对日均五万左右的用户量，服务器频繁出现各种性能问题。在故障排查的过程中，我意识到服务器需要一套成熟、完整、可靠的日志监控及预警方案。\n\n先前长期使用 `goaccess` 静态分析Nginx的日志，具有滞后性。只能用于单纯的分析总结一段时间内的网站流量状况，而无法做到实时监看服务状态和运行数据。\n\n既然是开源镜像站，那么我们就需要把目光投向开源社区。\n\n## 较为流行的ELK\n\n目前市面上最流行的日志处理方案莫过于“ELK”系统，“ELK”是Elasticsearch、Logstash和Kibana的组合的合称。\n\nElasticsearch 是一个搜索和分析引擎。Logstash 是服务器端数据处理管道，能够同时从多个来源采集数据，转换数据，然后将数据发送到诸如 Elasticsearch 等“存储库”中。Kibana 则可以让用户在 Elasticsearch 中使用图形和图表对数据进行可视化。\n\n## InfluxDB&Telegraf\n\n通过自己的初步了解以及咨询使用者的使用体验，我认为ELK在使用体验和性能上都不适合我（其实是单纯的不喜欢Java）。而一个朋友推荐我去尝试一下 InfluxDB+Telegraf 的组合。\n\n服务器的性能日志从本质上来说，属于**时序大数据**，我们打开数据库排名网站[DB-Engines Ranking](https://db-engines.com/en/ranking)，左侧选择时序数据库([Time Series DBMS](https://db-engines.com/en/ranking/time+series+dbms))，可以看到 InfluxDB 在排名上一骑绝尘。\n\n![image.png](https://s2.loli.net/2022/12/24/e8RbQm7i2Jj1Kzk.png)\n\n安装直接跟着官方文档即可，下面我将英文文档翻译一下给大家参考：\n\n#### 使用 systemd 将 InfluxDB 安装为服务\n\n1. 使用以下命令从[InfluxData 下载页面](https://portal.influxdata.com/downloads/)使用 URL 下载并安装适当的`.deb`或文件：`.rpm`\n\n   ```sh\n   # Ubuntu/Debian\n   wget https://dl.influxdata.com/influxdb/releases/influxdb2-2.6.0-xxx.deb\n   sudo dpkg -i influxdb2-2.6.0-xxx.deb\n   \n   # Red Hat/CentOS/Fedora\n   wget https://dl.influxdata.com/influxdb/releases/influxdb2-2.6.0-xxx.rpm\n   sudo yum localinstall influxdb2-2.6.0-xxx.rpm\n   ```\n\n   *使用`.rpm`包下载的确切文件名（例如，`influxdb2-2.6.0-amd64.rpm`）。*\n\n2. 启动 InfluxDB 服务：\n\n   ```sh\n   sudo service influxdb start\n   ```\n\n   安装 InfluxDB 包会创建一个服务文件，`/lib/systemd/system/influxdb.service` 用于在启动时将 InfluxDB 作为后台服务启动。\n\n3. 重新启动系统并验证服务是否正常运行：\n\n   ```shell\n   $  sudo service influxdb status\n   ● influxdb.service - InfluxDB is an open-source, distributed, time series database\n     Loaded: loaded (/lib/systemd/system/influxdb.service; enabled; vendor preset: enable>\n     Active: active (running)\n   ```\n\n有关 InfluxDB 在作为服务运行时在磁盘上存储数据的位置的信息，请参阅[文件系统布局](https://docs.influxdata.com/influxdb/v2.6/reference/internals/file-system-layout/?t=Linux#installed-as-a-package)。\n\n要自定义 InfluxDB 配置，请使用 [命令行标志（参数）](https://docs.influxdata.com/influxdb/v2.6/install/?t=Linux#pass-arguments-to-systemd)、环境变量或 InfluxDB 配置文件。有关详细信息，请参阅 InfluxDB[配置选项](https://docs.influxdata.com/influxdb/v2.6/reference/config-options/)。\n\n#### 将参数传递给 systemd\n\n1. 添加一行或多行命令，如下所示，包含`influxd`to的参数`/etc/default/influxdb2`：\n\n   ```sh\n   ARG1=\"--http-bind-address :8087\"\n   ARG2=\"<another argument here>\"\n   ```\n\n2. 编辑`/lib/systemd/system/influxdb.service`文件如下：\n\n   ```sh\n   ExecStart=/usr/bin/influxd $ARG1 $ARG2\n   ```\n\n#### 启动 InfluxDB\n\n如果 InfluxDB 作为 systemd 服务安装，则 systemd 管理`influxd`守护进程，不需要进一步的操作。如果二进制文件是手动下载并添加到系统中的，请使用以下命令`$PATH`启动守护进程：\n\n```shell\ninfluxd\n```\n\n进入8086端口配置好后，就可以在DashBoard里查阅可视化数据了。\n\n![image.png](https://s2.loli.net/2022/12/24/2ybGTCxF6znZQJA.png)\n\n## Grafana\n\nInfluxDB毕竟是一个数据库，在可视化方便并不擅长。因此我在另外一台机器上调用InfluxDB的数据源制作可视化面板。\n\n![image.png](https://s2.loli.net/2022/12/26/Jeig5pqMROmwAbE.png)\n\n面板主要包含了Nginx启动状态、内存利用、储存利用、CPU、DiskIO、网络状态和缓存命中率等。\n\n下面是面板的JSON以供参考\n\n```JSON\n{\n  \"annotations\": {\n    \"list\": [\n      {\n        \"builtIn\": 1,\n        \"datasource\": {\n          \"type\": \"grafana\",\n          \"uid\": \"-- Grafana --\"\n        },\n        \"enable\": true,\n        \"hide\": true,\n        \"iconColor\": \"rgba(0, 211, 255, 1)\",\n        \"name\": \"Annotations & Alerts\",\n        \"target\": {\n          \"limit\": 100,\n          \"matchAny\": false,\n          \"tags\": [],\n          \"type\": \"dashboard\"\n        },\n        \"type\": \"dashboard\"\n      }\n    ]\n  },\n  \"editable\": true,\n  \"fiscalYearStartMonth\": 0,\n  \"graphTooltip\": 0,\n  \"id\": 1,\n  \"links\": [],\n  \"liveNow\": false,\n  \"panels\": [\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"thresholds\"\n          },\n          \"mappings\": [\n            {\n              \"options\": {\n                \"0\": {\n                  \"index\": 0,\n                  \"text\": \"DOWN\"\n                }\n              },\n              \"type\": \"value\"\n            },\n            {\n              \"options\": {\n                \"from\": 1,\n                \"result\": {\n                  \"index\": 1,\n                  \"text\": \"UP\"\n                },\n                \"to\": 9999999\n              },\n              \"type\": \"range\"\n            }\n          ],\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          }\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 3,\n        \"x\": 0,\n        \"y\": 0\n      },\n      \"id\": 21,\n      \"options\": {\n        \"colorMode\": \"value\",\n        \"graphMode\": \"area\",\n        \"justifyMode\": \"auto\",\n        \"orientation\": \"auto\",\n        \"reduceOptions\": {\n          \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\": \"\",\n          \"values\": false\n        },\n        \"textMode\": \"auto\"\n      },\n      \"pluginVersion\": \"9.2.4\",\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"nginx\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"active\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |> yield(name: \\\"mean\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"Nginx UP/DOWN\",\n      \"type\": \"stat\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            }\n          },\n          \"mappings\": [],\n          \"min\": 0,\n          \"unit\": \"decbytes\"\n        },\n        \"overrides\": [\n          {\n            \"matcher\": {\n              \"id\": \"byName\",\n              \"options\": \"cached i-30g60b69\"\n            },\n            \"properties\": [\n              {\n                \"id\": \"color\",\n                \"value\": {\n                  \"fixedColor\": \"light-blue\",\n                  \"mode\": \"fixed\"\n                }\n              }\n            ]\n          },\n          {\n            \"matcher\": {\n              \"id\": \"byName\",\n              \"options\": \"free i-30g60b69\"\n            },\n            \"properties\": [\n              {\n                \"id\": \"color\",\n                \"value\": {\n                  \"fixedColor\": \"light-green\",\n                  \"mode\": \"fixed\"\n                }\n              }\n            ]\n          },\n          {\n            \"matcher\": {\n              \"id\": \"byName\",\n              \"options\": \"used i-30g60b69\"\n            },\n            \"properties\": [\n              {\n                \"id\": \"color\",\n                \"value\": {\n                  \"fixedColor\": \"red\",\n                  \"mode\": \"fixed\"\n                }\n              }\n            ]\n          },\n          {\n            \"matcher\": {\n              \"id\": \"byName\",\n              \"options\": \"buffered i-30g60b69\"\n            },\n            \"properties\": [\n              {\n                \"id\": \"color\",\n                \"value\": {\n                  \"fixedColor\": \"yellow\",\n                  \"mode\": \"fixed\"\n                }\n              }\n            ]\n          }\n        ]\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 6,\n        \"x\": 3,\n        \"y\": 0\n      },\n      \"id\": 10,\n      \"options\": {\n        \"displayLabels\": [\n          \"value\"\n        ],\n        \"legend\": {\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true,\n          \"values\": [\n            \"value\"\n          ]\n        },\n        \"pieType\": \"donut\",\n        \"reduceOptions\": {\n          \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\": \"\",\n          \"values\": false\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"desc\"\n        }\n      },\n      \"pluginVersion\": \"9.2.4\",\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart)\\r\\n  |> filter(fn: (r) => r._measurement == \\\"mem\\\")\\r\\n  |> filter(fn: (r) => r._field == \\\"used\\\" or r._field == \\\"cached\\\" or r._field == \\\"free\\\" or r._field == \\\"buffered\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |> yield(name: \\\"mean\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"Memory Usage\",\n      \"transformations\": [],\n      \"type\": \"piechart\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"thresholds\"\n          },\n          \"mappings\": [],\n          \"max\": 100,\n          \"min\": 0,\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          },\n          \"unit\": \"percent\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 3,\n        \"x\": 9,\n        \"y\": 0\n      },\n      \"id\": 12,\n      \"options\": {\n        \"orientation\": \"auto\",\n        \"reduceOptions\": {\n          \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\": \"\",\n          \"values\": false\n        },\n        \"showThresholdLabels\": false,\n        \"showThresholdMarkers\": true\n      },\n      \"pluginVersion\": \"9.2.4\",\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"disk\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"used_percent\\\")\\r\\n  |> filter(fn: (r) => r[\\\"device\\\"] == \\\"vdc\\\")\\r\\n  |> filter(fn: (r) => r[\\\"fstype\\\"] == \\\"ext4\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> filter(fn: (r) => r[\\\"mode\\\"] == \\\"rw\\\")\\r\\n  |> filter(fn: (r) => r[\\\"path\\\"] == \\\"/mnt/vos-6izqwyw8\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |> yield(name: \\\"mean\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"Disk Usage\",\n      \"type\": \"gauge\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisCenteredZero\": false,\n            \"axisColorMode\": \"text\",\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": 0,\n            \"drawStyle\": \"line\",\n            \"fillOpacity\": 31,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"linear\",\n            \"lineWidth\": 1,\n            \"pointSize\": 5,\n            \"scaleDistribution\": {\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"normal\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          }\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 12,\n        \"y\": 0\n      },\n      \"id\": 19,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"nginx\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"waiting\\\" or r[\\\"_field\\\"] == \\\"writing\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |> yield(name: \\\"mean\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"TCP Socket\",\n      \"type\": \"timeseries\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisCenteredZero\": false,\n            \"axisColorMode\": \"text\",\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": 0,\n            \"drawStyle\": \"line\",\n            \"fillOpacity\": 79,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"linear\",\n            \"lineStyle\": {\n              \"fill\": \"solid\"\n            },\n            \"lineWidth\": 1,\n            \"pointSize\": 5,\n            \"scaleDistribution\": {\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"normal\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          }\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 6,\n        \"x\": 0,\n        \"y\": 8\n      },\n      \"id\": 18,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"cpu\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"usage_iowait\\\" or r[\\\"_field\\\"] == \\\"usage_irq\\\" or r[\\\"_field\\\"] == \\\"usage_steal\\\" or r[\\\"_field\\\"] == \\\"usage_user\\\" or r[\\\"_field\\\"] == \\\"usage_system\\\"  or r[\\\"_field\\\"] == \\\"usage_softirq\\\" or r[\\\"_field\\\"] == \\\"usage_nice\\\" or r[\\\"_field\\\"] == \\\"usage_guest_nice\\\" or r[\\\"_field\\\"] == \\\"usage_guest\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> filter(fn: (r) => r[\\\"cpu\\\"] == \\\"cpu-total\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |> yield(name: \\\"mean\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"CPU*\",\n      \"type\": \"timeseries\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"description\": \"\",\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisCenteredZero\": false,\n            \"axisColorMode\": \"text\",\n            \"axisGridShow\": false,\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": 0,\n            \"drawStyle\": \"line\",\n            \"fillOpacity\": 50,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"linear\",\n            \"lineWidth\": 1,\n            \"pointSize\": 5,\n            \"scaleDistribution\": {\n              \"linearThreshold\": 1,\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"none\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"min\": 0,\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          },\n          \"unit\": \"Bps\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 6,\n        \"x\": 6,\n        \"y\": 8\n      },\n      \"id\": 6,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"diskio\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"read_bytes\\\" or r[\\\"_field\\\"] == \\\"write_bytes\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> filter(fn: (r) => r[\\\"name\\\"] == \\\"vdc\\\")\\r\\n  |> derivative(unit: 1s, nonNegative: false)\\r\\n  |> yield(name: \\\"derivative\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"Disk IO\",\n      \"type\": \"timeseries\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisCenteredZero\": false,\n            \"axisColorMode\": \"text\",\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": 0,\n            \"drawStyle\": \"line\",\n            \"fillOpacity\": 21,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"linear\",\n            \"lineWidth\": 1,\n            \"pointSize\": 5,\n            \"scaleDistribution\": {\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"none\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"min\": 0,\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          },\n          \"unit\": \"bytes\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 12,\n        \"y\": 8\n      },\n      \"id\": 14,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart)\\r\\n  |> filter(fn: (r) => r._measurement == \\\"net\\\")\\r\\n  |> filter(fn: (r) => r._field == \\\"bytes_recv\\\" or r._field == \\\"bytes_sent\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)\\r\\n  |> derivative(unit: 1s, nonNegative: false)\\r\\n  |> yield(name: \\\"derivative\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"IPv4 Traffic\",\n      \"type\": \"timeseries\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisCenteredZero\": false,\n            \"axisColorMode\": \"text\",\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": 0,\n            \"drawStyle\": \"line\",\n            \"fillOpacity\": 50,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"linear\",\n            \"lineWidth\": 1,\n            \"pointSize\": 5,\n            \"scaleDistribution\": {\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"none\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          },\n          \"unit\": \"decbytes\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 0,\n        \"y\": 16\n      },\n      \"id\": 23,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"mem\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"cached\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |> yield(name: \\\"mean\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"Memory Cached\",\n      \"type\": \"timeseries\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisCenteredZero\": false,\n            \"axisColorMode\": \"text\",\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": -1,\n            \"drawStyle\": \"bars\",\n            \"fillOpacity\": 86,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"smooth\",\n            \"lineStyle\": {\n              \"fill\": \"solid\"\n            },\n            \"lineWidth\": 0,\n            \"pointSize\": 4,\n            \"scaleDistribution\": {\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"none\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"min\": 0,\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          },\n          \"unit\": \"percentunit\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 12,\n        \"y\": 16\n      },\n      \"id\": 25,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"diskio\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"read_bytes\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> filter(fn: (r) => r[\\\"name\\\"] == \\\"vdc\\\")\\r\\n  |> derivative(unit: 10s, nonNegative: false)\\r\\n  |> yield(name: \\\"derivative\\\")\",\n          \"refId\": \"A\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"hide\": false,\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"net\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"bytes_sent\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> filter(fn: (r) => r[\\\"interface\\\"] == \\\"eth0\\\")\\r\\n  |> derivative(unit: 10s, nonNegative: false)\\r\\n  |> yield(name: \\\"derivative\\\")\",\n          \"refId\": \"B\"\n        }\n      ],\n      \"title\": \"Cache Hit Rate\",\n      \"transformations\": [\n        {\n          \"id\": \"calculateField\",\n          \"options\": {\n            \"alias\": \"REC\",\n            \"binary\": {\n              \"left\": \"bytes_sent {host=\\\"i-30g60b69\\\", interface=\\\"eth0\\\", name=\\\"net\\\"}\",\n              \"operator\": \"-\",\n              \"reducer\": \"sum\",\n              \"right\": \"read_bytes {host=\\\"i-30g60b69\\\", name=\\\"diskio\\\"}\"\n            },\n            \"mode\": \"binary\",\n            \"reduce\": {\n              \"reducer\": \"sum\"\n            },\n            \"replaceFields\": false\n          }\n        },\n        {\n          \"id\": \"calculateField\",\n          \"options\": {\n            \"alias\": \"Cache Hit Rate\",\n            \"binary\": {\n              \"left\": \"REC\",\n              \"operator\": \"/\",\n              \"reducer\": \"sum\",\n              \"right\": \"bytes_sent {host=\\\"i-30g60b69\\\", interface=\\\"eth0\\\", name=\\\"net\\\"}\"\n            },\n            \"mode\": \"binary\",\n            \"reduce\": {\n              \"reducer\": \"sum\"\n            },\n            \"replaceFields\": true\n          }\n        }\n      ],\n      \"type\": \"timeseries\"\n    }\n  ],\n  \"refresh\": \"5s\",\n  \"schemaVersion\": 37,\n  \"style\": \"dark\",\n  \"tags\": [],\n  \"templating\": {\n    \"list\": []\n  },\n  \"time\": {\n    \"from\": \"now-6h\",\n    \"to\": \"now\"\n  },\n  \"timepicker\": {},\n  \"timezone\": \"\",\n  \"title\": \"QLU_Mirrors\",\n  \"uid\": \"z38bN0O4z\",\n  \"version\": 15,\n  \"weekStart\": \"\"\n}\n```","source":"_posts/Graf.md","raw":"---\ntitle: QLUT镜像站的日志监控及预警方案\ncover: https://s2.loli.net/2022/12/24/FI1YkGehQyVKs9T.jpg\ntags: Devops\ndate: 2022/12/07 1:27:20\n---\n\n十分意外镜像站用户增长速度如此之快，面对日均五万左右的用户量，服务器频繁出现各种性能问题。在故障排查的过程中，我意识到服务器需要一套成熟、完整、可靠的日志监控及预警方案。\n\n先前长期使用 `goaccess` 静态分析Nginx的日志，具有滞后性。只能用于单纯的分析总结一段时间内的网站流量状况，而无法做到实时监看服务状态和运行数据。\n\n既然是开源镜像站，那么我们就需要把目光投向开源社区。\n\n## 较为流行的ELK\n\n目前市面上最流行的日志处理方案莫过于“ELK”系统，“ELK”是Elasticsearch、Logstash和Kibana的组合的合称。\n\nElasticsearch 是一个搜索和分析引擎。Logstash 是服务器端数据处理管道，能够同时从多个来源采集数据，转换数据，然后将数据发送到诸如 Elasticsearch 等“存储库”中。Kibana 则可以让用户在 Elasticsearch 中使用图形和图表对数据进行可视化。\n\n## InfluxDB&Telegraf\n\n通过自己的初步了解以及咨询使用者的使用体验，我认为ELK在使用体验和性能上都不适合我（其实是单纯的不喜欢Java）。而一个朋友推荐我去尝试一下 InfluxDB+Telegraf 的组合。\n\n服务器的性能日志从本质上来说，属于**时序大数据**，我们打开数据库排名网站[DB-Engines Ranking](https://db-engines.com/en/ranking)，左侧选择时序数据库([Time Series DBMS](https://db-engines.com/en/ranking/time+series+dbms))，可以看到 InfluxDB 在排名上一骑绝尘。\n\n![image.png](https://s2.loli.net/2022/12/24/e8RbQm7i2Jj1Kzk.png)\n\n安装直接跟着官方文档即可，下面我将英文文档翻译一下给大家参考：\n\n#### 使用 systemd 将 InfluxDB 安装为服务\n\n1. 使用以下命令从[InfluxData 下载页面](https://portal.influxdata.com/downloads/)使用 URL 下载并安装适当的`.deb`或文件：`.rpm`\n\n   ```sh\n   # Ubuntu/Debian\n   wget https://dl.influxdata.com/influxdb/releases/influxdb2-2.6.0-xxx.deb\n   sudo dpkg -i influxdb2-2.6.0-xxx.deb\n   \n   # Red Hat/CentOS/Fedora\n   wget https://dl.influxdata.com/influxdb/releases/influxdb2-2.6.0-xxx.rpm\n   sudo yum localinstall influxdb2-2.6.0-xxx.rpm\n   ```\n\n   *使用`.rpm`包下载的确切文件名（例如，`influxdb2-2.6.0-amd64.rpm`）。*\n\n2. 启动 InfluxDB 服务：\n\n   ```sh\n   sudo service influxdb start\n   ```\n\n   安装 InfluxDB 包会创建一个服务文件，`/lib/systemd/system/influxdb.service` 用于在启动时将 InfluxDB 作为后台服务启动。\n\n3. 重新启动系统并验证服务是否正常运行：\n\n   ```shell\n   $  sudo service influxdb status\n   ● influxdb.service - InfluxDB is an open-source, distributed, time series database\n     Loaded: loaded (/lib/systemd/system/influxdb.service; enabled; vendor preset: enable>\n     Active: active (running)\n   ```\n\n有关 InfluxDB 在作为服务运行时在磁盘上存储数据的位置的信息，请参阅[文件系统布局](https://docs.influxdata.com/influxdb/v2.6/reference/internals/file-system-layout/?t=Linux#installed-as-a-package)。\n\n要自定义 InfluxDB 配置，请使用 [命令行标志（参数）](https://docs.influxdata.com/influxdb/v2.6/install/?t=Linux#pass-arguments-to-systemd)、环境变量或 InfluxDB 配置文件。有关详细信息，请参阅 InfluxDB[配置选项](https://docs.influxdata.com/influxdb/v2.6/reference/config-options/)。\n\n#### 将参数传递给 systemd\n\n1. 添加一行或多行命令，如下所示，包含`influxd`to的参数`/etc/default/influxdb2`：\n\n   ```sh\n   ARG1=\"--http-bind-address :8087\"\n   ARG2=\"<another argument here>\"\n   ```\n\n2. 编辑`/lib/systemd/system/influxdb.service`文件如下：\n\n   ```sh\n   ExecStart=/usr/bin/influxd $ARG1 $ARG2\n   ```\n\n#### 启动 InfluxDB\n\n如果 InfluxDB 作为 systemd 服务安装，则 systemd 管理`influxd`守护进程，不需要进一步的操作。如果二进制文件是手动下载并添加到系统中的，请使用以下命令`$PATH`启动守护进程：\n\n```shell\ninfluxd\n```\n\n进入8086端口配置好后，就可以在DashBoard里查阅可视化数据了。\n\n![image.png](https://s2.loli.net/2022/12/24/2ybGTCxF6znZQJA.png)\n\n## Grafana\n\nInfluxDB毕竟是一个数据库，在可视化方便并不擅长。因此我在另外一台机器上调用InfluxDB的数据源制作可视化面板。\n\n![image.png](https://s2.loli.net/2022/12/26/Jeig5pqMROmwAbE.png)\n\n面板主要包含了Nginx启动状态、内存利用、储存利用、CPU、DiskIO、网络状态和缓存命中率等。\n\n下面是面板的JSON以供参考\n\n```JSON\n{\n  \"annotations\": {\n    \"list\": [\n      {\n        \"builtIn\": 1,\n        \"datasource\": {\n          \"type\": \"grafana\",\n          \"uid\": \"-- Grafana --\"\n        },\n        \"enable\": true,\n        \"hide\": true,\n        \"iconColor\": \"rgba(0, 211, 255, 1)\",\n        \"name\": \"Annotations & Alerts\",\n        \"target\": {\n          \"limit\": 100,\n          \"matchAny\": false,\n          \"tags\": [],\n          \"type\": \"dashboard\"\n        },\n        \"type\": \"dashboard\"\n      }\n    ]\n  },\n  \"editable\": true,\n  \"fiscalYearStartMonth\": 0,\n  \"graphTooltip\": 0,\n  \"id\": 1,\n  \"links\": [],\n  \"liveNow\": false,\n  \"panels\": [\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"thresholds\"\n          },\n          \"mappings\": [\n            {\n              \"options\": {\n                \"0\": {\n                  \"index\": 0,\n                  \"text\": \"DOWN\"\n                }\n              },\n              \"type\": \"value\"\n            },\n            {\n              \"options\": {\n                \"from\": 1,\n                \"result\": {\n                  \"index\": 1,\n                  \"text\": \"UP\"\n                },\n                \"to\": 9999999\n              },\n              \"type\": \"range\"\n            }\n          ],\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          }\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 3,\n        \"x\": 0,\n        \"y\": 0\n      },\n      \"id\": 21,\n      \"options\": {\n        \"colorMode\": \"value\",\n        \"graphMode\": \"area\",\n        \"justifyMode\": \"auto\",\n        \"orientation\": \"auto\",\n        \"reduceOptions\": {\n          \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\": \"\",\n          \"values\": false\n        },\n        \"textMode\": \"auto\"\n      },\n      \"pluginVersion\": \"9.2.4\",\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"nginx\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"active\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |> yield(name: \\\"mean\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"Nginx UP/DOWN\",\n      \"type\": \"stat\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            }\n          },\n          \"mappings\": [],\n          \"min\": 0,\n          \"unit\": \"decbytes\"\n        },\n        \"overrides\": [\n          {\n            \"matcher\": {\n              \"id\": \"byName\",\n              \"options\": \"cached i-30g60b69\"\n            },\n            \"properties\": [\n              {\n                \"id\": \"color\",\n                \"value\": {\n                  \"fixedColor\": \"light-blue\",\n                  \"mode\": \"fixed\"\n                }\n              }\n            ]\n          },\n          {\n            \"matcher\": {\n              \"id\": \"byName\",\n              \"options\": \"free i-30g60b69\"\n            },\n            \"properties\": [\n              {\n                \"id\": \"color\",\n                \"value\": {\n                  \"fixedColor\": \"light-green\",\n                  \"mode\": \"fixed\"\n                }\n              }\n            ]\n          },\n          {\n            \"matcher\": {\n              \"id\": \"byName\",\n              \"options\": \"used i-30g60b69\"\n            },\n            \"properties\": [\n              {\n                \"id\": \"color\",\n                \"value\": {\n                  \"fixedColor\": \"red\",\n                  \"mode\": \"fixed\"\n                }\n              }\n            ]\n          },\n          {\n            \"matcher\": {\n              \"id\": \"byName\",\n              \"options\": \"buffered i-30g60b69\"\n            },\n            \"properties\": [\n              {\n                \"id\": \"color\",\n                \"value\": {\n                  \"fixedColor\": \"yellow\",\n                  \"mode\": \"fixed\"\n                }\n              }\n            ]\n          }\n        ]\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 6,\n        \"x\": 3,\n        \"y\": 0\n      },\n      \"id\": 10,\n      \"options\": {\n        \"displayLabels\": [\n          \"value\"\n        ],\n        \"legend\": {\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true,\n          \"values\": [\n            \"value\"\n          ]\n        },\n        \"pieType\": \"donut\",\n        \"reduceOptions\": {\n          \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\": \"\",\n          \"values\": false\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"desc\"\n        }\n      },\n      \"pluginVersion\": \"9.2.4\",\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart)\\r\\n  |> filter(fn: (r) => r._measurement == \\\"mem\\\")\\r\\n  |> filter(fn: (r) => r._field == \\\"used\\\" or r._field == \\\"cached\\\" or r._field == \\\"free\\\" or r._field == \\\"buffered\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |> yield(name: \\\"mean\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"Memory Usage\",\n      \"transformations\": [],\n      \"type\": \"piechart\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"thresholds\"\n          },\n          \"mappings\": [],\n          \"max\": 100,\n          \"min\": 0,\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          },\n          \"unit\": \"percent\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 3,\n        \"x\": 9,\n        \"y\": 0\n      },\n      \"id\": 12,\n      \"options\": {\n        \"orientation\": \"auto\",\n        \"reduceOptions\": {\n          \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\": \"\",\n          \"values\": false\n        },\n        \"showThresholdLabels\": false,\n        \"showThresholdMarkers\": true\n      },\n      \"pluginVersion\": \"9.2.4\",\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"disk\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"used_percent\\\")\\r\\n  |> filter(fn: (r) => r[\\\"device\\\"] == \\\"vdc\\\")\\r\\n  |> filter(fn: (r) => r[\\\"fstype\\\"] == \\\"ext4\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> filter(fn: (r) => r[\\\"mode\\\"] == \\\"rw\\\")\\r\\n  |> filter(fn: (r) => r[\\\"path\\\"] == \\\"/mnt/vos-6izqwyw8\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |> yield(name: \\\"mean\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"Disk Usage\",\n      \"type\": \"gauge\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisCenteredZero\": false,\n            \"axisColorMode\": \"text\",\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": 0,\n            \"drawStyle\": \"line\",\n            \"fillOpacity\": 31,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"linear\",\n            \"lineWidth\": 1,\n            \"pointSize\": 5,\n            \"scaleDistribution\": {\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"normal\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          }\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 12,\n        \"y\": 0\n      },\n      \"id\": 19,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"nginx\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"waiting\\\" or r[\\\"_field\\\"] == \\\"writing\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |> yield(name: \\\"mean\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"TCP Socket\",\n      \"type\": \"timeseries\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisCenteredZero\": false,\n            \"axisColorMode\": \"text\",\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": 0,\n            \"drawStyle\": \"line\",\n            \"fillOpacity\": 79,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"linear\",\n            \"lineStyle\": {\n              \"fill\": \"solid\"\n            },\n            \"lineWidth\": 1,\n            \"pointSize\": 5,\n            \"scaleDistribution\": {\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"normal\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          }\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 6,\n        \"x\": 0,\n        \"y\": 8\n      },\n      \"id\": 18,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"cpu\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"usage_iowait\\\" or r[\\\"_field\\\"] == \\\"usage_irq\\\" or r[\\\"_field\\\"] == \\\"usage_steal\\\" or r[\\\"_field\\\"] == \\\"usage_user\\\" or r[\\\"_field\\\"] == \\\"usage_system\\\"  or r[\\\"_field\\\"] == \\\"usage_softirq\\\" or r[\\\"_field\\\"] == \\\"usage_nice\\\" or r[\\\"_field\\\"] == \\\"usage_guest_nice\\\" or r[\\\"_field\\\"] == \\\"usage_guest\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> filter(fn: (r) => r[\\\"cpu\\\"] == \\\"cpu-total\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |> yield(name: \\\"mean\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"CPU*\",\n      \"type\": \"timeseries\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"description\": \"\",\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisCenteredZero\": false,\n            \"axisColorMode\": \"text\",\n            \"axisGridShow\": false,\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": 0,\n            \"drawStyle\": \"line\",\n            \"fillOpacity\": 50,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"linear\",\n            \"lineWidth\": 1,\n            \"pointSize\": 5,\n            \"scaleDistribution\": {\n              \"linearThreshold\": 1,\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"none\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"min\": 0,\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          },\n          \"unit\": \"Bps\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 6,\n        \"x\": 6,\n        \"y\": 8\n      },\n      \"id\": 6,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"diskio\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"read_bytes\\\" or r[\\\"_field\\\"] == \\\"write_bytes\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> filter(fn: (r) => r[\\\"name\\\"] == \\\"vdc\\\")\\r\\n  |> derivative(unit: 1s, nonNegative: false)\\r\\n  |> yield(name: \\\"derivative\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"Disk IO\",\n      \"type\": \"timeseries\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisCenteredZero\": false,\n            \"axisColorMode\": \"text\",\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": 0,\n            \"drawStyle\": \"line\",\n            \"fillOpacity\": 21,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"linear\",\n            \"lineWidth\": 1,\n            \"pointSize\": 5,\n            \"scaleDistribution\": {\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"none\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"min\": 0,\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          },\n          \"unit\": \"bytes\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 12,\n        \"y\": 8\n      },\n      \"id\": 14,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart)\\r\\n  |> filter(fn: (r) => r._measurement == \\\"net\\\")\\r\\n  |> filter(fn: (r) => r._field == \\\"bytes_recv\\\" or r._field == \\\"bytes_sent\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)\\r\\n  |> derivative(unit: 1s, nonNegative: false)\\r\\n  |> yield(name: \\\"derivative\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"IPv4 Traffic\",\n      \"type\": \"timeseries\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisCenteredZero\": false,\n            \"axisColorMode\": \"text\",\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": 0,\n            \"drawStyle\": \"line\",\n            \"fillOpacity\": 50,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"linear\",\n            \"lineWidth\": 1,\n            \"pointSize\": 5,\n            \"scaleDistribution\": {\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"none\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          },\n          \"unit\": \"decbytes\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 0,\n        \"y\": 16\n      },\n      \"id\": 23,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"mem\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"cached\\\")\\r\\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |> yield(name: \\\"mean\\\")\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"Memory Cached\",\n      \"type\": \"timeseries\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"influxdb\",\n        \"uid\": \"8-KvbZO4k\"\n      },\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisCenteredZero\": false,\n            \"axisColorMode\": \"text\",\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": -1,\n            \"drawStyle\": \"bars\",\n            \"fillOpacity\": 86,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"smooth\",\n            \"lineStyle\": {\n              \"fill\": \"solid\"\n            },\n            \"lineWidth\": 0,\n            \"pointSize\": 4,\n            \"scaleDistribution\": {\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"none\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"min\": 0,\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          },\n          \"unit\": \"percentunit\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 12,\n        \"x\": 12,\n        \"y\": 16\n      },\n      \"id\": 25,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"list\",\n          \"placement\": \"bottom\",\n          \"showLegend\": true\n        },\n        \"tooltip\": {\n          \"mode\": \"single\",\n          \"sort\": \"none\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"diskio\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"read_bytes\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> filter(fn: (r) => r[\\\"name\\\"] == \\\"vdc\\\")\\r\\n  |> derivative(unit: 10s, nonNegative: false)\\r\\n  |> yield(name: \\\"derivative\\\")\",\n          \"refId\": \"A\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"influxdb\",\n            \"uid\": \"8-KvbZO4k\"\n          },\n          \"hide\": false,\n          \"query\": \"from(bucket: \\\"qlu\\\")\\r\\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |> filter(fn: (r) => r[\\\"_measurement\\\"] == \\\"net\\\")\\r\\n  |> filter(fn: (r) => r[\\\"_field\\\"] == \\\"bytes_sent\\\")\\r\\n  |> filter(fn: (r) => r[\\\"host\\\"] == \\\"i-30g60b69\\\")\\r\\n  |> filter(fn: (r) => r[\\\"interface\\\"] == \\\"eth0\\\")\\r\\n  |> derivative(unit: 10s, nonNegative: false)\\r\\n  |> yield(name: \\\"derivative\\\")\",\n          \"refId\": \"B\"\n        }\n      ],\n      \"title\": \"Cache Hit Rate\",\n      \"transformations\": [\n        {\n          \"id\": \"calculateField\",\n          \"options\": {\n            \"alias\": \"REC\",\n            \"binary\": {\n              \"left\": \"bytes_sent {host=\\\"i-30g60b69\\\", interface=\\\"eth0\\\", name=\\\"net\\\"}\",\n              \"operator\": \"-\",\n              \"reducer\": \"sum\",\n              \"right\": \"read_bytes {host=\\\"i-30g60b69\\\", name=\\\"diskio\\\"}\"\n            },\n            \"mode\": \"binary\",\n            \"reduce\": {\n              \"reducer\": \"sum\"\n            },\n            \"replaceFields\": false\n          }\n        },\n        {\n          \"id\": \"calculateField\",\n          \"options\": {\n            \"alias\": \"Cache Hit Rate\",\n            \"binary\": {\n              \"left\": \"REC\",\n              \"operator\": \"/\",\n              \"reducer\": \"sum\",\n              \"right\": \"bytes_sent {host=\\\"i-30g60b69\\\", interface=\\\"eth0\\\", name=\\\"net\\\"}\"\n            },\n            \"mode\": \"binary\",\n            \"reduce\": {\n              \"reducer\": \"sum\"\n            },\n            \"replaceFields\": true\n          }\n        }\n      ],\n      \"type\": \"timeseries\"\n    }\n  ],\n  \"refresh\": \"5s\",\n  \"schemaVersion\": 37,\n  \"style\": \"dark\",\n  \"tags\": [],\n  \"templating\": {\n    \"list\": []\n  },\n  \"time\": {\n    \"from\": \"now-6h\",\n    \"to\": \"now\"\n  },\n  \"timepicker\": {},\n  \"timezone\": \"\",\n  \"title\": \"QLU_Mirrors\",\n  \"uid\": \"z38bN0O4z\",\n  \"version\": 15,\n  \"weekStart\": \"\"\n}\n```","slug":"Graf","published":1,"updated":"2022-12-31T10:07:01.722Z","_id":"clc23xw6l0000a4g7bvqr1fwh","comments":1,"layout":"post","photos":[],"link":"","content":"<p>十分意外镜像站用户增长速度如此之快，面对日均五万左右的用户量，服务器频繁出现各种性能问题。在故障排查的过程中，我意识到服务器需要一套成熟、完整、可靠的日志监控及预警方案。</p>\n<p>先前长期使用 <code>goaccess</code> 静态分析Nginx的日志，具有滞后性。只能用于单纯的分析总结一段时间内的网站流量状况，而无法做到实时监看服务状态和运行数据。</p>\n<p>既然是开源镜像站，那么我们就需要把目光投向开源社区。</p>\n<h2 id=\"较为流行的ELK\"><a href=\"#较为流行的ELK\" class=\"headerlink\" title=\"较为流行的ELK\"></a>较为流行的ELK</h2><p>目前市面上最流行的日志处理方案莫过于“ELK”系统，“ELK”是Elasticsearch、Logstash和Kibana的组合的合称。</p>\n<p>Elasticsearch 是一个搜索和分析引擎。Logstash 是服务器端数据处理管道，能够同时从多个来源采集数据，转换数据，然后将数据发送到诸如 Elasticsearch 等“存储库”中。Kibana 则可以让用户在 Elasticsearch 中使用图形和图表对数据进行可视化。</p>\n<h2 id=\"InfluxDB-amp-Telegraf\"><a href=\"#InfluxDB-amp-Telegraf\" class=\"headerlink\" title=\"InfluxDB&amp;Telegraf\"></a>InfluxDB&amp;Telegraf</h2><p>通过自己的初步了解以及咨询使用者的使用体验，我认为ELK在使用体验和性能上都不适合我（其实是单纯的不喜欢Java）。而一个朋友推荐我去尝试一下 InfluxDB+Telegraf 的组合。</p>\n<p>服务器的性能日志从本质上来说，属于<strong>时序大数据</strong>，我们打开数据库排名网站<a href=\"https://db-engines.com/en/ranking\">DB-Engines Ranking</a>，左侧选择时序数据库(<a href=\"https://db-engines.com/en/ranking/time+series+dbms\">Time Series DBMS</a>)，可以看到 InfluxDB 在排名上一骑绝尘。</p>\n<p><img src=\"https://s2.loli.net/2022/12/24/e8RbQm7i2Jj1Kzk.png\" alt=\"image.png\"></p>\n<p>安装直接跟着官方文档即可，下面我将英文文档翻译一下给大家参考：</p>\n<h4 id=\"使用-systemd-将-InfluxDB-安装为服务\"><a href=\"#使用-systemd-将-InfluxDB-安装为服务\" class=\"headerlink\" title=\"使用 systemd 将 InfluxDB 安装为服务\"></a>使用 systemd 将 InfluxDB 安装为服务</h4><ol>\n<li><p>使用以下命令从<a href=\"https://portal.influxdata.com/downloads/\">InfluxData 下载页面</a>使用 URL 下载并安装适当的<code>.deb</code>或文件：<code>.rpm</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Ubuntu/Debian</span></span><br><span class=\"line\">wget https://dl.influxdata.com/influxdb/releases/influxdb2-2.6.0-xxx.deb</span><br><span class=\"line\">sudo dpkg -i influxdb2-2.6.0-xxx.deb</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Red Hat/CentOS/Fedora</span></span><br><span class=\"line\">wget https://dl.influxdata.com/influxdb/releases/influxdb2-2.6.0-xxx.rpm</span><br><span class=\"line\">sudo yum localinstall influxdb2-2.6.0-xxx.rpm</span><br></pre></td></tr></table></figure>\n\n<p><em>使用<code>.rpm</code>包下载的确切文件名（例如，<code>influxdb2-2.6.0-amd64.rpm</code>）。</em></p>\n</li>\n<li><p>启动 InfluxDB 服务：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service influxdb start</span><br></pre></td></tr></table></figure>\n\n<p>安装 InfluxDB 包会创建一个服务文件，<code>/lib/systemd/system/influxdb.service</code> 用于在启动时将 InfluxDB 作为后台服务启动。</p>\n</li>\n<li><p>重新启动系统并验证服务是否正常运行：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\"> sudo service influxdb status</span></span><br><span class=\"line\">● influxdb.service - InfluxDB is an open-source, distributed, time series database</span><br><span class=\"line\">  Loaded: loaded (/lib/systemd/system/influxdb.service; enabled; vendor preset: enable&gt;</span><br><span class=\"line\">  Active: active (running)</span><br></pre></td></tr></table></figure></li>\n</ol>\n<p>有关 InfluxDB 在作为服务运行时在磁盘上存储数据的位置的信息，请参阅<a href=\"https://docs.influxdata.com/influxdb/v2.6/reference/internals/file-system-layout/?t=Linux#installed-as-a-package\">文件系统布局</a>。</p>\n<p>要自定义 InfluxDB 配置，请使用 <a href=\"https://docs.influxdata.com/influxdb/v2.6/install/?t=Linux#pass-arguments-to-systemd\">命令行标志（参数）</a>、环境变量或 InfluxDB 配置文件。有关详细信息，请参阅 InfluxDB<a href=\"https://docs.influxdata.com/influxdb/v2.6/reference/config-options/\">配置选项</a>。</p>\n<h4 id=\"将参数传递给-systemd\"><a href=\"#将参数传递给-systemd\" class=\"headerlink\" title=\"将参数传递给 systemd\"></a>将参数传递给 systemd</h4><ol>\n<li><p>添加一行或多行命令，如下所示，包含<code>influxd</code>to的参数<code>/etc/default/influxdb2</code>：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ARG1=<span class=\"string\">&quot;--http-bind-address :8087&quot;</span></span><br><span class=\"line\">ARG2=<span class=\"string\">&quot;&lt;another argument here&gt;&quot;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>编辑<code>/lib/systemd/system/influxdb.service</code>文件如下：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ExecStart=/usr/bin/influxd <span class=\"variable\">$ARG1</span> <span class=\"variable\">$ARG2</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"启动-InfluxDB\"><a href=\"#启动-InfluxDB\" class=\"headerlink\" title=\"启动 InfluxDB\"></a>启动 InfluxDB</h4><p>如果 InfluxDB 作为 systemd 服务安装，则 systemd 管理<code>influxd</code>守护进程，不需要进一步的操作。如果二进制文件是手动下载并添加到系统中的，请使用以下命令<code>$PATH</code>启动守护进程：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">influxd</span><br></pre></td></tr></table></figure>\n\n<p>进入8086端口配置好后，就可以在DashBoard里查阅可视化数据了。</p>\n<p><img src=\"https://s2.loli.net/2022/12/24/2ybGTCxF6znZQJA.png\" alt=\"image.png\"></p>\n<h2 id=\"Grafana\"><a href=\"#Grafana\" class=\"headerlink\" title=\"Grafana\"></a>Grafana</h2><p>InfluxDB毕竟是一个数据库，在可视化方便并不擅长。因此我在另外一台机器上调用InfluxDB的数据源制作可视化面板。</p>\n<p><img src=\"https://s2.loli.net/2022/12/26/Jeig5pqMROmwAbE.png\" alt=\"image.png\"></p>\n<p>面板主要包含了Nginx启动状态、内存利用、储存利用、CPU、DiskIO、网络状态和缓存命中率等。</p>\n<p>下面是面板的JSON以供参考</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br><span class=\"line\">548</span><br><span class=\"line\">549</span><br><span class=\"line\">550</span><br><span class=\"line\">551</span><br><span class=\"line\">552</span><br><span class=\"line\">553</span><br><span class=\"line\">554</span><br><span class=\"line\">555</span><br><span class=\"line\">556</span><br><span class=\"line\">557</span><br><span class=\"line\">558</span><br><span class=\"line\">559</span><br><span class=\"line\">560</span><br><span class=\"line\">561</span><br><span class=\"line\">562</span><br><span class=\"line\">563</span><br><span class=\"line\">564</span><br><span class=\"line\">565</span><br><span class=\"line\">566</span><br><span class=\"line\">567</span><br><span class=\"line\">568</span><br><span class=\"line\">569</span><br><span class=\"line\">570</span><br><span class=\"line\">571</span><br><span class=\"line\">572</span><br><span class=\"line\">573</span><br><span class=\"line\">574</span><br><span class=\"line\">575</span><br><span class=\"line\">576</span><br><span class=\"line\">577</span><br><span class=\"line\">578</span><br><span class=\"line\">579</span><br><span class=\"line\">580</span><br><span class=\"line\">581</span><br><span class=\"line\">582</span><br><span class=\"line\">583</span><br><span class=\"line\">584</span><br><span class=\"line\">585</span><br><span class=\"line\">586</span><br><span class=\"line\">587</span><br><span class=\"line\">588</span><br><span class=\"line\">589</span><br><span class=\"line\">590</span><br><span class=\"line\">591</span><br><span class=\"line\">592</span><br><span class=\"line\">593</span><br><span class=\"line\">594</span><br><span class=\"line\">595</span><br><span class=\"line\">596</span><br><span class=\"line\">597</span><br><span class=\"line\">598</span><br><span class=\"line\">599</span><br><span class=\"line\">600</span><br><span class=\"line\">601</span><br><span class=\"line\">602</span><br><span class=\"line\">603</span><br><span class=\"line\">604</span><br><span class=\"line\">605</span><br><span class=\"line\">606</span><br><span class=\"line\">607</span><br><span class=\"line\">608</span><br><span class=\"line\">609</span><br><span class=\"line\">610</span><br><span class=\"line\">611</span><br><span class=\"line\">612</span><br><span class=\"line\">613</span><br><span class=\"line\">614</span><br><span class=\"line\">615</span><br><span class=\"line\">616</span><br><span class=\"line\">617</span><br><span class=\"line\">618</span><br><span class=\"line\">619</span><br><span class=\"line\">620</span><br><span class=\"line\">621</span><br><span class=\"line\">622</span><br><span class=\"line\">623</span><br><span class=\"line\">624</span><br><span class=\"line\">625</span><br><span class=\"line\">626</span><br><span class=\"line\">627</span><br><span class=\"line\">628</span><br><span class=\"line\">629</span><br><span class=\"line\">630</span><br><span class=\"line\">631</span><br><span class=\"line\">632</span><br><span class=\"line\">633</span><br><span class=\"line\">634</span><br><span class=\"line\">635</span><br><span class=\"line\">636</span><br><span class=\"line\">637</span><br><span class=\"line\">638</span><br><span class=\"line\">639</span><br><span class=\"line\">640</span><br><span class=\"line\">641</span><br><span class=\"line\">642</span><br><span class=\"line\">643</span><br><span class=\"line\">644</span><br><span class=\"line\">645</span><br><span class=\"line\">646</span><br><span class=\"line\">647</span><br><span class=\"line\">648</span><br><span class=\"line\">649</span><br><span class=\"line\">650</span><br><span class=\"line\">651</span><br><span class=\"line\">652</span><br><span class=\"line\">653</span><br><span class=\"line\">654</span><br><span class=\"line\">655</span><br><span class=\"line\">656</span><br><span class=\"line\">657</span><br><span class=\"line\">658</span><br><span class=\"line\">659</span><br><span class=\"line\">660</span><br><span class=\"line\">661</span><br><span class=\"line\">662</span><br><span class=\"line\">663</span><br><span class=\"line\">664</span><br><span class=\"line\">665</span><br><span class=\"line\">666</span><br><span class=\"line\">667</span><br><span class=\"line\">668</span><br><span class=\"line\">669</span><br><span class=\"line\">670</span><br><span class=\"line\">671</span><br><span class=\"line\">672</span><br><span class=\"line\">673</span><br><span class=\"line\">674</span><br><span class=\"line\">675</span><br><span class=\"line\">676</span><br><span class=\"line\">677</span><br><span class=\"line\">678</span><br><span class=\"line\">679</span><br><span class=\"line\">680</span><br><span class=\"line\">681</span><br><span class=\"line\">682</span><br><span class=\"line\">683</span><br><span class=\"line\">684</span><br><span class=\"line\">685</span><br><span class=\"line\">686</span><br><span class=\"line\">687</span><br><span class=\"line\">688</span><br><span class=\"line\">689</span><br><span class=\"line\">690</span><br><span class=\"line\">691</span><br><span class=\"line\">692</span><br><span class=\"line\">693</span><br><span class=\"line\">694</span><br><span class=\"line\">695</span><br><span class=\"line\">696</span><br><span class=\"line\">697</span><br><span class=\"line\">698</span><br><span class=\"line\">699</span><br><span class=\"line\">700</span><br><span class=\"line\">701</span><br><span class=\"line\">702</span><br><span class=\"line\">703</span><br><span class=\"line\">704</span><br><span class=\"line\">705</span><br><span class=\"line\">706</span><br><span class=\"line\">707</span><br><span class=\"line\">708</span><br><span class=\"line\">709</span><br><span class=\"line\">710</span><br><span class=\"line\">711</span><br><span class=\"line\">712</span><br><span class=\"line\">713</span><br><span class=\"line\">714</span><br><span class=\"line\">715</span><br><span class=\"line\">716</span><br><span class=\"line\">717</span><br><span class=\"line\">718</span><br><span class=\"line\">719</span><br><span class=\"line\">720</span><br><span class=\"line\">721</span><br><span class=\"line\">722</span><br><span class=\"line\">723</span><br><span class=\"line\">724</span><br><span class=\"line\">725</span><br><span class=\"line\">726</span><br><span class=\"line\">727</span><br><span class=\"line\">728</span><br><span class=\"line\">729</span><br><span class=\"line\">730</span><br><span class=\"line\">731</span><br><span class=\"line\">732</span><br><span class=\"line\">733</span><br><span class=\"line\">734</span><br><span class=\"line\">735</span><br><span class=\"line\">736</span><br><span class=\"line\">737</span><br><span class=\"line\">738</span><br><span class=\"line\">739</span><br><span class=\"line\">740</span><br><span class=\"line\">741</span><br><span class=\"line\">742</span><br><span class=\"line\">743</span><br><span class=\"line\">744</span><br><span class=\"line\">745</span><br><span class=\"line\">746</span><br><span class=\"line\">747</span><br><span class=\"line\">748</span><br><span class=\"line\">749</span><br><span class=\"line\">750</span><br><span class=\"line\">751</span><br><span class=\"line\">752</span><br><span class=\"line\">753</span><br><span class=\"line\">754</span><br><span class=\"line\">755</span><br><span class=\"line\">756</span><br><span class=\"line\">757</span><br><span class=\"line\">758</span><br><span class=\"line\">759</span><br><span class=\"line\">760</span><br><span class=\"line\">761</span><br><span class=\"line\">762</span><br><span class=\"line\">763</span><br><span class=\"line\">764</span><br><span class=\"line\">765</span><br><span class=\"line\">766</span><br><span class=\"line\">767</span><br><span class=\"line\">768</span><br><span class=\"line\">769</span><br><span class=\"line\">770</span><br><span class=\"line\">771</span><br><span class=\"line\">772</span><br><span class=\"line\">773</span><br><span class=\"line\">774</span><br><span class=\"line\">775</span><br><span class=\"line\">776</span><br><span class=\"line\">777</span><br><span class=\"line\">778</span><br><span class=\"line\">779</span><br><span class=\"line\">780</span><br><span class=\"line\">781</span><br><span class=\"line\">782</span><br><span class=\"line\">783</span><br><span class=\"line\">784</span><br><span class=\"line\">785</span><br><span class=\"line\">786</span><br><span class=\"line\">787</span><br><span class=\"line\">788</span><br><span class=\"line\">789</span><br><span class=\"line\">790</span><br><span class=\"line\">791</span><br><span class=\"line\">792</span><br><span class=\"line\">793</span><br><span class=\"line\">794</span><br><span class=\"line\">795</span><br><span class=\"line\">796</span><br><span class=\"line\">797</span><br><span class=\"line\">798</span><br><span class=\"line\">799</span><br><span class=\"line\">800</span><br><span class=\"line\">801</span><br><span class=\"line\">802</span><br><span class=\"line\">803</span><br><span class=\"line\">804</span><br><span class=\"line\">805</span><br><span class=\"line\">806</span><br><span class=\"line\">807</span><br><span class=\"line\">808</span><br><span class=\"line\">809</span><br><span class=\"line\">810</span><br><span class=\"line\">811</span><br><span class=\"line\">812</span><br><span class=\"line\">813</span><br><span class=\"line\">814</span><br><span class=\"line\">815</span><br><span class=\"line\">816</span><br><span class=\"line\">817</span><br><span class=\"line\">818</span><br><span class=\"line\">819</span><br><span class=\"line\">820</span><br><span class=\"line\">821</span><br><span class=\"line\">822</span><br><span class=\"line\">823</span><br><span class=\"line\">824</span><br><span class=\"line\">825</span><br><span class=\"line\">826</span><br><span class=\"line\">827</span><br><span class=\"line\">828</span><br><span class=\"line\">829</span><br><span class=\"line\">830</span><br><span class=\"line\">831</span><br><span class=\"line\">832</span><br><span class=\"line\">833</span><br><span class=\"line\">834</span><br><span class=\"line\">835</span><br><span class=\"line\">836</span><br><span class=\"line\">837</span><br><span class=\"line\">838</span><br><span class=\"line\">839</span><br><span class=\"line\">840</span><br><span class=\"line\">841</span><br><span class=\"line\">842</span><br><span class=\"line\">843</span><br><span class=\"line\">844</span><br><span class=\"line\">845</span><br><span class=\"line\">846</span><br><span class=\"line\">847</span><br><span class=\"line\">848</span><br><span class=\"line\">849</span><br><span class=\"line\">850</span><br><span class=\"line\">851</span><br><span class=\"line\">852</span><br><span class=\"line\">853</span><br><span class=\"line\">854</span><br><span class=\"line\">855</span><br><span class=\"line\">856</span><br><span class=\"line\">857</span><br><span class=\"line\">858</span><br><span class=\"line\">859</span><br><span class=\"line\">860</span><br><span class=\"line\">861</span><br><span class=\"line\">862</span><br><span class=\"line\">863</span><br><span class=\"line\">864</span><br><span class=\"line\">865</span><br><span class=\"line\">866</span><br><span class=\"line\">867</span><br><span class=\"line\">868</span><br><span class=\"line\">869</span><br><span class=\"line\">870</span><br><span class=\"line\">871</span><br><span class=\"line\">872</span><br><span class=\"line\">873</span><br><span class=\"line\">874</span><br><span class=\"line\">875</span><br><span class=\"line\">876</span><br><span class=\"line\">877</span><br><span class=\"line\">878</span><br><span class=\"line\">879</span><br><span class=\"line\">880</span><br><span class=\"line\">881</span><br><span class=\"line\">882</span><br><span class=\"line\">883</span><br><span class=\"line\">884</span><br><span class=\"line\">885</span><br><span class=\"line\">886</span><br><span class=\"line\">887</span><br><span class=\"line\">888</span><br><span class=\"line\">889</span><br><span class=\"line\">890</span><br><span class=\"line\">891</span><br><span class=\"line\">892</span><br><span class=\"line\">893</span><br><span class=\"line\">894</span><br><span class=\"line\">895</span><br><span class=\"line\">896</span><br><span class=\"line\">897</span><br><span class=\"line\">898</span><br><span class=\"line\">899</span><br><span class=\"line\">900</span><br><span class=\"line\">901</span><br><span class=\"line\">902</span><br><span class=\"line\">903</span><br><span class=\"line\">904</span><br><span class=\"line\">905</span><br><span class=\"line\">906</span><br><span class=\"line\">907</span><br><span class=\"line\">908</span><br><span class=\"line\">909</span><br><span class=\"line\">910</span><br><span class=\"line\">911</span><br><span class=\"line\">912</span><br><span class=\"line\">913</span><br><span class=\"line\">914</span><br><span class=\"line\">915</span><br><span class=\"line\">916</span><br><span class=\"line\">917</span><br><span class=\"line\">918</span><br><span class=\"line\">919</span><br><span class=\"line\">920</span><br><span class=\"line\">921</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;annotations&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;list&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;builtIn&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;grafana&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;-- Grafana --&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;enable&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;hide&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;iconColor&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;rgba(0, 211, 255, 1)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Annotations &amp; Alerts&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;target&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;limit&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">100</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;matchAny&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;tags&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;dashboard&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;dashboard&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">]</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;editable&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;fiscalYearStartMonth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;graphTooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;links&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;liveNow&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;panels&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;thresholds&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;0&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;index&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;text&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;DOWN&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;value&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;from&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;result&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;index&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;text&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;UP&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;to&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">9999999</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;range&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">21</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;colorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;value&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;graphMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;area&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;justifyMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;orientation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;reduceOptions&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">            <span class=\"string\">&quot;lastNotNull&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;fields&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;values&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;textMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;pluginVersion&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;9.2.4&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;nginx\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;active\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |&gt; yield(name: \\&quot;mean\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Nginx UP/DOWN&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;stat&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;min&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;unit&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;decbytes&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;matcher&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;byName&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;cached i-30g60b69&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;properties&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;color&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;fixedColor&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;light-blue&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fixed&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;matcher&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;byName&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;free i-30g60b69&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;properties&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;color&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;fixedColor&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;light-green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fixed&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;matcher&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;byName&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;used i-30g60b69&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;properties&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;color&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;fixedColor&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fixed&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;matcher&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;byName&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;buffered i-30g60b69&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;properties&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;color&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;fixedColor&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;yellow&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fixed&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">6</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">10</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;displayLabels&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">          <span class=\"string\">&quot;value&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;values&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">            <span class=\"string\">&quot;value&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">]</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;pieType&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;donut&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;reduceOptions&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">            <span class=\"string\">&quot;lastNotNull&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;fields&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;values&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;desc&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;pluginVersion&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;9.2.4&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart)\\r\\n  |&gt; filter(fn: (r) =&gt; r._measurement == \\&quot;mem\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r._field == \\&quot;used\\&quot; or r._field == \\&quot;cached\\&quot; or r._field == \\&quot;free\\&quot; or r._field == \\&quot;buffered\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |&gt; yield(name: \\&quot;mean\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Memory Usage&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;transformations&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;piechart&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;thresholds&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;max&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">100</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;min&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;unit&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;percent&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">9</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;orientation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;reduceOptions&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">            <span class=\"string\">&quot;lastNotNull&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;fields&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;values&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;showThresholdLabels&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;showThresholdMarkers&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;pluginVersion&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;9.2.4&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;disk\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;used_percent\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;device\\&quot;] == \\&quot;vdc\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;fstype\\&quot;] == \\&quot;ext4\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;mode\\&quot;] == \\&quot;rw\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;path\\&quot;] == \\&quot;/mnt/vos-6izqwyw8\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |&gt; yield(name: \\&quot;mean\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Disk Usage&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;gauge&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisCenteredZero&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisColorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisLabel&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisPlacement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;barAlignment&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;drawStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;line&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;fillOpacity&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">31</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;gradientMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineInterpolation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineWidth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;pointSize&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;scaleDistribution&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;showPoints&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;spanNulls&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;stacking&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;group&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;normal&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;thresholdsStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;off&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">19</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;nginx\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;waiting\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;writing\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |&gt; yield(name: \\&quot;mean\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;TCP Socket&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timeseries&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisCenteredZero&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisColorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisLabel&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisPlacement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;barAlignment&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;drawStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;line&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;fillOpacity&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">79</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;gradientMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineInterpolation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;fill&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;solid&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineWidth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;pointSize&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;scaleDistribution&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;showPoints&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;spanNulls&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;stacking&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;group&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;normal&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;thresholdsStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;off&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">6</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">18</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;cpu\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;usage_iowait\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_irq\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_steal\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_user\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_system\\&quot;  or r[\\&quot;_field\\&quot;] == \\&quot;usage_softirq\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_nice\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_guest_nice\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_guest\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;cpu\\&quot;] == \\&quot;cpu-total\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |&gt; yield(name: \\&quot;mean\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;CPU*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timeseries&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;description&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisCenteredZero&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisColorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisGridShow&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisLabel&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisPlacement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;barAlignment&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;drawStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;line&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;fillOpacity&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">50</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;gradientMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineInterpolation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineWidth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;pointSize&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;scaleDistribution&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;linearThreshold&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;showPoints&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;spanNulls&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;stacking&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;group&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;thresholdsStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;off&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;min&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;unit&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Bps&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">6</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">6</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">6</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;diskio\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;read_bytes\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;write_bytes\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;name\\&quot;] == \\&quot;vdc\\&quot;)\\r\\n  |&gt; derivative(unit: 1s, nonNegative: false)\\r\\n  |&gt; yield(name: \\&quot;derivative\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Disk IO&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timeseries&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisCenteredZero&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisColorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisLabel&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisPlacement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;barAlignment&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;drawStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;line&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;fillOpacity&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">21</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;gradientMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineInterpolation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineWidth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;pointSize&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;scaleDistribution&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;showPoints&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;spanNulls&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;stacking&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;group&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;thresholdsStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;off&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;min&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;unit&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bytes&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">14</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart)\\r\\n  |&gt; filter(fn: (r) =&gt; r._measurement == \\&quot;net\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r._field == \\&quot;bytes_recv\\&quot; or r._field == \\&quot;bytes_sent\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)\\r\\n  |&gt; derivative(unit: 1s, nonNegative: false)\\r\\n  |&gt; yield(name: \\&quot;derivative\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;IPv4 Traffic&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timeseries&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisCenteredZero&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisColorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisLabel&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisPlacement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;barAlignment&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;drawStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;line&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;fillOpacity&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">50</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;gradientMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineInterpolation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineWidth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;pointSize&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;scaleDistribution&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;showPoints&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;spanNulls&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;stacking&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;group&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;thresholdsStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;off&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;unit&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;decbytes&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">16</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">23</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;mem\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;cached\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |&gt; yield(name: \\&quot;mean\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Memory Cached&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timeseries&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisCenteredZero&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisColorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisLabel&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisPlacement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;barAlignment&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">-1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;drawStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bars&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;fillOpacity&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">86</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;gradientMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineInterpolation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;smooth&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;fill&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;solid&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineWidth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;pointSize&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">4</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;scaleDistribution&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;showPoints&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;spanNulls&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;stacking&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;group&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;thresholdsStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;off&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;min&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;unit&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;percentunit&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">16</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">25</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;diskio\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;read_bytes\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;name\\&quot;] == \\&quot;vdc\\&quot;)\\r\\n  |&gt; derivative(unit: 10s, nonNegative: false)\\r\\n  |&gt; yield(name: \\&quot;derivative\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;hide&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;net\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;bytes_sent\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;interface\\&quot;] == \\&quot;eth0\\&quot;)\\r\\n  |&gt; derivative(unit: 10s, nonNegative: false)\\r\\n  |&gt; yield(name: \\&quot;derivative\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;B&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Cache Hit Rate&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;transformations&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;calculateField&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;alias&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;REC&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;binary&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;left&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bytes_sent &#123;host=\\&quot;i-30g60b69\\&quot;, interface=\\&quot;eth0\\&quot;, name=\\&quot;net\\&quot;&#125;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;operator&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;-&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;reducer&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;sum&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;right&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;read_bytes &#123;host=\\&quot;i-30g60b69\\&quot;, name=\\&quot;diskio\\&quot;&#125;&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;binary&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;reduce&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;reducer&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;sum&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;replaceFields&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;calculateField&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;alias&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Cache Hit Rate&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;binary&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;left&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;REC&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;operator&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;/&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;reducer&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;sum&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;right&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bytes_sent &#123;host=\\&quot;i-30g60b69\\&quot;, interface=\\&quot;eth0\\&quot;, name=\\&quot;net\\&quot;&#125;&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;binary&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;reduce&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;reducer&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;sum&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;replaceFields&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timeseries&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;refresh&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;5s&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;schemaVersion&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">37</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;style&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;dark&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;tags&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;templating&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;list&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;time&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;from&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;now-6h&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;to&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;now&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;timepicker&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;timezone&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;QLU_Mirrors&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;z38bN0O4z&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">15</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;weekStart&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>十分意外镜像站用户增长速度如此之快，面对日均五万左右的用户量，服务器频繁出现各种性能问题。在故障排查的过程中，我意识到服务器需要一套成熟、完整、可靠的日志监控及预警方案。</p>\n<p>先前长期使用 <code>goaccess</code> 静态分析Nginx的日志，具有滞后性。只能用于单纯的分析总结一段时间内的网站流量状况，而无法做到实时监看服务状态和运行数据。</p>\n<p>既然是开源镜像站，那么我们就需要把目光投向开源社区。</p>\n<h2 id=\"较为流行的ELK\"><a href=\"#较为流行的ELK\" class=\"headerlink\" title=\"较为流行的ELK\"></a>较为流行的ELK</h2><p>目前市面上最流行的日志处理方案莫过于“ELK”系统，“ELK”是Elasticsearch、Logstash和Kibana的组合的合称。</p>\n<p>Elasticsearch 是一个搜索和分析引擎。Logstash 是服务器端数据处理管道，能够同时从多个来源采集数据，转换数据，然后将数据发送到诸如 Elasticsearch 等“存储库”中。Kibana 则可以让用户在 Elasticsearch 中使用图形和图表对数据进行可视化。</p>\n<h2 id=\"InfluxDB-amp-Telegraf\"><a href=\"#InfluxDB-amp-Telegraf\" class=\"headerlink\" title=\"InfluxDB&amp;Telegraf\"></a>InfluxDB&amp;Telegraf</h2><p>通过自己的初步了解以及咨询使用者的使用体验，我认为ELK在使用体验和性能上都不适合我（其实是单纯的不喜欢Java）。而一个朋友推荐我去尝试一下 InfluxDB+Telegraf 的组合。</p>\n<p>服务器的性能日志从本质上来说，属于<strong>时序大数据</strong>，我们打开数据库排名网站<a href=\"https://db-engines.com/en/ranking\">DB-Engines Ranking</a>，左侧选择时序数据库(<a href=\"https://db-engines.com/en/ranking/time+series+dbms\">Time Series DBMS</a>)，可以看到 InfluxDB 在排名上一骑绝尘。</p>\n<p><img src=\"https://s2.loli.net/2022/12/24/e8RbQm7i2Jj1Kzk.png\" alt=\"image.png\"></p>\n<p>安装直接跟着官方文档即可，下面我将英文文档翻译一下给大家参考：</p>\n<h4 id=\"使用-systemd-将-InfluxDB-安装为服务\"><a href=\"#使用-systemd-将-InfluxDB-安装为服务\" class=\"headerlink\" title=\"使用 systemd 将 InfluxDB 安装为服务\"></a>使用 systemd 将 InfluxDB 安装为服务</h4><ol>\n<li><p>使用以下命令从<a href=\"https://portal.influxdata.com/downloads/\">InfluxData 下载页面</a>使用 URL 下载并安装适当的<code>.deb</code>或文件：<code>.rpm</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Ubuntu/Debian</span></span><br><span class=\"line\">wget https://dl.influxdata.com/influxdb/releases/influxdb2-2.6.0-xxx.deb</span><br><span class=\"line\">sudo dpkg -i influxdb2-2.6.0-xxx.deb</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Red Hat/CentOS/Fedora</span></span><br><span class=\"line\">wget https://dl.influxdata.com/influxdb/releases/influxdb2-2.6.0-xxx.rpm</span><br><span class=\"line\">sudo yum localinstall influxdb2-2.6.0-xxx.rpm</span><br></pre></td></tr></table></figure>\n\n<p><em>使用<code>.rpm</code>包下载的确切文件名（例如，<code>influxdb2-2.6.0-amd64.rpm</code>）。</em></p>\n</li>\n<li><p>启动 InfluxDB 服务：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service influxdb start</span><br></pre></td></tr></table></figure>\n\n<p>安装 InfluxDB 包会创建一个服务文件，<code>/lib/systemd/system/influxdb.service</code> 用于在启动时将 InfluxDB 作为后台服务启动。</p>\n</li>\n<li><p>重新启动系统并验证服务是否正常运行：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\"> sudo service influxdb status</span></span><br><span class=\"line\">● influxdb.service - InfluxDB is an open-source, distributed, time series database</span><br><span class=\"line\">  Loaded: loaded (/lib/systemd/system/influxdb.service; enabled; vendor preset: enable&gt;</span><br><span class=\"line\">  Active: active (running)</span><br></pre></td></tr></table></figure></li>\n</ol>\n<p>有关 InfluxDB 在作为服务运行时在磁盘上存储数据的位置的信息，请参阅<a href=\"https://docs.influxdata.com/influxdb/v2.6/reference/internals/file-system-layout/?t=Linux#installed-as-a-package\">文件系统布局</a>。</p>\n<p>要自定义 InfluxDB 配置，请使用 <a href=\"https://docs.influxdata.com/influxdb/v2.6/install/?t=Linux#pass-arguments-to-systemd\">命令行标志（参数）</a>、环境变量或 InfluxDB 配置文件。有关详细信息，请参阅 InfluxDB<a href=\"https://docs.influxdata.com/influxdb/v2.6/reference/config-options/\">配置选项</a>。</p>\n<h4 id=\"将参数传递给-systemd\"><a href=\"#将参数传递给-systemd\" class=\"headerlink\" title=\"将参数传递给 systemd\"></a>将参数传递给 systemd</h4><ol>\n<li><p>添加一行或多行命令，如下所示，包含<code>influxd</code>to的参数<code>/etc/default/influxdb2</code>：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ARG1=<span class=\"string\">&quot;--http-bind-address :8087&quot;</span></span><br><span class=\"line\">ARG2=<span class=\"string\">&quot;&lt;another argument here&gt;&quot;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>编辑<code>/lib/systemd/system/influxdb.service</code>文件如下：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ExecStart=/usr/bin/influxd <span class=\"variable\">$ARG1</span> <span class=\"variable\">$ARG2</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"启动-InfluxDB\"><a href=\"#启动-InfluxDB\" class=\"headerlink\" title=\"启动 InfluxDB\"></a>启动 InfluxDB</h4><p>如果 InfluxDB 作为 systemd 服务安装，则 systemd 管理<code>influxd</code>守护进程，不需要进一步的操作。如果二进制文件是手动下载并添加到系统中的，请使用以下命令<code>$PATH</code>启动守护进程：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">influxd</span><br></pre></td></tr></table></figure>\n\n<p>进入8086端口配置好后，就可以在DashBoard里查阅可视化数据了。</p>\n<p><img src=\"https://s2.loli.net/2022/12/24/2ybGTCxF6znZQJA.png\" alt=\"image.png\"></p>\n<h2 id=\"Grafana\"><a href=\"#Grafana\" class=\"headerlink\" title=\"Grafana\"></a>Grafana</h2><p>InfluxDB毕竟是一个数据库，在可视化方便并不擅长。因此我在另外一台机器上调用InfluxDB的数据源制作可视化面板。</p>\n<p><img src=\"https://s2.loli.net/2022/12/26/Jeig5pqMROmwAbE.png\" alt=\"image.png\"></p>\n<p>面板主要包含了Nginx启动状态、内存利用、储存利用、CPU、DiskIO、网络状态和缓存命中率等。</p>\n<p>下面是面板的JSON以供参考</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br><span class=\"line\">548</span><br><span class=\"line\">549</span><br><span class=\"line\">550</span><br><span class=\"line\">551</span><br><span class=\"line\">552</span><br><span class=\"line\">553</span><br><span class=\"line\">554</span><br><span class=\"line\">555</span><br><span class=\"line\">556</span><br><span class=\"line\">557</span><br><span class=\"line\">558</span><br><span class=\"line\">559</span><br><span class=\"line\">560</span><br><span class=\"line\">561</span><br><span class=\"line\">562</span><br><span class=\"line\">563</span><br><span class=\"line\">564</span><br><span class=\"line\">565</span><br><span class=\"line\">566</span><br><span class=\"line\">567</span><br><span class=\"line\">568</span><br><span class=\"line\">569</span><br><span class=\"line\">570</span><br><span class=\"line\">571</span><br><span class=\"line\">572</span><br><span class=\"line\">573</span><br><span class=\"line\">574</span><br><span class=\"line\">575</span><br><span class=\"line\">576</span><br><span class=\"line\">577</span><br><span class=\"line\">578</span><br><span class=\"line\">579</span><br><span class=\"line\">580</span><br><span class=\"line\">581</span><br><span class=\"line\">582</span><br><span class=\"line\">583</span><br><span class=\"line\">584</span><br><span class=\"line\">585</span><br><span class=\"line\">586</span><br><span class=\"line\">587</span><br><span class=\"line\">588</span><br><span class=\"line\">589</span><br><span class=\"line\">590</span><br><span class=\"line\">591</span><br><span class=\"line\">592</span><br><span class=\"line\">593</span><br><span class=\"line\">594</span><br><span class=\"line\">595</span><br><span class=\"line\">596</span><br><span class=\"line\">597</span><br><span class=\"line\">598</span><br><span class=\"line\">599</span><br><span class=\"line\">600</span><br><span class=\"line\">601</span><br><span class=\"line\">602</span><br><span class=\"line\">603</span><br><span class=\"line\">604</span><br><span class=\"line\">605</span><br><span class=\"line\">606</span><br><span class=\"line\">607</span><br><span class=\"line\">608</span><br><span class=\"line\">609</span><br><span class=\"line\">610</span><br><span class=\"line\">611</span><br><span class=\"line\">612</span><br><span class=\"line\">613</span><br><span class=\"line\">614</span><br><span class=\"line\">615</span><br><span class=\"line\">616</span><br><span class=\"line\">617</span><br><span class=\"line\">618</span><br><span class=\"line\">619</span><br><span class=\"line\">620</span><br><span class=\"line\">621</span><br><span class=\"line\">622</span><br><span class=\"line\">623</span><br><span class=\"line\">624</span><br><span class=\"line\">625</span><br><span class=\"line\">626</span><br><span class=\"line\">627</span><br><span class=\"line\">628</span><br><span class=\"line\">629</span><br><span class=\"line\">630</span><br><span class=\"line\">631</span><br><span class=\"line\">632</span><br><span class=\"line\">633</span><br><span class=\"line\">634</span><br><span class=\"line\">635</span><br><span class=\"line\">636</span><br><span class=\"line\">637</span><br><span class=\"line\">638</span><br><span class=\"line\">639</span><br><span class=\"line\">640</span><br><span class=\"line\">641</span><br><span class=\"line\">642</span><br><span class=\"line\">643</span><br><span class=\"line\">644</span><br><span class=\"line\">645</span><br><span class=\"line\">646</span><br><span class=\"line\">647</span><br><span class=\"line\">648</span><br><span class=\"line\">649</span><br><span class=\"line\">650</span><br><span class=\"line\">651</span><br><span class=\"line\">652</span><br><span class=\"line\">653</span><br><span class=\"line\">654</span><br><span class=\"line\">655</span><br><span class=\"line\">656</span><br><span class=\"line\">657</span><br><span class=\"line\">658</span><br><span class=\"line\">659</span><br><span class=\"line\">660</span><br><span class=\"line\">661</span><br><span class=\"line\">662</span><br><span class=\"line\">663</span><br><span class=\"line\">664</span><br><span class=\"line\">665</span><br><span class=\"line\">666</span><br><span class=\"line\">667</span><br><span class=\"line\">668</span><br><span class=\"line\">669</span><br><span class=\"line\">670</span><br><span class=\"line\">671</span><br><span class=\"line\">672</span><br><span class=\"line\">673</span><br><span class=\"line\">674</span><br><span class=\"line\">675</span><br><span class=\"line\">676</span><br><span class=\"line\">677</span><br><span class=\"line\">678</span><br><span class=\"line\">679</span><br><span class=\"line\">680</span><br><span class=\"line\">681</span><br><span class=\"line\">682</span><br><span class=\"line\">683</span><br><span class=\"line\">684</span><br><span class=\"line\">685</span><br><span class=\"line\">686</span><br><span class=\"line\">687</span><br><span class=\"line\">688</span><br><span class=\"line\">689</span><br><span class=\"line\">690</span><br><span class=\"line\">691</span><br><span class=\"line\">692</span><br><span class=\"line\">693</span><br><span class=\"line\">694</span><br><span class=\"line\">695</span><br><span class=\"line\">696</span><br><span class=\"line\">697</span><br><span class=\"line\">698</span><br><span class=\"line\">699</span><br><span class=\"line\">700</span><br><span class=\"line\">701</span><br><span class=\"line\">702</span><br><span class=\"line\">703</span><br><span class=\"line\">704</span><br><span class=\"line\">705</span><br><span class=\"line\">706</span><br><span class=\"line\">707</span><br><span class=\"line\">708</span><br><span class=\"line\">709</span><br><span class=\"line\">710</span><br><span class=\"line\">711</span><br><span class=\"line\">712</span><br><span class=\"line\">713</span><br><span class=\"line\">714</span><br><span class=\"line\">715</span><br><span class=\"line\">716</span><br><span class=\"line\">717</span><br><span class=\"line\">718</span><br><span class=\"line\">719</span><br><span class=\"line\">720</span><br><span class=\"line\">721</span><br><span class=\"line\">722</span><br><span class=\"line\">723</span><br><span class=\"line\">724</span><br><span class=\"line\">725</span><br><span class=\"line\">726</span><br><span class=\"line\">727</span><br><span class=\"line\">728</span><br><span class=\"line\">729</span><br><span class=\"line\">730</span><br><span class=\"line\">731</span><br><span class=\"line\">732</span><br><span class=\"line\">733</span><br><span class=\"line\">734</span><br><span class=\"line\">735</span><br><span class=\"line\">736</span><br><span class=\"line\">737</span><br><span class=\"line\">738</span><br><span class=\"line\">739</span><br><span class=\"line\">740</span><br><span class=\"line\">741</span><br><span class=\"line\">742</span><br><span class=\"line\">743</span><br><span class=\"line\">744</span><br><span class=\"line\">745</span><br><span class=\"line\">746</span><br><span class=\"line\">747</span><br><span class=\"line\">748</span><br><span class=\"line\">749</span><br><span class=\"line\">750</span><br><span class=\"line\">751</span><br><span class=\"line\">752</span><br><span class=\"line\">753</span><br><span class=\"line\">754</span><br><span class=\"line\">755</span><br><span class=\"line\">756</span><br><span class=\"line\">757</span><br><span class=\"line\">758</span><br><span class=\"line\">759</span><br><span class=\"line\">760</span><br><span class=\"line\">761</span><br><span class=\"line\">762</span><br><span class=\"line\">763</span><br><span class=\"line\">764</span><br><span class=\"line\">765</span><br><span class=\"line\">766</span><br><span class=\"line\">767</span><br><span class=\"line\">768</span><br><span class=\"line\">769</span><br><span class=\"line\">770</span><br><span class=\"line\">771</span><br><span class=\"line\">772</span><br><span class=\"line\">773</span><br><span class=\"line\">774</span><br><span class=\"line\">775</span><br><span class=\"line\">776</span><br><span class=\"line\">777</span><br><span class=\"line\">778</span><br><span class=\"line\">779</span><br><span class=\"line\">780</span><br><span class=\"line\">781</span><br><span class=\"line\">782</span><br><span class=\"line\">783</span><br><span class=\"line\">784</span><br><span class=\"line\">785</span><br><span class=\"line\">786</span><br><span class=\"line\">787</span><br><span class=\"line\">788</span><br><span class=\"line\">789</span><br><span class=\"line\">790</span><br><span class=\"line\">791</span><br><span class=\"line\">792</span><br><span class=\"line\">793</span><br><span class=\"line\">794</span><br><span class=\"line\">795</span><br><span class=\"line\">796</span><br><span class=\"line\">797</span><br><span class=\"line\">798</span><br><span class=\"line\">799</span><br><span class=\"line\">800</span><br><span class=\"line\">801</span><br><span class=\"line\">802</span><br><span class=\"line\">803</span><br><span class=\"line\">804</span><br><span class=\"line\">805</span><br><span class=\"line\">806</span><br><span class=\"line\">807</span><br><span class=\"line\">808</span><br><span class=\"line\">809</span><br><span class=\"line\">810</span><br><span class=\"line\">811</span><br><span class=\"line\">812</span><br><span class=\"line\">813</span><br><span class=\"line\">814</span><br><span class=\"line\">815</span><br><span class=\"line\">816</span><br><span class=\"line\">817</span><br><span class=\"line\">818</span><br><span class=\"line\">819</span><br><span class=\"line\">820</span><br><span class=\"line\">821</span><br><span class=\"line\">822</span><br><span class=\"line\">823</span><br><span class=\"line\">824</span><br><span class=\"line\">825</span><br><span class=\"line\">826</span><br><span class=\"line\">827</span><br><span class=\"line\">828</span><br><span class=\"line\">829</span><br><span class=\"line\">830</span><br><span class=\"line\">831</span><br><span class=\"line\">832</span><br><span class=\"line\">833</span><br><span class=\"line\">834</span><br><span class=\"line\">835</span><br><span class=\"line\">836</span><br><span class=\"line\">837</span><br><span class=\"line\">838</span><br><span class=\"line\">839</span><br><span class=\"line\">840</span><br><span class=\"line\">841</span><br><span class=\"line\">842</span><br><span class=\"line\">843</span><br><span class=\"line\">844</span><br><span class=\"line\">845</span><br><span class=\"line\">846</span><br><span class=\"line\">847</span><br><span class=\"line\">848</span><br><span class=\"line\">849</span><br><span class=\"line\">850</span><br><span class=\"line\">851</span><br><span class=\"line\">852</span><br><span class=\"line\">853</span><br><span class=\"line\">854</span><br><span class=\"line\">855</span><br><span class=\"line\">856</span><br><span class=\"line\">857</span><br><span class=\"line\">858</span><br><span class=\"line\">859</span><br><span class=\"line\">860</span><br><span class=\"line\">861</span><br><span class=\"line\">862</span><br><span class=\"line\">863</span><br><span class=\"line\">864</span><br><span class=\"line\">865</span><br><span class=\"line\">866</span><br><span class=\"line\">867</span><br><span class=\"line\">868</span><br><span class=\"line\">869</span><br><span class=\"line\">870</span><br><span class=\"line\">871</span><br><span class=\"line\">872</span><br><span class=\"line\">873</span><br><span class=\"line\">874</span><br><span class=\"line\">875</span><br><span class=\"line\">876</span><br><span class=\"line\">877</span><br><span class=\"line\">878</span><br><span class=\"line\">879</span><br><span class=\"line\">880</span><br><span class=\"line\">881</span><br><span class=\"line\">882</span><br><span class=\"line\">883</span><br><span class=\"line\">884</span><br><span class=\"line\">885</span><br><span class=\"line\">886</span><br><span class=\"line\">887</span><br><span class=\"line\">888</span><br><span class=\"line\">889</span><br><span class=\"line\">890</span><br><span class=\"line\">891</span><br><span class=\"line\">892</span><br><span class=\"line\">893</span><br><span class=\"line\">894</span><br><span class=\"line\">895</span><br><span class=\"line\">896</span><br><span class=\"line\">897</span><br><span class=\"line\">898</span><br><span class=\"line\">899</span><br><span class=\"line\">900</span><br><span class=\"line\">901</span><br><span class=\"line\">902</span><br><span class=\"line\">903</span><br><span class=\"line\">904</span><br><span class=\"line\">905</span><br><span class=\"line\">906</span><br><span class=\"line\">907</span><br><span class=\"line\">908</span><br><span class=\"line\">909</span><br><span class=\"line\">910</span><br><span class=\"line\">911</span><br><span class=\"line\">912</span><br><span class=\"line\">913</span><br><span class=\"line\">914</span><br><span class=\"line\">915</span><br><span class=\"line\">916</span><br><span class=\"line\">917</span><br><span class=\"line\">918</span><br><span class=\"line\">919</span><br><span class=\"line\">920</span><br><span class=\"line\">921</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;annotations&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;list&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;builtIn&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;grafana&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;-- Grafana --&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;enable&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;hide&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;iconColor&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;rgba(0, 211, 255, 1)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Annotations &amp; Alerts&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;target&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;limit&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">100</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;matchAny&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;tags&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;dashboard&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;dashboard&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">]</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;editable&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;fiscalYearStartMonth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;graphTooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;links&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;liveNow&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;panels&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;thresholds&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;0&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;index&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;text&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;DOWN&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;value&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;from&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;result&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;index&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;text&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;UP&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;to&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">9999999</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;range&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">21</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;colorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;value&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;graphMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;area&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;justifyMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;orientation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;reduceOptions&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">            <span class=\"string\">&quot;lastNotNull&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;fields&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;values&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;textMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;pluginVersion&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;9.2.4&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;nginx\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;active\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |&gt; yield(name: \\&quot;mean\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Nginx UP/DOWN&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;stat&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;min&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;unit&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;decbytes&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;matcher&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;byName&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;cached i-30g60b69&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;properties&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;color&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;fixedColor&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;light-blue&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fixed&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;matcher&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;byName&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;free i-30g60b69&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;properties&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;color&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;fixedColor&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;light-green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fixed&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;matcher&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;byName&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;used i-30g60b69&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;properties&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;color&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;fixedColor&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fixed&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;matcher&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;byName&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;buffered i-30g60b69&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;properties&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;color&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;fixedColor&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;yellow&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                  <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fixed&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">6</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">10</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;displayLabels&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">          <span class=\"string\">&quot;value&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;values&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">            <span class=\"string\">&quot;value&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">]</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;pieType&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;donut&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;reduceOptions&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">            <span class=\"string\">&quot;lastNotNull&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;fields&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;values&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;desc&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;pluginVersion&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;9.2.4&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart)\\r\\n  |&gt; filter(fn: (r) =&gt; r._measurement == \\&quot;mem\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r._field == \\&quot;used\\&quot; or r._field == \\&quot;cached\\&quot; or r._field == \\&quot;free\\&quot; or r._field == \\&quot;buffered\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |&gt; yield(name: \\&quot;mean\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Memory Usage&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;transformations&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;piechart&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;thresholds&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;max&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">100</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;min&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;unit&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;percent&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">9</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;orientation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;reduceOptions&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">            <span class=\"string\">&quot;lastNotNull&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;fields&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;values&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;showThresholdLabels&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;showThresholdMarkers&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;pluginVersion&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;9.2.4&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;disk\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;used_percent\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;device\\&quot;] == \\&quot;vdc\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;fstype\\&quot;] == \\&quot;ext4\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;mode\\&quot;] == \\&quot;rw\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;path\\&quot;] == \\&quot;/mnt/vos-6izqwyw8\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |&gt; yield(name: \\&quot;mean\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Disk Usage&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;gauge&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisCenteredZero&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisColorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisLabel&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisPlacement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;barAlignment&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;drawStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;line&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;fillOpacity&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">31</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;gradientMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineInterpolation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineWidth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;pointSize&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;scaleDistribution&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;showPoints&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;spanNulls&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;stacking&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;group&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;normal&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;thresholdsStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;off&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">19</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;nginx\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;waiting\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;writing\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |&gt; yield(name: \\&quot;mean\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;TCP Socket&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timeseries&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisCenteredZero&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisColorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisLabel&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisPlacement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;barAlignment&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;drawStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;line&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;fillOpacity&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">79</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;gradientMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineInterpolation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;fill&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;solid&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineWidth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;pointSize&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;scaleDistribution&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;showPoints&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;spanNulls&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;stacking&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;group&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;normal&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;thresholdsStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;off&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">6</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">18</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;cpu\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;usage_iowait\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_irq\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_steal\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_user\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_system\\&quot;  or r[\\&quot;_field\\&quot;] == \\&quot;usage_softirq\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_nice\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_guest_nice\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;usage_guest\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;cpu\\&quot;] == \\&quot;cpu-total\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |&gt; yield(name: \\&quot;mean\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;CPU*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timeseries&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;description&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisCenteredZero&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisColorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisGridShow&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisLabel&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisPlacement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;barAlignment&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;drawStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;line&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;fillOpacity&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">50</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;gradientMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineInterpolation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineWidth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;pointSize&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;scaleDistribution&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;linearThreshold&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;showPoints&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;spanNulls&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;stacking&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;group&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;thresholdsStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;off&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;min&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;unit&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Bps&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">6</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">6</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">6</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;diskio\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;read_bytes\\&quot; or r[\\&quot;_field\\&quot;] == \\&quot;write_bytes\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;name\\&quot;] == \\&quot;vdc\\&quot;)\\r\\n  |&gt; derivative(unit: 1s, nonNegative: false)\\r\\n  |&gt; yield(name: \\&quot;derivative\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Disk IO&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timeseries&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisCenteredZero&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisColorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisLabel&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisPlacement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;barAlignment&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;drawStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;line&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;fillOpacity&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">21</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;gradientMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineInterpolation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineWidth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;pointSize&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;scaleDistribution&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;showPoints&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;spanNulls&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;stacking&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;group&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;thresholdsStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;off&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;min&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;unit&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bytes&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">14</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart)\\r\\n  |&gt; filter(fn: (r) =&gt; r._measurement == \\&quot;net\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r._field == \\&quot;bytes_recv\\&quot; or r._field == \\&quot;bytes_sent\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: last, createEmpty: false)\\r\\n  |&gt; derivative(unit: 1s, nonNegative: false)\\r\\n  |&gt; yield(name: \\&quot;derivative\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;IPv4 Traffic&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timeseries&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisCenteredZero&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisColorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisLabel&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisPlacement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;barAlignment&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;drawStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;line&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;fillOpacity&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">50</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;gradientMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineInterpolation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineWidth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;pointSize&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;scaleDistribution&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;showPoints&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;spanNulls&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;stacking&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;group&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;thresholdsStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;off&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;unit&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;decbytes&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">16</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">23</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;mem\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;cached\\&quot;)\\r\\n  |&gt; aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\\r\\n  |&gt; yield(name: \\&quot;mean\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Memory Cached&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timeseries&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;fieldConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;defaults&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;palette-classic&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;custom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisCenteredZero&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisColorMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisLabel&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;axisPlacement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;barAlignment&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">-1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;drawStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bars&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;fillOpacity&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">86</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;gradientMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;hideFrom&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;viz&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineInterpolation&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;smooth&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;fill&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;solid&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;lineWidth&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;pointSize&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">4</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;scaleDistribution&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;linear&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;showPoints&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;auto&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;spanNulls&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;stacking&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;group&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;thresholdsStyle&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;off&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mappings&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;min&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;thresholds&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;absolute&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;steps&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;green&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">null</span></span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;color&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;red&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">80</span></span><br><span class=\"line\">              <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;unit&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;percentunit&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;overrides&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;gridPos&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;h&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">8</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;w&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;x&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">12</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;y&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">16</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">25</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;legend&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;calcs&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;displayMode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;list&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;placement&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bottom&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;showLegend&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"attr\">&quot;tooltip&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;single&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;sort&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;none&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;targets&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;diskio\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;read_bytes\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;name\\&quot;] == \\&quot;vdc\\&quot;)\\r\\n  |&gt; derivative(unit: 10s, nonNegative: false)\\r\\n  |&gt; yield(name: \\&quot;derivative\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;A&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;datasource&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;influxdb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;8-KvbZO4k&quot;</span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;hide&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;query&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;from(bucket: \\&quot;qlu\\&quot;)\\r\\n  |&gt; range(start: v.timeRangeStart, stop: v.timeRangeStop)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_measurement\\&quot;] == \\&quot;net\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;_field\\&quot;] == \\&quot;bytes_sent\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;host\\&quot;] == \\&quot;i-30g60b69\\&quot;)\\r\\n  |&gt; filter(fn: (r) =&gt; r[\\&quot;interface\\&quot;] == \\&quot;eth0\\&quot;)\\r\\n  |&gt; derivative(unit: 10s, nonNegative: false)\\r\\n  |&gt; yield(name: \\&quot;derivative\\&quot;)&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;refId&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;B&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Cache Hit Rate&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;transformations&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;calculateField&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;alias&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;REC&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;binary&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;left&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bytes_sent &#123;host=\\&quot;i-30g60b69\\&quot;, interface=\\&quot;eth0\\&quot;, name=\\&quot;net\\&quot;&#125;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;operator&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;-&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;reducer&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;sum&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;right&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;read_bytes &#123;host=\\&quot;i-30g60b69\\&quot;, name=\\&quot;diskio\\&quot;&#125;&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;binary&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;reduce&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;reducer&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;sum&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;replaceFields&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">false</span></span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;calculateField&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">          <span class=\"attr\">&quot;options&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;alias&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Cache Hit Rate&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;binary&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;left&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;REC&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;operator&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;/&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;reducer&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;sum&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;right&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bytes_sent &#123;host=\\&quot;i-30g60b69\\&quot;, interface=\\&quot;eth0\\&quot;, name=\\&quot;net\\&quot;&#125;&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;mode&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;binary&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;reduce&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">              <span class=\"attr\">&quot;reducer&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;sum&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;replaceFields&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span></span><br><span class=\"line\">          <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">      <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">      <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;timeseries&quot;</span></span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;refresh&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;5s&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;schemaVersion&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">37</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;style&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;dark&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;tags&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;templating&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;list&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"punctuation\">]</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;time&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;from&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;now-6h&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;to&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;now&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;timepicker&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;timezone&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;title&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;QLU_Mirrors&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;uid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;z38bN0O4z&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">15</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;weekStart&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>"},{"title":"TCP状态机","cover":"https://s2.loli.net/2022/12/24/FI1YkGehQyVKs9T.jpg","date":"2022-09-23T15:43:21.000Z","_content":"\n一个TCP连接在它的生命周期内会有不同的状态。\n\n下图说明了TCP连接可能会有的状态，以及基于事件的状态转换。事件中有的是应用程序的操作，有的是接收到了网络发过来的请求。\n\n![a21r1-84lt6.jpg](https://s2.loli.net/2022/12/25/kbcDZ3WdeETio8u.jpg)\n\nTCP状态及其描述如下表。\n\n| 状态         | 描述                                                         |\n| ------------ | ------------------------------------------------------------ |\n| LISTEN       | 等待来自远程TCP应用程序的请求                                |\n| SYN_SENT     | 发送连接请求后等待来自远程端点的确认。TCP第一次握手后客户端所处的状态 |\n| SYN-RECEIVED | 该端点已经接收到连接请求并发送确认。 该端点正在等待最终确认。TCP第二次握手后服务端所处的状态 |\n| ESTABLISHED  | 代表连接已经建立起来了。这是连接数据传输阶段的正常状态       |\n| FIN_WAIT_1   | 等待来自远程TCP的终止连接请求或终止请求的确认                |\n| FIN_WAIT_2   | 在此端点发送终止连接请求后，等待来自远程TCP的连接终止请求    |\n| CLOSE_WAIT   | 该端点已经收到来自远程端点的关闭请求，此TCP正在等待本地应用程序的连接终止请求 |\n| CLOSING      | 等待来自远程TCP的连接终止请求确认                            |\n| LAST_ACK     | 等待先前发送到远程TCP的连接终止请求的确认                    |\n| TIME_WAIT    | 等待足够的时间来确保远程TCP接收到其连接终止请求的确认        |\n\n## TCP三次握手\n\n当一个TCP连接建立时，发生了以下事情：\n\n1. 服务端必须准备接收传入的连接。这通常通过调用`socket`，`bind`和`listen`来完成，称为被动打开。\n2. 客户端通过调用`connect`方法来发起一个主动的打开。客户端TCP会发送一个“同步”(SYN)段，它告诉服务器客户端在连接上发送的数据的初始序列号。通常情况下，SYN没有发送数据，它只包含一个IP头，TCP头和可能的TCP选项。\n3. 服务器必须确认（ACK）客户端的SYN，并且服务器还必须发送自己的SYN，其中包含服务器将在连接上发送的数据的初始序列号。\n4. 客户端必须确认服务器的SYN。\n\n下图显示了TCP三次握手的过程，以及客户端和服务端状态的变化。\n\n![ac793-tjj85.jpg](https://s2.loli.net/2022/12/25/NvTBnJWulGCPZk7.jpg)\n\n## TCP四次挥手\n\n一个TCP连接需要四步断开：\n\n1. 一个应用程序首先执行`close`，发送FIN段，这个操作被称为主动关闭，这意味着这一端完成数据的发送。\n2. 执行FIN的另一端执行被动关闭，该端发送ACK，确认该FIN。\n3. 被动关闭的一端执行`close`，向主动关闭的一方发送FIN。\n4. 主动关闭的一方确认收到的FIN。\n\n下图显示了一次典型的TCP四次挥手的过程，以及主动关闭方和被动关闭方的状态变化。在图中是客户端主动断开了连接，这里只是举个例子，服务端一样可以主动断开连接。\n\n![amjcz-udy5c.jpg](https://s2.loli.net/2022/12/25/ZLbSedsukzPBChD.jpg)\n\n## 关于TIME_WAIT状态\n\nTIME_WAIT状态应该是最让人疑惑的一个状态了。在上图中可以看到，执行主动断开的节点最后会进入这个状态，该节点会在此状态保存2倍的MSL（最大段生存期）。\n\nTCP的每个实现都必须为MSL选择一个值。RFC 1122推荐的值为两分钟，伯克利派的实现使用30秒。这也就是说TIME_WAIT状态会维持1到4分钟。MSL是任何IP数据报可以在网络中生存的最长时间。这个时间是有限制的，因为每个数据报都包含一个8位的跳数限制，最大值是255.虽然这是一个跳数限制而不是一个真正的时间限制，但是根据这个限制来假设数据报的最长生命周期依然是有意义的。\n\n网络中数据报丢失的原因通常是路由异常。一旦路由崩溃或者两个路由之间的链路断开，路由协议需要几秒或几分钟才能稳定，并找到一条备用路径。在这段时间内，可能发生路由回路。同时假设丢失是一个TCP数据报，则发生TCP超时，并且重新发送分组，重传的分组通过一些备用路径达到最终目的地。但是一段时间后（该时间小于MSL），路由循环被更正，在循环中丢失的数据报被发送到最终目的地。这个原始的数据报被称为丢失的副本或漫游副本。TCP协议必须处理这些数据报。\n\n维持TIME_WAIT有两个原因：\n\n1. 可靠地实现TCP的全双工连接终止。\n2. 允许旧的重复数据段在网络中过期\n\n在四次挥手中，假设最后的ACK丢失了，被动关闭方会重发FIN。主动关闭端必须维护状态，来允许被动关闭方重发最后的ACK；如果它没有维护这个状态，将会对重发FIN返回RST，被动关闭方会认为这是个错误。如果TCP正在执行彻底终止数据流的两个方向所需的所有工作（即全双工关闭），则必须正确处理这四个段中任何一个的丢失。所以执行主动关闭的一方必须在结束时保持TIME_WAIT状态：因为它可能必须重传最后的ACK。\n\n现在来聊维持TIME_WAIT状态的第二个原因。假设在主机12.106.32.254的1500端口和206.168.112.219的21端口之间有一个TCP连接。此连接关闭后，在相通的地址和端口建立了另外一个连接。由于IP地址和端口相同，所以后一种连接被称为先前连接的“化身”。TCP必须防止连接中的旧副本在稍后再次出现，并被误解为属于同一连接的新“化身”。为此，TCP将不会启动当前处于TIME_WAIT状态的连接的新“化身”。由于TIME_WAIT状态的持续时间时两倍的MSL，因此TCP允许一个方向的数据在MSL秒内丢失，也允许回复在一个MSL秒内丢失。通过强制执行此规则，可以保证当一个TCP连接成功建立时，来自先前连接的所有旧的副本在网络中已过期。","source":"_posts/TCP.md","raw":"---\ntitle: TCP状态机\ncover: https://s2.loli.net/2022/12/24/FI1YkGehQyVKs9T.jpg\ntags: Computer Network\ndate: 2022/9/23 23:43:21\n---\n\n一个TCP连接在它的生命周期内会有不同的状态。\n\n下图说明了TCP连接可能会有的状态，以及基于事件的状态转换。事件中有的是应用程序的操作，有的是接收到了网络发过来的请求。\n\n![a21r1-84lt6.jpg](https://s2.loli.net/2022/12/25/kbcDZ3WdeETio8u.jpg)\n\nTCP状态及其描述如下表。\n\n| 状态         | 描述                                                         |\n| ------------ | ------------------------------------------------------------ |\n| LISTEN       | 等待来自远程TCP应用程序的请求                                |\n| SYN_SENT     | 发送连接请求后等待来自远程端点的确认。TCP第一次握手后客户端所处的状态 |\n| SYN-RECEIVED | 该端点已经接收到连接请求并发送确认。 该端点正在等待最终确认。TCP第二次握手后服务端所处的状态 |\n| ESTABLISHED  | 代表连接已经建立起来了。这是连接数据传输阶段的正常状态       |\n| FIN_WAIT_1   | 等待来自远程TCP的终止连接请求或终止请求的确认                |\n| FIN_WAIT_2   | 在此端点发送终止连接请求后，等待来自远程TCP的连接终止请求    |\n| CLOSE_WAIT   | 该端点已经收到来自远程端点的关闭请求，此TCP正在等待本地应用程序的连接终止请求 |\n| CLOSING      | 等待来自远程TCP的连接终止请求确认                            |\n| LAST_ACK     | 等待先前发送到远程TCP的连接终止请求的确认                    |\n| TIME_WAIT    | 等待足够的时间来确保远程TCP接收到其连接终止请求的确认        |\n\n## TCP三次握手\n\n当一个TCP连接建立时，发生了以下事情：\n\n1. 服务端必须准备接收传入的连接。这通常通过调用`socket`，`bind`和`listen`来完成，称为被动打开。\n2. 客户端通过调用`connect`方法来发起一个主动的打开。客户端TCP会发送一个“同步”(SYN)段，它告诉服务器客户端在连接上发送的数据的初始序列号。通常情况下，SYN没有发送数据，它只包含一个IP头，TCP头和可能的TCP选项。\n3. 服务器必须确认（ACK）客户端的SYN，并且服务器还必须发送自己的SYN，其中包含服务器将在连接上发送的数据的初始序列号。\n4. 客户端必须确认服务器的SYN。\n\n下图显示了TCP三次握手的过程，以及客户端和服务端状态的变化。\n\n![ac793-tjj85.jpg](https://s2.loli.net/2022/12/25/NvTBnJWulGCPZk7.jpg)\n\n## TCP四次挥手\n\n一个TCP连接需要四步断开：\n\n1. 一个应用程序首先执行`close`，发送FIN段，这个操作被称为主动关闭，这意味着这一端完成数据的发送。\n2. 执行FIN的另一端执行被动关闭，该端发送ACK，确认该FIN。\n3. 被动关闭的一端执行`close`，向主动关闭的一方发送FIN。\n4. 主动关闭的一方确认收到的FIN。\n\n下图显示了一次典型的TCP四次挥手的过程，以及主动关闭方和被动关闭方的状态变化。在图中是客户端主动断开了连接，这里只是举个例子，服务端一样可以主动断开连接。\n\n![amjcz-udy5c.jpg](https://s2.loli.net/2022/12/25/ZLbSedsukzPBChD.jpg)\n\n## 关于TIME_WAIT状态\n\nTIME_WAIT状态应该是最让人疑惑的一个状态了。在上图中可以看到，执行主动断开的节点最后会进入这个状态，该节点会在此状态保存2倍的MSL（最大段生存期）。\n\nTCP的每个实现都必须为MSL选择一个值。RFC 1122推荐的值为两分钟，伯克利派的实现使用30秒。这也就是说TIME_WAIT状态会维持1到4分钟。MSL是任何IP数据报可以在网络中生存的最长时间。这个时间是有限制的，因为每个数据报都包含一个8位的跳数限制，最大值是255.虽然这是一个跳数限制而不是一个真正的时间限制，但是根据这个限制来假设数据报的最长生命周期依然是有意义的。\n\n网络中数据报丢失的原因通常是路由异常。一旦路由崩溃或者两个路由之间的链路断开，路由协议需要几秒或几分钟才能稳定，并找到一条备用路径。在这段时间内，可能发生路由回路。同时假设丢失是一个TCP数据报，则发生TCP超时，并且重新发送分组，重传的分组通过一些备用路径达到最终目的地。但是一段时间后（该时间小于MSL），路由循环被更正，在循环中丢失的数据报被发送到最终目的地。这个原始的数据报被称为丢失的副本或漫游副本。TCP协议必须处理这些数据报。\n\n维持TIME_WAIT有两个原因：\n\n1. 可靠地实现TCP的全双工连接终止。\n2. 允许旧的重复数据段在网络中过期\n\n在四次挥手中，假设最后的ACK丢失了，被动关闭方会重发FIN。主动关闭端必须维护状态，来允许被动关闭方重发最后的ACK；如果它没有维护这个状态，将会对重发FIN返回RST，被动关闭方会认为这是个错误。如果TCP正在执行彻底终止数据流的两个方向所需的所有工作（即全双工关闭），则必须正确处理这四个段中任何一个的丢失。所以执行主动关闭的一方必须在结束时保持TIME_WAIT状态：因为它可能必须重传最后的ACK。\n\n现在来聊维持TIME_WAIT状态的第二个原因。假设在主机12.106.32.254的1500端口和206.168.112.219的21端口之间有一个TCP连接。此连接关闭后，在相通的地址和端口建立了另外一个连接。由于IP地址和端口相同，所以后一种连接被称为先前连接的“化身”。TCP必须防止连接中的旧副本在稍后再次出现，并被误解为属于同一连接的新“化身”。为此，TCP将不会启动当前处于TIME_WAIT状态的连接的新“化身”。由于TIME_WAIT状态的持续时间时两倍的MSL，因此TCP允许一个方向的数据在MSL秒内丢失，也允许回复在一个MSL秒内丢失。通过强制执行此规则，可以保证当一个TCP连接成功建立时，来自先前连接的所有旧的副本在网络中已过期。","slug":"TCP","published":1,"updated":"2022-12-31T10:07:01.722Z","_id":"clc23xw6v0003a4g748tk1eq8","comments":1,"layout":"post","photos":[],"link":"","content":"<p>一个TCP连接在它的生命周期内会有不同的状态。</p>\n<p>下图说明了TCP连接可能会有的状态，以及基于事件的状态转换。事件中有的是应用程序的操作，有的是接收到了网络发过来的请求。</p>\n<p><img src=\"https://s2.loli.net/2022/12/25/kbcDZ3WdeETio8u.jpg\" alt=\"a21r1-84lt6.jpg\"></p>\n<p>TCP状态及其描述如下表。</p>\n<table>\n<thead>\n<tr>\n<th>状态</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>LISTEN</td>\n<td>等待来自远程TCP应用程序的请求</td>\n</tr>\n<tr>\n<td>SYN_SENT</td>\n<td>发送连接请求后等待来自远程端点的确认。TCP第一次握手后客户端所处的状态</td>\n</tr>\n<tr>\n<td>SYN-RECEIVED</td>\n<td>该端点已经接收到连接请求并发送确认。 该端点正在等待最终确认。TCP第二次握手后服务端所处的状态</td>\n</tr>\n<tr>\n<td>ESTABLISHED</td>\n<td>代表连接已经建立起来了。这是连接数据传输阶段的正常状态</td>\n</tr>\n<tr>\n<td>FIN_WAIT_1</td>\n<td>等待来自远程TCP的终止连接请求或终止请求的确认</td>\n</tr>\n<tr>\n<td>FIN_WAIT_2</td>\n<td>在此端点发送终止连接请求后，等待来自远程TCP的连接终止请求</td>\n</tr>\n<tr>\n<td>CLOSE_WAIT</td>\n<td>该端点已经收到来自远程端点的关闭请求，此TCP正在等待本地应用程序的连接终止请求</td>\n</tr>\n<tr>\n<td>CLOSING</td>\n<td>等待来自远程TCP的连接终止请求确认</td>\n</tr>\n<tr>\n<td>LAST_ACK</td>\n<td>等待先前发送到远程TCP的连接终止请求的确认</td>\n</tr>\n<tr>\n<td>TIME_WAIT</td>\n<td>等待足够的时间来确保远程TCP接收到其连接终止请求的确认</td>\n</tr>\n</tbody></table>\n<h2 id=\"TCP三次握手\"><a href=\"#TCP三次握手\" class=\"headerlink\" title=\"TCP三次握手\"></a>TCP三次握手</h2><p>当一个TCP连接建立时，发生了以下事情：</p>\n<ol>\n<li>服务端必须准备接收传入的连接。这通常通过调用<code>socket</code>，<code>bind</code>和<code>listen</code>来完成，称为被动打开。</li>\n<li>客户端通过调用<code>connect</code>方法来发起一个主动的打开。客户端TCP会发送一个“同步”(SYN)段，它告诉服务器客户端在连接上发送的数据的初始序列号。通常情况下，SYN没有发送数据，它只包含一个IP头，TCP头和可能的TCP选项。</li>\n<li>服务器必须确认（ACK）客户端的SYN，并且服务器还必须发送自己的SYN，其中包含服务器将在连接上发送的数据的初始序列号。</li>\n<li>客户端必须确认服务器的SYN。</li>\n</ol>\n<p>下图显示了TCP三次握手的过程，以及客户端和服务端状态的变化。</p>\n<p><img src=\"https://s2.loli.net/2022/12/25/NvTBnJWulGCPZk7.jpg\" alt=\"ac793-tjj85.jpg\"></p>\n<h2 id=\"TCP四次挥手\"><a href=\"#TCP四次挥手\" class=\"headerlink\" title=\"TCP四次挥手\"></a>TCP四次挥手</h2><p>一个TCP连接需要四步断开：</p>\n<ol>\n<li>一个应用程序首先执行<code>close</code>，发送FIN段，这个操作被称为主动关闭，这意味着这一端完成数据的发送。</li>\n<li>执行FIN的另一端执行被动关闭，该端发送ACK，确认该FIN。</li>\n<li>被动关闭的一端执行<code>close</code>，向主动关闭的一方发送FIN。</li>\n<li>主动关闭的一方确认收到的FIN。</li>\n</ol>\n<p>下图显示了一次典型的TCP四次挥手的过程，以及主动关闭方和被动关闭方的状态变化。在图中是客户端主动断开了连接，这里只是举个例子，服务端一样可以主动断开连接。</p>\n<p><img src=\"https://s2.loli.net/2022/12/25/ZLbSedsukzPBChD.jpg\" alt=\"amjcz-udy5c.jpg\"></p>\n<h2 id=\"关于TIME-WAIT状态\"><a href=\"#关于TIME-WAIT状态\" class=\"headerlink\" title=\"关于TIME_WAIT状态\"></a>关于TIME_WAIT状态</h2><p>TIME_WAIT状态应该是最让人疑惑的一个状态了。在上图中可以看到，执行主动断开的节点最后会进入这个状态，该节点会在此状态保存2倍的MSL（最大段生存期）。</p>\n<p>TCP的每个实现都必须为MSL选择一个值。RFC 1122推荐的值为两分钟，伯克利派的实现使用30秒。这也就是说TIME_WAIT状态会维持1到4分钟。MSL是任何IP数据报可以在网络中生存的最长时间。这个时间是有限制的，因为每个数据报都包含一个8位的跳数限制，最大值是255.虽然这是一个跳数限制而不是一个真正的时间限制，但是根据这个限制来假设数据报的最长生命周期依然是有意义的。</p>\n<p>网络中数据报丢失的原因通常是路由异常。一旦路由崩溃或者两个路由之间的链路断开，路由协议需要几秒或几分钟才能稳定，并找到一条备用路径。在这段时间内，可能发生路由回路。同时假设丢失是一个TCP数据报，则发生TCP超时，并且重新发送分组，重传的分组通过一些备用路径达到最终目的地。但是一段时间后（该时间小于MSL），路由循环被更正，在循环中丢失的数据报被发送到最终目的地。这个原始的数据报被称为丢失的副本或漫游副本。TCP协议必须处理这些数据报。</p>\n<p>维持TIME_WAIT有两个原因：</p>\n<ol>\n<li>可靠地实现TCP的全双工连接终止。</li>\n<li>允许旧的重复数据段在网络中过期</li>\n</ol>\n<p>在四次挥手中，假设最后的ACK丢失了，被动关闭方会重发FIN。主动关闭端必须维护状态，来允许被动关闭方重发最后的ACK；如果它没有维护这个状态，将会对重发FIN返回RST，被动关闭方会认为这是个错误。如果TCP正在执行彻底终止数据流的两个方向所需的所有工作（即全双工关闭），则必须正确处理这四个段中任何一个的丢失。所以执行主动关闭的一方必须在结束时保持TIME_WAIT状态：因为它可能必须重传最后的ACK。</p>\n<p>现在来聊维持TIME_WAIT状态的第二个原因。假设在主机12.106.32.254的1500端口和206.168.112.219的21端口之间有一个TCP连接。此连接关闭后，在相通的地址和端口建立了另外一个连接。由于IP地址和端口相同，所以后一种连接被称为先前连接的“化身”。TCP必须防止连接中的旧副本在稍后再次出现，并被误解为属于同一连接的新“化身”。为此，TCP将不会启动当前处于TIME_WAIT状态的连接的新“化身”。由于TIME_WAIT状态的持续时间时两倍的MSL，因此TCP允许一个方向的数据在MSL秒内丢失，也允许回复在一个MSL秒内丢失。通过强制执行此规则，可以保证当一个TCP连接成功建立时，来自先前连接的所有旧的副本在网络中已过期。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>一个TCP连接在它的生命周期内会有不同的状态。</p>\n<p>下图说明了TCP连接可能会有的状态，以及基于事件的状态转换。事件中有的是应用程序的操作，有的是接收到了网络发过来的请求。</p>\n<p><img src=\"https://s2.loli.net/2022/12/25/kbcDZ3WdeETio8u.jpg\" alt=\"a21r1-84lt6.jpg\"></p>\n<p>TCP状态及其描述如下表。</p>\n<table>\n<thead>\n<tr>\n<th>状态</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>LISTEN</td>\n<td>等待来自远程TCP应用程序的请求</td>\n</tr>\n<tr>\n<td>SYN_SENT</td>\n<td>发送连接请求后等待来自远程端点的确认。TCP第一次握手后客户端所处的状态</td>\n</tr>\n<tr>\n<td>SYN-RECEIVED</td>\n<td>该端点已经接收到连接请求并发送确认。 该端点正在等待最终确认。TCP第二次握手后服务端所处的状态</td>\n</tr>\n<tr>\n<td>ESTABLISHED</td>\n<td>代表连接已经建立起来了。这是连接数据传输阶段的正常状态</td>\n</tr>\n<tr>\n<td>FIN_WAIT_1</td>\n<td>等待来自远程TCP的终止连接请求或终止请求的确认</td>\n</tr>\n<tr>\n<td>FIN_WAIT_2</td>\n<td>在此端点发送终止连接请求后，等待来自远程TCP的连接终止请求</td>\n</tr>\n<tr>\n<td>CLOSE_WAIT</td>\n<td>该端点已经收到来自远程端点的关闭请求，此TCP正在等待本地应用程序的连接终止请求</td>\n</tr>\n<tr>\n<td>CLOSING</td>\n<td>等待来自远程TCP的连接终止请求确认</td>\n</tr>\n<tr>\n<td>LAST_ACK</td>\n<td>等待先前发送到远程TCP的连接终止请求的确认</td>\n</tr>\n<tr>\n<td>TIME_WAIT</td>\n<td>等待足够的时间来确保远程TCP接收到其连接终止请求的确认</td>\n</tr>\n</tbody></table>\n<h2 id=\"TCP三次握手\"><a href=\"#TCP三次握手\" class=\"headerlink\" title=\"TCP三次握手\"></a>TCP三次握手</h2><p>当一个TCP连接建立时，发生了以下事情：</p>\n<ol>\n<li>服务端必须准备接收传入的连接。这通常通过调用<code>socket</code>，<code>bind</code>和<code>listen</code>来完成，称为被动打开。</li>\n<li>客户端通过调用<code>connect</code>方法来发起一个主动的打开。客户端TCP会发送一个“同步”(SYN)段，它告诉服务器客户端在连接上发送的数据的初始序列号。通常情况下，SYN没有发送数据，它只包含一个IP头，TCP头和可能的TCP选项。</li>\n<li>服务器必须确认（ACK）客户端的SYN，并且服务器还必须发送自己的SYN，其中包含服务器将在连接上发送的数据的初始序列号。</li>\n<li>客户端必须确认服务器的SYN。</li>\n</ol>\n<p>下图显示了TCP三次握手的过程，以及客户端和服务端状态的变化。</p>\n<p><img src=\"https://s2.loli.net/2022/12/25/NvTBnJWulGCPZk7.jpg\" alt=\"ac793-tjj85.jpg\"></p>\n<h2 id=\"TCP四次挥手\"><a href=\"#TCP四次挥手\" class=\"headerlink\" title=\"TCP四次挥手\"></a>TCP四次挥手</h2><p>一个TCP连接需要四步断开：</p>\n<ol>\n<li>一个应用程序首先执行<code>close</code>，发送FIN段，这个操作被称为主动关闭，这意味着这一端完成数据的发送。</li>\n<li>执行FIN的另一端执行被动关闭，该端发送ACK，确认该FIN。</li>\n<li>被动关闭的一端执行<code>close</code>，向主动关闭的一方发送FIN。</li>\n<li>主动关闭的一方确认收到的FIN。</li>\n</ol>\n<p>下图显示了一次典型的TCP四次挥手的过程，以及主动关闭方和被动关闭方的状态变化。在图中是客户端主动断开了连接，这里只是举个例子，服务端一样可以主动断开连接。</p>\n<p><img src=\"https://s2.loli.net/2022/12/25/ZLbSedsukzPBChD.jpg\" alt=\"amjcz-udy5c.jpg\"></p>\n<h2 id=\"关于TIME-WAIT状态\"><a href=\"#关于TIME-WAIT状态\" class=\"headerlink\" title=\"关于TIME_WAIT状态\"></a>关于TIME_WAIT状态</h2><p>TIME_WAIT状态应该是最让人疑惑的一个状态了。在上图中可以看到，执行主动断开的节点最后会进入这个状态，该节点会在此状态保存2倍的MSL（最大段生存期）。</p>\n<p>TCP的每个实现都必须为MSL选择一个值。RFC 1122推荐的值为两分钟，伯克利派的实现使用30秒。这也就是说TIME_WAIT状态会维持1到4分钟。MSL是任何IP数据报可以在网络中生存的最长时间。这个时间是有限制的，因为每个数据报都包含一个8位的跳数限制，最大值是255.虽然这是一个跳数限制而不是一个真正的时间限制，但是根据这个限制来假设数据报的最长生命周期依然是有意义的。</p>\n<p>网络中数据报丢失的原因通常是路由异常。一旦路由崩溃或者两个路由之间的链路断开，路由协议需要几秒或几分钟才能稳定，并找到一条备用路径。在这段时间内，可能发生路由回路。同时假设丢失是一个TCP数据报，则发生TCP超时，并且重新发送分组，重传的分组通过一些备用路径达到最终目的地。但是一段时间后（该时间小于MSL），路由循环被更正，在循环中丢失的数据报被发送到最终目的地。这个原始的数据报被称为丢失的副本或漫游副本。TCP协议必须处理这些数据报。</p>\n<p>维持TIME_WAIT有两个原因：</p>\n<ol>\n<li>可靠地实现TCP的全双工连接终止。</li>\n<li>允许旧的重复数据段在网络中过期</li>\n</ol>\n<p>在四次挥手中，假设最后的ACK丢失了，被动关闭方会重发FIN。主动关闭端必须维护状态，来允许被动关闭方重发最后的ACK；如果它没有维护这个状态，将会对重发FIN返回RST，被动关闭方会认为这是个错误。如果TCP正在执行彻底终止数据流的两个方向所需的所有工作（即全双工关闭），则必须正确处理这四个段中任何一个的丢失。所以执行主动关闭的一方必须在结束时保持TIME_WAIT状态：因为它可能必须重传最后的ACK。</p>\n<p>现在来聊维持TIME_WAIT状态的第二个原因。假设在主机12.106.32.254的1500端口和206.168.112.219的21端口之间有一个TCP连接。此连接关闭后，在相通的地址和端口建立了另外一个连接。由于IP地址和端口相同，所以后一种连接被称为先前连接的“化身”。TCP必须防止连接中的旧副本在稍后再次出现，并被误解为属于同一连接的新“化身”。为此，TCP将不会启动当前处于TIME_WAIT状态的连接的新“化身”。由于TIME_WAIT状态的持续时间时两倍的MSL，因此TCP允许一个方向的数据在MSL秒内丢失，也允许回复在一个MSL秒内丢失。通过强制执行此规则，可以保证当一个TCP连接成功建立时，来自先前连接的所有旧的副本在网络中已过期。</p>\n"},{"title":"如何在服务端启用BBR拥塞控制算法","cover":"https://s2.loli.net/2022/12/26/zN9BEclKUFpyDtw.png","date":"2022-12-25T17:09:26.000Z","_content":"\n\n\n2016 年底，Google 发表了一篇优化 TCP 传输算法的文章，极大的提高了 TCP 的 throughput（吞吐量），并且已经集成到 Linux 4.9 内核中。这个算法就是BBR(Bottleneck Bandwidth and Round-trip propagation time)。\n\n\n\n作为一个软件源镜像站，启用BBR将显著提升服务器的带宽利用率。但由于服务器所用的CentOS内核版本过低，我们需要先升级系统内核。\n\n### 更新内核包\n\n1. 执行以下命令，查看当前 Kernel 版本。\n\n   ```shell\n   uname -r\n   ```\n\n2. 执行以下命令，更新软件包。\n\n   ```shell\n   yum update -y\n   ```\n\n3. 执行以下命令，导入 ELRepo 公钥。\n\n   ```shell\n   rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\n   ```\n\n4. 执行以下命令，安装 ELRepo 的 yum 源。\n\n   ```shell\n   yum install https://www.elrepo.org/elrepo-release-7.0-4.el7.elrepo.noarch.rpm\n   ```\n\n### 安装新内核\n\n1. 执行以下命令，查看 ELRepo 仓库下当前系统支持的内核包。\n\n   ```shell\n   yum --disablerepo=\"*\" --enablerepo=\"elrepo-kernel\" list available\n   ```\n\n2. 执行以下命令，安装最新的主线稳定内核。\n\n   ```shell\n   yum --enablerepo=elrepo-kernel install kernel-ml\n   ```\n\n### 更改 grub 配置\n\n1. 执行以下命令，打开 `/etc/default/grub` 文件\n\n   ```shell\n   nano /etc/default/grub\n   ```\n\n2. 将 `GRUB_DEFAULT=saved` 修改为 `GRUB_DEFAULT=0`。\n\n3. 执行以下命令，重新生成 Kernel 配置。\n\n   ```shell\n   grub2-mkconfig -o /boot/grub2/grub.cfg\n   ```\n\n4. 重启机器\n\n   ```shell\n   reboot\n   ```\n\n### 开启BBR\n\n1. 执行以下命令，编辑`/etc/sysctl.conf`文件。\n\n   ```shell\n   vim /etc/sysctl.conf\n   ```\n\n2.  切换至编辑模式，添加如下内容。\n\n   ```shell\n   net.core.default_qdisc=fq\n   net.ipv4.tcp_congestion_control=bbr\n   ```\n\n3. 执行以下命令，从`/etc/sysctl.conf`配置文件中加载内核参数设置。\n\n   ```shell\n   sysctl -p\n   ```\n\n4. 依次执行以下命令，验证是否成功开启了 BBR。\n\n   ```shell\n   sysctl net.ipv4.tcp_congestion_control\n   # 显示如下内容即可：\n   # net.ipv4.tcp_congestion_control = bbr\n   ```\n\n   ```shell\n   sysctl net.ipv4.tcp_available_congestion_control\n   # 显示如下内容即可：\n   # net.ipv4.tcp_available_congestion_control = reno cubic bbr\n   ```\n\n5. 执行以下命令，查看内核模块是否加载。\n\n   ```shell\n   lsmod | grep bbr\n   ```","source":"_posts/bbr.md","raw":"---\ntitle: 如何在服务端启用BBR拥塞控制算法\ncover: https://s2.loli.net/2022/12/26/zN9BEclKUFpyDtw.png\ntags: Devops\ndate: 2022/12/26 1:09:26\n---\n\n\n\n2016 年底，Google 发表了一篇优化 TCP 传输算法的文章，极大的提高了 TCP 的 throughput（吞吐量），并且已经集成到 Linux 4.9 内核中。这个算法就是BBR(Bottleneck Bandwidth and Round-trip propagation time)。\n\n\n\n作为一个软件源镜像站，启用BBR将显著提升服务器的带宽利用率。但由于服务器所用的CentOS内核版本过低，我们需要先升级系统内核。\n\n### 更新内核包\n\n1. 执行以下命令，查看当前 Kernel 版本。\n\n   ```shell\n   uname -r\n   ```\n\n2. 执行以下命令，更新软件包。\n\n   ```shell\n   yum update -y\n   ```\n\n3. 执行以下命令，导入 ELRepo 公钥。\n\n   ```shell\n   rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\n   ```\n\n4. 执行以下命令，安装 ELRepo 的 yum 源。\n\n   ```shell\n   yum install https://www.elrepo.org/elrepo-release-7.0-4.el7.elrepo.noarch.rpm\n   ```\n\n### 安装新内核\n\n1. 执行以下命令，查看 ELRepo 仓库下当前系统支持的内核包。\n\n   ```shell\n   yum --disablerepo=\"*\" --enablerepo=\"elrepo-kernel\" list available\n   ```\n\n2. 执行以下命令，安装最新的主线稳定内核。\n\n   ```shell\n   yum --enablerepo=elrepo-kernel install kernel-ml\n   ```\n\n### 更改 grub 配置\n\n1. 执行以下命令，打开 `/etc/default/grub` 文件\n\n   ```shell\n   nano /etc/default/grub\n   ```\n\n2. 将 `GRUB_DEFAULT=saved` 修改为 `GRUB_DEFAULT=0`。\n\n3. 执行以下命令，重新生成 Kernel 配置。\n\n   ```shell\n   grub2-mkconfig -o /boot/grub2/grub.cfg\n   ```\n\n4. 重启机器\n\n   ```shell\n   reboot\n   ```\n\n### 开启BBR\n\n1. 执行以下命令，编辑`/etc/sysctl.conf`文件。\n\n   ```shell\n   vim /etc/sysctl.conf\n   ```\n\n2.  切换至编辑模式，添加如下内容。\n\n   ```shell\n   net.core.default_qdisc=fq\n   net.ipv4.tcp_congestion_control=bbr\n   ```\n\n3. 执行以下命令，从`/etc/sysctl.conf`配置文件中加载内核参数设置。\n\n   ```shell\n   sysctl -p\n   ```\n\n4. 依次执行以下命令，验证是否成功开启了 BBR。\n\n   ```shell\n   sysctl net.ipv4.tcp_congestion_control\n   # 显示如下内容即可：\n   # net.ipv4.tcp_congestion_control = bbr\n   ```\n\n   ```shell\n   sysctl net.ipv4.tcp_available_congestion_control\n   # 显示如下内容即可：\n   # net.ipv4.tcp_available_congestion_control = reno cubic bbr\n   ```\n\n5. 执行以下命令，查看内核模块是否加载。\n\n   ```shell\n   lsmod | grep bbr\n   ```","slug":"bbr","published":1,"updated":"2022-12-31T10:07:01.723Z","_id":"clc48t54x0000tcg72gso30uk","comments":1,"layout":"post","photos":[],"link":"","content":"<p>2016 年底，Google 发表了一篇优化 TCP 传输算法的文章，极大的提高了 TCP 的 throughput（吞吐量），并且已经集成到 Linux 4.9 内核中。这个算法就是BBR(Bottleneck Bandwidth and Round-trip propagation time)。</p>\n<p>作为一个软件源镜像站，启用BBR将显著提升服务器的带宽利用率。但由于服务器所用的CentOS内核版本过低，我们需要先升级系统内核。</p>\n<h3 id=\"更新内核包\"><a href=\"#更新内核包\" class=\"headerlink\" title=\"更新内核包\"></a>更新内核包</h3><ol>\n<li><p>执行以下命令，查看当前 Kernel 版本。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uname -r</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>执行以下命令，更新软件包。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum update -y</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>执行以下命令，导入 ELRepo 公钥。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>执行以下命令，安装 ELRepo 的 yum 源。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install https://www.elrepo.org/elrepo-release-7.0-4.el7.elrepo.noarch.rpm</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"安装新内核\"><a href=\"#安装新内核\" class=\"headerlink\" title=\"安装新内核\"></a>安装新内核</h3><ol>\n<li><p>执行以下命令，查看 ELRepo 仓库下当前系统支持的内核包。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum --disablerepo=&quot;*&quot; --enablerepo=&quot;elrepo-kernel&quot; list available</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>执行以下命令，安装最新的主线稳定内核。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum --enablerepo=elrepo-kernel install kernel-ml</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"更改-grub-配置\"><a href=\"#更改-grub-配置\" class=\"headerlink\" title=\"更改 grub 配置\"></a>更改 grub 配置</h3><ol>\n<li><p>执行以下命令，打开 <code>/etc/default/grub</code> 文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nano /etc/default/grub</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>将 <code>GRUB_DEFAULT=saved</code> 修改为 <code>GRUB_DEFAULT=0</code>。</p>\n</li>\n<li><p>执行以下命令，重新生成 Kernel 配置。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grub2-mkconfig -o /boot/grub2/grub.cfg</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>重启机器</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reboot</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"开启BBR\"><a href=\"#开启BBR\" class=\"headerlink\" title=\"开启BBR\"></a>开启BBR</h3><ol>\n<li><p>执行以下命令，编辑<code>/etc/sysctl.conf</code>文件。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/sysctl.conf</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>切换至编辑模式，添加如下内容。</p>\n</li>\n</ol>\n   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">net.core.default_qdisc=fq</span><br><span class=\"line\">net.ipv4.tcp_congestion_control=bbr</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li><p>执行以下命令，从<code>/etc/sysctl.conf</code>配置文件中加载内核参数设置。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysctl -p</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>依次执行以下命令，验证是否成功开启了 BBR。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysctl net.ipv4.tcp_congestion_control</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">显示如下内容即可：</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">net.ipv4.tcp_congestion_control = bbr</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysctl net.ipv4.tcp_available_congestion_control</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">显示如下内容即可：</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">net.ipv4.tcp_available_congestion_control = reno cubic bbr</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>执行以下命令，查看内核模块是否加载。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lsmod | grep bbr</span><br></pre></td></tr></table></figure></li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<p>2016 年底，Google 发表了一篇优化 TCP 传输算法的文章，极大的提高了 TCP 的 throughput（吞吐量），并且已经集成到 Linux 4.9 内核中。这个算法就是BBR(Bottleneck Bandwidth and Round-trip propagation time)。</p>\n<p>作为一个软件源镜像站，启用BBR将显著提升服务器的带宽利用率。但由于服务器所用的CentOS内核版本过低，我们需要先升级系统内核。</p>\n<h3 id=\"更新内核包\"><a href=\"#更新内核包\" class=\"headerlink\" title=\"更新内核包\"></a>更新内核包</h3><ol>\n<li><p>执行以下命令，查看当前 Kernel 版本。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uname -r</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>执行以下命令，更新软件包。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum update -y</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>执行以下命令，导入 ELRepo 公钥。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>执行以下命令，安装 ELRepo 的 yum 源。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install https://www.elrepo.org/elrepo-release-7.0-4.el7.elrepo.noarch.rpm</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"安装新内核\"><a href=\"#安装新内核\" class=\"headerlink\" title=\"安装新内核\"></a>安装新内核</h3><ol>\n<li><p>执行以下命令，查看 ELRepo 仓库下当前系统支持的内核包。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum --disablerepo=&quot;*&quot; --enablerepo=&quot;elrepo-kernel&quot; list available</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>执行以下命令，安装最新的主线稳定内核。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum --enablerepo=elrepo-kernel install kernel-ml</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"更改-grub-配置\"><a href=\"#更改-grub-配置\" class=\"headerlink\" title=\"更改 grub 配置\"></a>更改 grub 配置</h3><ol>\n<li><p>执行以下命令，打开 <code>/etc/default/grub</code> 文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nano /etc/default/grub</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>将 <code>GRUB_DEFAULT=saved</code> 修改为 <code>GRUB_DEFAULT=0</code>。</p>\n</li>\n<li><p>执行以下命令，重新生成 Kernel 配置。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grub2-mkconfig -o /boot/grub2/grub.cfg</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>重启机器</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reboot</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"开启BBR\"><a href=\"#开启BBR\" class=\"headerlink\" title=\"开启BBR\"></a>开启BBR</h3><ol>\n<li><p>执行以下命令，编辑<code>/etc/sysctl.conf</code>文件。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/sysctl.conf</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>切换至编辑模式，添加如下内容。</p>\n</li>\n</ol>\n   <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">net.core.default_qdisc=fq</span><br><span class=\"line\">net.ipv4.tcp_congestion_control=bbr</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li><p>执行以下命令，从<code>/etc/sysctl.conf</code>配置文件中加载内核参数设置。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysctl -p</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>依次执行以下命令，验证是否成功开启了 BBR。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysctl net.ipv4.tcp_congestion_control</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">显示如下内容即可：</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">net.ipv4.tcp_congestion_control = bbr</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sysctl net.ipv4.tcp_available_congestion_control</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">显示如下内容即可：</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">net.ipv4.tcp_available_congestion_control = reno cubic bbr</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>执行以下命令，查看内核模块是否加载。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lsmod | grep bbr</span><br></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":"HTTP/2带来了什么特性","cover":"https://s2.loli.net/2022/12/26/zWCEr8DyHUe1QcK.png","date":"2022-12-26T03:12:45.000Z","_content":"QLUT镜像站在圣诞节维护中带来了HTTP/2协议的支持。新协议提供了诸多新特性。\n\n### 二进制分帧\nHTTP/2所有性能增强的核心在于新的二进制分帧层，如下图所示，它是所有其他功能和性能优化的基础，它定义了如何封装HTTP消息并在客户端与服务器之间传输。\n\n![image.png](https://s2.loli.net/2022/12/26/HzTpYtJGe2jV7xI.png)\n\nHTTP/2没有改动HTTP的应用语义，仍然使用HTTP的请求方法、状态码和头字段等规则，它主要修改了HTTP的报文传输格式。HTTP/1.1协议以换行符作为纯文本的分隔符，而HTTP/2将所有传输的信息分割为更小的消息和帧，并采用二进制格式对它们编码，这些帧对应着特定数据流中的消息，他们都在一个TCP连接内复用。\n\n### 优先级排序\n将HTTP消息分解为很多独立的帧之后就可以复用多个数据流中的帧，客户端和服务器交错发送和传输这些帧的顺序就成为关键的性能决定因素。HTTP/2允许每个数据流都有一个关联的权重和依赖关系，数据流依赖关系和权重的组合明确表达了资源优先级，这是一种用于提升浏览性能的关键功能。HTTP/2协议还允许客户端随时更新这些优先级，我们可以根据用户互动和其他信号更改依赖关系和重新分配权重，这进一步优化了浏览器性能。\n\n### 首部压缩\nHTTP每次请求或响应都会携带首部信息用于描述资源属性。HTTP/1.1使用文本的形式传输消息头，消息头中携带cookie每次都需要重复传输几百到几千的字节，这十分占用资源。\n\nHTTP/2使用了HPACK算法来压缩头字段，这种压缩格式对传输的头字段进行编码，减少了头字段的大小。同时，在两端维护了索引表，用于记录出现过的头字段，后面在传输过程中就可以传输已经记录过的头字段的索引号，对端收到数据后就可以通过索引号找到对应的值。\n\n### 多路复用\n多路复用允许同时通过单一的HTTP/2连接发起多重的请求-响应消息，实现多流并行而并不依赖多个TCP连接，HTTP/2把HTTP协议通信的基本单位缩小为一个一个的帧，这些帧对应着逻辑流中的消息，并行地在同一个TCP连接上双向交换消息。\n\nHTTP/2基于二进制分帧层，HTTP/2可以在共享TCP连接的基础上同时发送请求和响应。HTTP消息被分解为独立的帧，而不破坏消息本身的语义交错发出去，在另一端根据流标识符和首部将他们重新组装起来。通过多路复用技术，可以避免HTTP旧版本的消息头阻塞问题，极大提高传输性能。\n\n### 服务器推送\nHTTP2.0的一个强大的新功能，就是服务器可以对一个客户端请求发送多个响应。服务器向客户端推送资源无需客户端明确的请求。服务端根据客户端的请求，提前返回多个响应，推送额外的资源给客户端。如下图所示，客户端请求stream 1，服务端在返回stream 1的消息的同时推送了stream 2和stream 4。\n\n![image.png](https://s2.loli.net/2022/12/26/u9IdlQkWAiYZHvF.png)\n\n服务端推送是一种在客户端请求之前发送数据的机制。在HTTP/2中，服务器可以对一个客户端的请求发送多个响应。如果一个请求是由你的主页发送的，服务器可能会响应主页内容、logo以及样式表，因为服务端知道客户端会用到这些东西。这样不但减轻了数据传送冗余步骤，也加快了页面响应的速度，提高了用户体验。","source":"_posts/abouthttp2.md","raw":"---\ntitle: HTTP/2带来了什么特性\ncover: https://s2.loli.net/2022/12/26/zWCEr8DyHUe1QcK.png\ntags: Computer Network\ndate: 2022/12/26 11:12:45\n---\nQLUT镜像站在圣诞节维护中带来了HTTP/2协议的支持。新协议提供了诸多新特性。\n\n### 二进制分帧\nHTTP/2所有性能增强的核心在于新的二进制分帧层，如下图所示，它是所有其他功能和性能优化的基础，它定义了如何封装HTTP消息并在客户端与服务器之间传输。\n\n![image.png](https://s2.loli.net/2022/12/26/HzTpYtJGe2jV7xI.png)\n\nHTTP/2没有改动HTTP的应用语义，仍然使用HTTP的请求方法、状态码和头字段等规则，它主要修改了HTTP的报文传输格式。HTTP/1.1协议以换行符作为纯文本的分隔符，而HTTP/2将所有传输的信息分割为更小的消息和帧，并采用二进制格式对它们编码，这些帧对应着特定数据流中的消息，他们都在一个TCP连接内复用。\n\n### 优先级排序\n将HTTP消息分解为很多独立的帧之后就可以复用多个数据流中的帧，客户端和服务器交错发送和传输这些帧的顺序就成为关键的性能决定因素。HTTP/2允许每个数据流都有一个关联的权重和依赖关系，数据流依赖关系和权重的组合明确表达了资源优先级，这是一种用于提升浏览性能的关键功能。HTTP/2协议还允许客户端随时更新这些优先级，我们可以根据用户互动和其他信号更改依赖关系和重新分配权重，这进一步优化了浏览器性能。\n\n### 首部压缩\nHTTP每次请求或响应都会携带首部信息用于描述资源属性。HTTP/1.1使用文本的形式传输消息头，消息头中携带cookie每次都需要重复传输几百到几千的字节，这十分占用资源。\n\nHTTP/2使用了HPACK算法来压缩头字段，这种压缩格式对传输的头字段进行编码，减少了头字段的大小。同时，在两端维护了索引表，用于记录出现过的头字段，后面在传输过程中就可以传输已经记录过的头字段的索引号，对端收到数据后就可以通过索引号找到对应的值。\n\n### 多路复用\n多路复用允许同时通过单一的HTTP/2连接发起多重的请求-响应消息，实现多流并行而并不依赖多个TCP连接，HTTP/2把HTTP协议通信的基本单位缩小为一个一个的帧，这些帧对应着逻辑流中的消息，并行地在同一个TCP连接上双向交换消息。\n\nHTTP/2基于二进制分帧层，HTTP/2可以在共享TCP连接的基础上同时发送请求和响应。HTTP消息被分解为独立的帧，而不破坏消息本身的语义交错发出去，在另一端根据流标识符和首部将他们重新组装起来。通过多路复用技术，可以避免HTTP旧版本的消息头阻塞问题，极大提高传输性能。\n\n### 服务器推送\nHTTP2.0的一个强大的新功能，就是服务器可以对一个客户端请求发送多个响应。服务器向客户端推送资源无需客户端明确的请求。服务端根据客户端的请求，提前返回多个响应，推送额外的资源给客户端。如下图所示，客户端请求stream 1，服务端在返回stream 1的消息的同时推送了stream 2和stream 4。\n\n![image.png](https://s2.loli.net/2022/12/26/u9IdlQkWAiYZHvF.png)\n\n服务端推送是一种在客户端请求之前发送数据的机制。在HTTP/2中，服务器可以对一个客户端的请求发送多个响应。如果一个请求是由你的主页发送的，服务器可能会响应主页内容、logo以及样式表，因为服务端知道客户端会用到这些东西。这样不但减轻了数据传送冗余步骤，也加快了页面响应的速度，提高了用户体验。","slug":"abouthttp2","published":1,"updated":"2022-12-31T10:07:01.723Z","_id":"clc48t54y0001tcg7g6qy4mm0","comments":1,"layout":"post","photos":[],"link":"","content":"<p>QLUT镜像站在圣诞节维护中带来了HTTP&#x2F;2协议的支持。新协议提供了诸多新特性。</p>\n<h3 id=\"二进制分帧\"><a href=\"#二进制分帧\" class=\"headerlink\" title=\"二进制分帧\"></a>二进制分帧</h3><p>HTTP&#x2F;2所有性能增强的核心在于新的二进制分帧层，如下图所示，它是所有其他功能和性能优化的基础，它定义了如何封装HTTP消息并在客户端与服务器之间传输。</p>\n<p><img src=\"https://s2.loli.net/2022/12/26/HzTpYtJGe2jV7xI.png\" alt=\"image.png\"></p>\n<p>HTTP&#x2F;2没有改动HTTP的应用语义，仍然使用HTTP的请求方法、状态码和头字段等规则，它主要修改了HTTP的报文传输格式。HTTP&#x2F;1.1协议以换行符作为纯文本的分隔符，而HTTP&#x2F;2将所有传输的信息分割为更小的消息和帧，并采用二进制格式对它们编码，这些帧对应着特定数据流中的消息，他们都在一个TCP连接内复用。</p>\n<h3 id=\"优先级排序\"><a href=\"#优先级排序\" class=\"headerlink\" title=\"优先级排序\"></a>优先级排序</h3><p>将HTTP消息分解为很多独立的帧之后就可以复用多个数据流中的帧，客户端和服务器交错发送和传输这些帧的顺序就成为关键的性能决定因素。HTTP&#x2F;2允许每个数据流都有一个关联的权重和依赖关系，数据流依赖关系和权重的组合明确表达了资源优先级，这是一种用于提升浏览性能的关键功能。HTTP&#x2F;2协议还允许客户端随时更新这些优先级，我们可以根据用户互动和其他信号更改依赖关系和重新分配权重，这进一步优化了浏览器性能。</p>\n<h3 id=\"首部压缩\"><a href=\"#首部压缩\" class=\"headerlink\" title=\"首部压缩\"></a>首部压缩</h3><p>HTTP每次请求或响应都会携带首部信息用于描述资源属性。HTTP&#x2F;1.1使用文本的形式传输消息头，消息头中携带cookie每次都需要重复传输几百到几千的字节，这十分占用资源。</p>\n<p>HTTP&#x2F;2使用了HPACK算法来压缩头字段，这种压缩格式对传输的头字段进行编码，减少了头字段的大小。同时，在两端维护了索引表，用于记录出现过的头字段，后面在传输过程中就可以传输已经记录过的头字段的索引号，对端收到数据后就可以通过索引号找到对应的值。</p>\n<h3 id=\"多路复用\"><a href=\"#多路复用\" class=\"headerlink\" title=\"多路复用\"></a>多路复用</h3><p>多路复用允许同时通过单一的HTTP&#x2F;2连接发起多重的请求-响应消息，实现多流并行而并不依赖多个TCP连接，HTTP&#x2F;2把HTTP协议通信的基本单位缩小为一个一个的帧，这些帧对应着逻辑流中的消息，并行地在同一个TCP连接上双向交换消息。</p>\n<p>HTTP&#x2F;2基于二进制分帧层，HTTP&#x2F;2可以在共享TCP连接的基础上同时发送请求和响应。HTTP消息被分解为独立的帧，而不破坏消息本身的语义交错发出去，在另一端根据流标识符和首部将他们重新组装起来。通过多路复用技术，可以避免HTTP旧版本的消息头阻塞问题，极大提高传输性能。</p>\n<h3 id=\"服务器推送\"><a href=\"#服务器推送\" class=\"headerlink\" title=\"服务器推送\"></a>服务器推送</h3><p>HTTP2.0的一个强大的新功能，就是服务器可以对一个客户端请求发送多个响应。服务器向客户端推送资源无需客户端明确的请求。服务端根据客户端的请求，提前返回多个响应，推送额外的资源给客户端。如下图所示，客户端请求stream 1，服务端在返回stream 1的消息的同时推送了stream 2和stream 4。</p>\n<p><img src=\"https://s2.loli.net/2022/12/26/u9IdlQkWAiYZHvF.png\" alt=\"image.png\"></p>\n<p>服务端推送是一种在客户端请求之前发送数据的机制。在HTTP&#x2F;2中，服务器可以对一个客户端的请求发送多个响应。如果一个请求是由你的主页发送的，服务器可能会响应主页内容、logo以及样式表，因为服务端知道客户端会用到这些东西。这样不但减轻了数据传送冗余步骤，也加快了页面响应的速度，提高了用户体验。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>QLUT镜像站在圣诞节维护中带来了HTTP&#x2F;2协议的支持。新协议提供了诸多新特性。</p>\n<h3 id=\"二进制分帧\"><a href=\"#二进制分帧\" class=\"headerlink\" title=\"二进制分帧\"></a>二进制分帧</h3><p>HTTP&#x2F;2所有性能增强的核心在于新的二进制分帧层，如下图所示，它是所有其他功能和性能优化的基础，它定义了如何封装HTTP消息并在客户端与服务器之间传输。</p>\n<p><img src=\"https://s2.loli.net/2022/12/26/HzTpYtJGe2jV7xI.png\" alt=\"image.png\"></p>\n<p>HTTP&#x2F;2没有改动HTTP的应用语义，仍然使用HTTP的请求方法、状态码和头字段等规则，它主要修改了HTTP的报文传输格式。HTTP&#x2F;1.1协议以换行符作为纯文本的分隔符，而HTTP&#x2F;2将所有传输的信息分割为更小的消息和帧，并采用二进制格式对它们编码，这些帧对应着特定数据流中的消息，他们都在一个TCP连接内复用。</p>\n<h3 id=\"优先级排序\"><a href=\"#优先级排序\" class=\"headerlink\" title=\"优先级排序\"></a>优先级排序</h3><p>将HTTP消息分解为很多独立的帧之后就可以复用多个数据流中的帧，客户端和服务器交错发送和传输这些帧的顺序就成为关键的性能决定因素。HTTP&#x2F;2允许每个数据流都有一个关联的权重和依赖关系，数据流依赖关系和权重的组合明确表达了资源优先级，这是一种用于提升浏览性能的关键功能。HTTP&#x2F;2协议还允许客户端随时更新这些优先级，我们可以根据用户互动和其他信号更改依赖关系和重新分配权重，这进一步优化了浏览器性能。</p>\n<h3 id=\"首部压缩\"><a href=\"#首部压缩\" class=\"headerlink\" title=\"首部压缩\"></a>首部压缩</h3><p>HTTP每次请求或响应都会携带首部信息用于描述资源属性。HTTP&#x2F;1.1使用文本的形式传输消息头，消息头中携带cookie每次都需要重复传输几百到几千的字节，这十分占用资源。</p>\n<p>HTTP&#x2F;2使用了HPACK算法来压缩头字段，这种压缩格式对传输的头字段进行编码，减少了头字段的大小。同时，在两端维护了索引表，用于记录出现过的头字段，后面在传输过程中就可以传输已经记录过的头字段的索引号，对端收到数据后就可以通过索引号找到对应的值。</p>\n<h3 id=\"多路复用\"><a href=\"#多路复用\" class=\"headerlink\" title=\"多路复用\"></a>多路复用</h3><p>多路复用允许同时通过单一的HTTP&#x2F;2连接发起多重的请求-响应消息，实现多流并行而并不依赖多个TCP连接，HTTP&#x2F;2把HTTP协议通信的基本单位缩小为一个一个的帧，这些帧对应着逻辑流中的消息，并行地在同一个TCP连接上双向交换消息。</p>\n<p>HTTP&#x2F;2基于二进制分帧层，HTTP&#x2F;2可以在共享TCP连接的基础上同时发送请求和响应。HTTP消息被分解为独立的帧，而不破坏消息本身的语义交错发出去，在另一端根据流标识符和首部将他们重新组装起来。通过多路复用技术，可以避免HTTP旧版本的消息头阻塞问题，极大提高传输性能。</p>\n<h3 id=\"服务器推送\"><a href=\"#服务器推送\" class=\"headerlink\" title=\"服务器推送\"></a>服务器推送</h3><p>HTTP2.0的一个强大的新功能，就是服务器可以对一个客户端请求发送多个响应。服务器向客户端推送资源无需客户端明确的请求。服务端根据客户端的请求，提前返回多个响应，推送额外的资源给客户端。如下图所示，客户端请求stream 1，服务端在返回stream 1的消息的同时推送了stream 2和stream 4。</p>\n<p><img src=\"https://s2.loli.net/2022/12/26/u9IdlQkWAiYZHvF.png\" alt=\"image.png\"></p>\n<p>服务端推送是一种在客户端请求之前发送数据的机制。在HTTP&#x2F;2中，服务器可以对一个客户端的请求发送多个响应。如果一个请求是由你的主页发送的，服务器可能会响应主页内容、logo以及样式表，因为服务端知道客户端会用到这些东西。这样不但减轻了数据传送冗余步骤，也加快了页面响应的速度，提高了用户体验。</p>\n"},{"title":"如何在Nginx上支持HTTP/2","cover":"https://s2.loli.net/2022/12/26/zN9BEclKUFpyDtw.png","date":"2022-12-25T17:09:26.000Z","_content":"\nHTTP/2（原名HTTP 2.0）即超文本传输协议第二版，使用于万维网。HTTP/2主要基于SPDY协议，通过对HTTP头字段进行数据压缩、对数据传输采用多路复用和增加服务端推送等举措，来减少网络延迟，提高客户端的页面加载速度。HTTP/2没有改动HTTP的应用语义，仍然使用HTTP的请求方法、状态码和头字段等规则，它主要修改了HTTP的报文传输格式，通过引入二进制分帧实现性能的提升。\n\n### 编译带有HTTP/2支持的Nginx\n\n默认编译的 Nginx 并不包含 HTTP/2 模块，我们需要加入参数来编译.\n\n我们首先记录下Nginx原先的编译配置：\n\n```shell\n/usr/local/nginx/sbin/nginx -V\n```\n\n得到下面的内容：\n\n```shell\nnginx version: nginx/1.20.2\nbuilt by gcc 4.8.5 20150623 (Red Hat 4.8.5-44) (GCC)\nbuilt with OpenSSL 1.0.2k-fips  26 Jan 2017\nTLS SNI support enabled\nconfigure arguments: --prefix=/usr/local/nginx --add-dynamic-module=../ngx-fancyindex-master/ --add-dynamic-module=../njs/nginx/ --with-http_addition_module --with-http_ssl_module --with-compat --with-http_stub_status_module\n```\n\n\n\n我们需要将到Nginx的`configure arguments`复制下来，到安装包的`./configure`中加入`--with-http_v2_module`，如果没有ssl支持，还需要加入`--with-http_ssl_module`\n\n参考：\n\n```shell\n./configure --prefix=/usr/local/nginx --add-dynamic-module=../ngx-fancyindex-master/ --add-dynamic-module=../njs/nginx/ --with-http_addition_module --with-http_ssl_module --with-compat --with-http_stub_status_module --with-http_v2_module --with-http_sub_module\n```\n\n### Nginx配置文件\n\n主要是配置 Nginx 的 `server` 块：在`listen 443 ssl`的后面加一个`http2`即可\n\n```nginx\nserver {\nlisten 443 ssl http2 ;\nserver_name mirrors.qlu.edu.cn;\n\nssl_certificate /.../public.crt;\nssl_certificate_key /.../private.key;\n\n...\n```\n\n","source":"_posts/http2.md","raw":"---\ntitle: 如何在Nginx上支持HTTP/2\ncover: https://s2.loli.net/2022/12/26/zN9BEclKUFpyDtw.png\ntags: Devops\ndate: 2022/12/26 1:09:26\n---\n\nHTTP/2（原名HTTP 2.0）即超文本传输协议第二版，使用于万维网。HTTP/2主要基于SPDY协议，通过对HTTP头字段进行数据压缩、对数据传输采用多路复用和增加服务端推送等举措，来减少网络延迟，提高客户端的页面加载速度。HTTP/2没有改动HTTP的应用语义，仍然使用HTTP的请求方法、状态码和头字段等规则，它主要修改了HTTP的报文传输格式，通过引入二进制分帧实现性能的提升。\n\n### 编译带有HTTP/2支持的Nginx\n\n默认编译的 Nginx 并不包含 HTTP/2 模块，我们需要加入参数来编译.\n\n我们首先记录下Nginx原先的编译配置：\n\n```shell\n/usr/local/nginx/sbin/nginx -V\n```\n\n得到下面的内容：\n\n```shell\nnginx version: nginx/1.20.2\nbuilt by gcc 4.8.5 20150623 (Red Hat 4.8.5-44) (GCC)\nbuilt with OpenSSL 1.0.2k-fips  26 Jan 2017\nTLS SNI support enabled\nconfigure arguments: --prefix=/usr/local/nginx --add-dynamic-module=../ngx-fancyindex-master/ --add-dynamic-module=../njs/nginx/ --with-http_addition_module --with-http_ssl_module --with-compat --with-http_stub_status_module\n```\n\n\n\n我们需要将到Nginx的`configure arguments`复制下来，到安装包的`./configure`中加入`--with-http_v2_module`，如果没有ssl支持，还需要加入`--with-http_ssl_module`\n\n参考：\n\n```shell\n./configure --prefix=/usr/local/nginx --add-dynamic-module=../ngx-fancyindex-master/ --add-dynamic-module=../njs/nginx/ --with-http_addition_module --with-http_ssl_module --with-compat --with-http_stub_status_module --with-http_v2_module --with-http_sub_module\n```\n\n### Nginx配置文件\n\n主要是配置 Nginx 的 `server` 块：在`listen 443 ssl`的后面加一个`http2`即可\n\n```nginx\nserver {\nlisten 443 ssl http2 ;\nserver_name mirrors.qlu.edu.cn;\n\nssl_certificate /.../public.crt;\nssl_certificate_key /.../private.key;\n\n...\n```\n\n","slug":"http2","published":1,"updated":"2022-12-31T10:07:01.723Z","_id":"clc48t54y0003tcg73pd226hn","comments":1,"layout":"post","photos":[],"link":"","content":"<p>HTTP&#x2F;2（原名HTTP 2.0）即超文本传输协议第二版，使用于万维网。HTTP&#x2F;2主要基于SPDY协议，通过对HTTP头字段进行数据压缩、对数据传输采用多路复用和增加服务端推送等举措，来减少网络延迟，提高客户端的页面加载速度。HTTP&#x2F;2没有改动HTTP的应用语义，仍然使用HTTP的请求方法、状态码和头字段等规则，它主要修改了HTTP的报文传输格式，通过引入二进制分帧实现性能的提升。</p>\n<h3 id=\"编译带有HTTP-x2F-2支持的Nginx\"><a href=\"#编译带有HTTP-x2F-2支持的Nginx\" class=\"headerlink\" title=\"编译带有HTTP&#x2F;2支持的Nginx\"></a>编译带有HTTP&#x2F;2支持的Nginx</h3><p>默认编译的 Nginx 并不包含 HTTP&#x2F;2 模块，我们需要加入参数来编译.</p>\n<p>我们首先记录下Nginx原先的编译配置：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/local/nginx/sbin/nginx -V</span><br></pre></td></tr></table></figure>\n\n<p>得到下面的内容：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx version: nginx/1.20.2</span><br><span class=\"line\">built by gcc 4.8.5 20150623 (Red Hat 4.8.5-44) (GCC)</span><br><span class=\"line\">built with OpenSSL 1.0.2k-fips  26 Jan 2017</span><br><span class=\"line\">TLS SNI support enabled</span><br><span class=\"line\">configure arguments: --prefix=/usr/local/nginx --add-dynamic-module=../ngx-fancyindex-master/ --add-dynamic-module=../njs/nginx/ --with-http_addition_module --with-http_ssl_module --with-compat --with-http_stub_status_module</span><br></pre></td></tr></table></figure>\n\n\n\n<p>我们需要将到Nginx的<code>configure arguments</code>复制下来，到安装包的<code>./configure</code>中加入<code>--with-http_v2_module</code>，如果没有ssl支持，还需要加入<code>--with-http_ssl_module</code></p>\n<p>参考：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix=/usr/local/nginx --add-dynamic-module=../ngx-fancyindex-master/ --add-dynamic-module=../njs/nginx/ --with-http_addition_module --with-http_ssl_module --with-compat --with-http_stub_status_module --with-http_v2_module --with-http_sub_module</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Nginx配置文件\"><a href=\"#Nginx配置文件\" class=\"headerlink\" title=\"Nginx配置文件\"></a>Nginx配置文件</h3><p>主要是配置 Nginx 的 <code>server</code> 块：在<code>listen 443 ssl</code>的后面加一个<code>http2</code>即可</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">listen</span> <span class=\"number\">443</span> ssl http2 ;</span><br><span class=\"line\"><span class=\"attribute\">server_name</span> mirrors.qlu.edu.cn;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attribute\">ssl_certificate</span> /.../public.crt;</span><br><span class=\"line\"><span class=\"attribute\">ssl_certificate_key</span> /.../private.key;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>HTTP&#x2F;2（原名HTTP 2.0）即超文本传输协议第二版，使用于万维网。HTTP&#x2F;2主要基于SPDY协议，通过对HTTP头字段进行数据压缩、对数据传输采用多路复用和增加服务端推送等举措，来减少网络延迟，提高客户端的页面加载速度。HTTP&#x2F;2没有改动HTTP的应用语义，仍然使用HTTP的请求方法、状态码和头字段等规则，它主要修改了HTTP的报文传输格式，通过引入二进制分帧实现性能的提升。</p>\n<h3 id=\"编译带有HTTP-x2F-2支持的Nginx\"><a href=\"#编译带有HTTP-x2F-2支持的Nginx\" class=\"headerlink\" title=\"编译带有HTTP&#x2F;2支持的Nginx\"></a>编译带有HTTP&#x2F;2支持的Nginx</h3><p>默认编译的 Nginx 并不包含 HTTP&#x2F;2 模块，我们需要加入参数来编译.</p>\n<p>我们首先记录下Nginx原先的编译配置：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/local/nginx/sbin/nginx -V</span><br></pre></td></tr></table></figure>\n\n<p>得到下面的内容：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx version: nginx/1.20.2</span><br><span class=\"line\">built by gcc 4.8.5 20150623 (Red Hat 4.8.5-44) (GCC)</span><br><span class=\"line\">built with OpenSSL 1.0.2k-fips  26 Jan 2017</span><br><span class=\"line\">TLS SNI support enabled</span><br><span class=\"line\">configure arguments: --prefix=/usr/local/nginx --add-dynamic-module=../ngx-fancyindex-master/ --add-dynamic-module=../njs/nginx/ --with-http_addition_module --with-http_ssl_module --with-compat --with-http_stub_status_module</span><br></pre></td></tr></table></figure>\n\n\n\n<p>我们需要将到Nginx的<code>configure arguments</code>复制下来，到安装包的<code>./configure</code>中加入<code>--with-http_v2_module</code>，如果没有ssl支持，还需要加入<code>--with-http_ssl_module</code></p>\n<p>参考：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix=/usr/local/nginx --add-dynamic-module=../ngx-fancyindex-master/ --add-dynamic-module=../njs/nginx/ --with-http_addition_module --with-http_ssl_module --with-compat --with-http_stub_status_module --with-http_v2_module --with-http_sub_module</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Nginx配置文件\"><a href=\"#Nginx配置文件\" class=\"headerlink\" title=\"Nginx配置文件\"></a>Nginx配置文件</h3><p>主要是配置 Nginx 的 <code>server</code> 块：在<code>listen 443 ssl</code>的后面加一个<code>http2</code>即可</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">server</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">listen</span> <span class=\"number\">443</span> ssl http2 ;</span><br><span class=\"line\"><span class=\"attribute\">server_name</span> mirrors.qlu.edu.cn;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attribute\">ssl_certificate</span> /.../public.crt;</span><br><span class=\"line\"><span class=\"attribute\">ssl_certificate_key</span> /.../private.key;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Pytorch学习回顾--数据预处理","date":"2022-12-21T17:09:26.000Z","_content":"\n为了能用深度学习来解决现实世界的问题，我们经常从预处理原始数据开始，而不是从那些准备好的张量格式数据开始。在Python中常用的数据分析工具中，通常使用`pandas`软件包。\n\n## 读取数据集\n\n举一个例子，我们首先**创建一个人工数据集，并存储在csv（逗号分隔值）文件**`data/house_tiny.csv`中。以其他格式存储的数据也可以通过类似的方式进行处理。下面的`mkdir_if_not_exist`函数可确保目录`data`存在。\n\n下面我们将数据集按行写入CSV文件中。\n\n\n```python\nimport os\n\nos.makedirs(os.path.join('.', 'data'), exist_ok=True)\ndata_file = os.path.join('.', 'data', 'house_tiny.csv')\nwith open(data_file, 'w') as f:\n    f.write('NumRooms,Alley,Price\\n')  # 列名\n    f.write('NA,Pave,127500\\n')  # 每行表示一个数据样本\n    f.write('2,NA,106000\\n')\n    f.write('4,NA,178100\\n')\n    f.write('NA,NA,140000\\n')\n```\n\n要**从创建的CSV文件中加载原始数据集**，我们导入`pandas`包并调用`read_csv`函数。该数据集有四行三列。其中每行描述了房间数量（“NumRooms”）、巷子类型（“Alley”）和房屋价格（“Price”）。\n\n```python\n# 如果没有安装pandas，只需取消对以下行的注释：\n# !pip install pandas\nimport pandas as pd\n\ndata = pd.read_csv(data_file)\nprint(data)\n```\n\n## 处理缺失值\n\n注意，“NaN”项代表缺失值。**为了处理缺失的数据，典型的方法包括*插值*和*删除*，**其中插值用替代值代替缺失值。而删除则忽略缺失值。在**这里，我们将考虑插值**。\n\n通过位置索引`iloc`，我们将`data`分成`inputs`和`outputs`，其中前者为`data`的前两列，而后者为`data`的最后一列。对于`inputs`中缺少的数值，我们用同一列的均值替换“NaN”项。\n\n```python\ninputs, outputs = data.iloc[:, 0:2], data.iloc[:, 2]\ninputs = inputs.fillna(inputs.mean())\nprint(inputs)\n```\n\n**对于`inputs`中的类别值或离散值，我们将“NaN”视为一个类别。**由于“巷子”（“Alley”）列只接受两种类型的类别值“Pave”和“NaN”，`pandas`可以自动将此列转换为两列“Alley_Pave”和“Alley_nan”。巷子类型为“Pave”的行会将“Alley_Pave”的值设置为1，“Alley_nan”的值设置为0。缺少巷子类型的行会将“Alley_Pave”和“Alley_nan”分别设置为0和1。\n\n```python\ninputs = pd.get_dummies(inputs, dummy_na=True)\nprint(inputs)\n```\n\n## 转换为张量格式\n\n**现在`inputs`和`outputs`中的所有条目都是数值类型，它们可以转换为张量格式。**当数据采用张量格式后，可以通过在 :numref:`sec_ndarray`中引入的那些张量函数来进一步操作。\n\n```python\nimport torch\n\nX, y = torch.tensor(inputs.values), torch.tensor(outputs.values)\nX, y\n```\n\n","source":"_posts/01.md","raw":"---\ntitle: Pytorch学习回顾--数据预处理\ntags: Pytorch\ndate: 2022/12/22 1:09:26\n---\n\n为了能用深度学习来解决现实世界的问题，我们经常从预处理原始数据开始，而不是从那些准备好的张量格式数据开始。在Python中常用的数据分析工具中，通常使用`pandas`软件包。\n\n## 读取数据集\n\n举一个例子，我们首先**创建一个人工数据集，并存储在csv（逗号分隔值）文件**`data/house_tiny.csv`中。以其他格式存储的数据也可以通过类似的方式进行处理。下面的`mkdir_if_not_exist`函数可确保目录`data`存在。\n\n下面我们将数据集按行写入CSV文件中。\n\n\n```python\nimport os\n\nos.makedirs(os.path.join('.', 'data'), exist_ok=True)\ndata_file = os.path.join('.', 'data', 'house_tiny.csv')\nwith open(data_file, 'w') as f:\n    f.write('NumRooms,Alley,Price\\n')  # 列名\n    f.write('NA,Pave,127500\\n')  # 每行表示一个数据样本\n    f.write('2,NA,106000\\n')\n    f.write('4,NA,178100\\n')\n    f.write('NA,NA,140000\\n')\n```\n\n要**从创建的CSV文件中加载原始数据集**，我们导入`pandas`包并调用`read_csv`函数。该数据集有四行三列。其中每行描述了房间数量（“NumRooms”）、巷子类型（“Alley”）和房屋价格（“Price”）。\n\n```python\n# 如果没有安装pandas，只需取消对以下行的注释：\n# !pip install pandas\nimport pandas as pd\n\ndata = pd.read_csv(data_file)\nprint(data)\n```\n\n## 处理缺失值\n\n注意，“NaN”项代表缺失值。**为了处理缺失的数据，典型的方法包括*插值*和*删除*，**其中插值用替代值代替缺失值。而删除则忽略缺失值。在**这里，我们将考虑插值**。\n\n通过位置索引`iloc`，我们将`data`分成`inputs`和`outputs`，其中前者为`data`的前两列，而后者为`data`的最后一列。对于`inputs`中缺少的数值，我们用同一列的均值替换“NaN”项。\n\n```python\ninputs, outputs = data.iloc[:, 0:2], data.iloc[:, 2]\ninputs = inputs.fillna(inputs.mean())\nprint(inputs)\n```\n\n**对于`inputs`中的类别值或离散值，我们将“NaN”视为一个类别。**由于“巷子”（“Alley”）列只接受两种类型的类别值“Pave”和“NaN”，`pandas`可以自动将此列转换为两列“Alley_Pave”和“Alley_nan”。巷子类型为“Pave”的行会将“Alley_Pave”的值设置为1，“Alley_nan”的值设置为0。缺少巷子类型的行会将“Alley_Pave”和“Alley_nan”分别设置为0和1。\n\n```python\ninputs = pd.get_dummies(inputs, dummy_na=True)\nprint(inputs)\n```\n\n## 转换为张量格式\n\n**现在`inputs`和`outputs`中的所有条目都是数值类型，它们可以转换为张量格式。**当数据采用张量格式后，可以通过在 :numref:`sec_ndarray`中引入的那些张量函数来进一步操作。\n\n```python\nimport torch\n\nX, y = torch.tensor(inputs.values), torch.tensor(outputs.values)\nX, y\n```\n\n","slug":"01","published":1,"updated":"2022-12-31T10:15:29.957Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clcbtyjkh0000v1uv0rnyf8pt","content":"<p>为了能用深度学习来解决现实世界的问题，我们经常从预处理原始数据开始，而不是从那些准备好的张量格式数据开始。在Python中常用的数据分析工具中，通常使用<code>pandas</code>软件包。</p>\n<h2 id=\"读取数据集\"><a href=\"#读取数据集\" class=\"headerlink\" title=\"读取数据集\"></a>读取数据集</h2><p>举一个例子，我们首先<strong>创建一个人工数据集，并存储在csv（逗号分隔值）文件</strong><code>data/house_tiny.csv</code>中。以其他格式存储的数据也可以通过类似的方式进行处理。下面的<code>mkdir_if_not_exist</code>函数可确保目录<code>data</code>存在。</p>\n<p>下面我们将数据集按行写入CSV文件中。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"></span><br><span class=\"line\">os.makedirs(os.path.join(<span class=\"string\">&#x27;.&#x27;</span>, <span class=\"string\">&#x27;data&#x27;</span>), exist_ok=<span class=\"literal\">True</span>)</span><br><span class=\"line\">data_file = os.path.join(<span class=\"string\">&#x27;.&#x27;</span>, <span class=\"string\">&#x27;data&#x27;</span>, <span class=\"string\">&#x27;house_tiny.csv&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(data_file, <span class=\"string\">&#x27;w&#x27;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">    f.write(<span class=\"string\">&#x27;NumRooms,Alley,Price\\n&#x27;</span>)  <span class=\"comment\"># 列名</span></span><br><span class=\"line\">    f.write(<span class=\"string\">&#x27;NA,Pave,127500\\n&#x27;</span>)  <span class=\"comment\"># 每行表示一个数据样本</span></span><br><span class=\"line\">    f.write(<span class=\"string\">&#x27;2,NA,106000\\n&#x27;</span>)</span><br><span class=\"line\">    f.write(<span class=\"string\">&#x27;4,NA,178100\\n&#x27;</span>)</span><br><span class=\"line\">    f.write(<span class=\"string\">&#x27;NA,NA,140000\\n&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>要<strong>从创建的CSV文件中加载原始数据集</strong>，我们导入<code>pandas</code>包并调用<code>read_csv</code>函数。该数据集有四行三列。其中每行描述了房间数量（“NumRooms”）、巷子类型（“Alley”）和房屋价格（“Price”）。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 如果没有安装pandas，只需取消对以下行的注释：</span></span><br><span class=\"line\"><span class=\"comment\"># !pip install pandas</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"></span><br><span class=\"line\">data = pd.read_csv(data_file)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(data)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"处理缺失值\"><a href=\"#处理缺失值\" class=\"headerlink\" title=\"处理缺失值\"></a>处理缺失值</h2><p>注意，“NaN”项代表缺失值。<strong>为了处理缺失的数据，典型的方法包括<em>插值</em>和<em>删除</em>，</strong>其中插值用替代值代替缺失值。而删除则忽略缺失值。在<strong>这里，我们将考虑插值</strong>。</p>\n<p>通过位置索引<code>iloc</code>，我们将<code>data</code>分成<code>inputs</code>和<code>outputs</code>，其中前者为<code>data</code>的前两列，而后者为<code>data</code>的最后一列。对于<code>inputs</code>中缺少的数值，我们用同一列的均值替换“NaN”项。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inputs, outputs = data.iloc[:, <span class=\"number\">0</span>:<span class=\"number\">2</span>], data.iloc[:, <span class=\"number\">2</span>]</span><br><span class=\"line\">inputs = inputs.fillna(inputs.mean())</span><br><span class=\"line\"><span class=\"built_in\">print</span>(inputs)</span><br></pre></td></tr></table></figure>\n\n<p><strong>对于<code>inputs</code>中的类别值或离散值，我们将“NaN”视为一个类别。</strong>由于“巷子”（“Alley”）列只接受两种类型的类别值“Pave”和“NaN”，<code>pandas</code>可以自动将此列转换为两列“Alley_Pave”和“Alley_nan”。巷子类型为“Pave”的行会将“Alley_Pave”的值设置为1，“Alley_nan”的值设置为0。缺少巷子类型的行会将“Alley_Pave”和“Alley_nan”分别设置为0和1。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inputs = pd.get_dummies(inputs, dummy_na=<span class=\"literal\">True</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(inputs)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"转换为张量格式\"><a href=\"#转换为张量格式\" class=\"headerlink\" title=\"转换为张量格式\"></a>转换为张量格式</h2><p><strong>现在<code>inputs</code>和<code>outputs</code>中的所有条目都是数值类型，它们可以转换为张量格式。</strong>当数据采用张量格式后，可以通过在 :numref:<code>sec_ndarray</code>中引入的那些张量函数来进一步操作。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"></span><br><span class=\"line\">X, y = torch.tensor(inputs.values), torch.tensor(outputs.values)</span><br><span class=\"line\">X, y</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"cover":"/img/cover.jpg","excerpt":"","more":"<p>为了能用深度学习来解决现实世界的问题，我们经常从预处理原始数据开始，而不是从那些准备好的张量格式数据开始。在Python中常用的数据分析工具中，通常使用<code>pandas</code>软件包。</p>\n<h2 id=\"读取数据集\"><a href=\"#读取数据集\" class=\"headerlink\" title=\"读取数据集\"></a>读取数据集</h2><p>举一个例子，我们首先<strong>创建一个人工数据集，并存储在csv（逗号分隔值）文件</strong><code>data/house_tiny.csv</code>中。以其他格式存储的数据也可以通过类似的方式进行处理。下面的<code>mkdir_if_not_exist</code>函数可确保目录<code>data</code>存在。</p>\n<p>下面我们将数据集按行写入CSV文件中。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"></span><br><span class=\"line\">os.makedirs(os.path.join(<span class=\"string\">&#x27;.&#x27;</span>, <span class=\"string\">&#x27;data&#x27;</span>), exist_ok=<span class=\"literal\">True</span>)</span><br><span class=\"line\">data_file = os.path.join(<span class=\"string\">&#x27;.&#x27;</span>, <span class=\"string\">&#x27;data&#x27;</span>, <span class=\"string\">&#x27;house_tiny.csv&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(data_file, <span class=\"string\">&#x27;w&#x27;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">    f.write(<span class=\"string\">&#x27;NumRooms,Alley,Price\\n&#x27;</span>)  <span class=\"comment\"># 列名</span></span><br><span class=\"line\">    f.write(<span class=\"string\">&#x27;NA,Pave,127500\\n&#x27;</span>)  <span class=\"comment\"># 每行表示一个数据样本</span></span><br><span class=\"line\">    f.write(<span class=\"string\">&#x27;2,NA,106000\\n&#x27;</span>)</span><br><span class=\"line\">    f.write(<span class=\"string\">&#x27;4,NA,178100\\n&#x27;</span>)</span><br><span class=\"line\">    f.write(<span class=\"string\">&#x27;NA,NA,140000\\n&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>要<strong>从创建的CSV文件中加载原始数据集</strong>，我们导入<code>pandas</code>包并调用<code>read_csv</code>函数。该数据集有四行三列。其中每行描述了房间数量（“NumRooms”）、巷子类型（“Alley”）和房屋价格（“Price”）。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 如果没有安装pandas，只需取消对以下行的注释：</span></span><br><span class=\"line\"><span class=\"comment\"># !pip install pandas</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"></span><br><span class=\"line\">data = pd.read_csv(data_file)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(data)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"处理缺失值\"><a href=\"#处理缺失值\" class=\"headerlink\" title=\"处理缺失值\"></a>处理缺失值</h2><p>注意，“NaN”项代表缺失值。<strong>为了处理缺失的数据，典型的方法包括<em>插值</em>和<em>删除</em>，</strong>其中插值用替代值代替缺失值。而删除则忽略缺失值。在<strong>这里，我们将考虑插值</strong>。</p>\n<p>通过位置索引<code>iloc</code>，我们将<code>data</code>分成<code>inputs</code>和<code>outputs</code>，其中前者为<code>data</code>的前两列，而后者为<code>data</code>的最后一列。对于<code>inputs</code>中缺少的数值，我们用同一列的均值替换“NaN”项。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inputs, outputs = data.iloc[:, <span class=\"number\">0</span>:<span class=\"number\">2</span>], data.iloc[:, <span class=\"number\">2</span>]</span><br><span class=\"line\">inputs = inputs.fillna(inputs.mean())</span><br><span class=\"line\"><span class=\"built_in\">print</span>(inputs)</span><br></pre></td></tr></table></figure>\n\n<p><strong>对于<code>inputs</code>中的类别值或离散值，我们将“NaN”视为一个类别。</strong>由于“巷子”（“Alley”）列只接受两种类型的类别值“Pave”和“NaN”，<code>pandas</code>可以自动将此列转换为两列“Alley_Pave”和“Alley_nan”。巷子类型为“Pave”的行会将“Alley_Pave”的值设置为1，“Alley_nan”的值设置为0。缺少巷子类型的行会将“Alley_Pave”和“Alley_nan”分别设置为0和1。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inputs = pd.get_dummies(inputs, dummy_na=<span class=\"literal\">True</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(inputs)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"转换为张量格式\"><a href=\"#转换为张量格式\" class=\"headerlink\" title=\"转换为张量格式\"></a>转换为张量格式</h2><p><strong>现在<code>inputs</code>和<code>outputs</code>中的所有条目都是数值类型，它们可以转换为张量格式。</strong>当数据采用张量格式后，可以通过在 :numref:<code>sec_ndarray</code>中引入的那些张量函数来进一步操作。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"></span><br><span class=\"line\">X, y = torch.tensor(inputs.values), torch.tensor(outputs.values)</span><br><span class=\"line\">X, y</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Pytorch学习回顾--线性回归","date":"2022-12-29T10:49:20.000Z","_content":"\n## 生成数据集\n\n我们可以调用框架中现有的API来读取数据。我们将`features`和`labels`作为API的参数传递，并在实例化数据迭代器对象时指定`batch_size`。此外，布尔值`is_train`表示是否希望数据迭代器对象在每个迭代周期内打乱数据。\n\n```python\ndef load_array(data_arrays, batch_size, is_train=True): \n    \"\"\"构造一个PyTorch数据迭代器。\"\"\"\n    dataset = data.TensorDataset(*data_arrays)\n    return data.DataLoader(dataset, batch_size, shuffle=is_train)\n```\n\n\n```python\nbatch_size = 10\ndata_iter = load_array((features, labels), batch_size)\n```\n\n使用`data_iter`的方式与我们在3.2节中使用`data_iter`函数的方式相同。为了验证是否正常工作，让我们读取并打印第一个小批量样本。\n与3.2节不同，这里我们使用`iter`构造Python迭代器，并使用`next`从迭代器中获取第一项。\n\n\n```python\nnext(iter(data_iter))\n```\n\n## 定义模型\n\n当我们在3.2节中实现线性回归时，我们明确定义了模型参数变量，并编写了计算的代码，这样通过基本的线性代数运算得到输出。但是，如果模型变得更加复杂，而且当你几乎每天都需要实现模型时，你会想简化这个过程。这种情况类似于从头开始编写自己的博客。做一两次是有益的、有启发性的，但如果每次你每需要一个博客就花一个月的时间重新发明轮子，那你将是一个糟糕的网页开发者。\n\n对于标准操作，我们可以使用框架的预定义好的层。这使我们只需关注使用哪些层来构造模型，而不必关注层的实现细节。我们首先定义一个模型变量`net`，它是一个`Sequential`类的实例。`Sequential`类为串联在一起的多个层定义了一个容器。当给定输入数据，`Sequential`实例将数据传入到第一层，然后将第一层的输出作为第二层的输入，依此类推。在下面的例子中，我们的模型只包含一个层，因此实际上不需要`Sequential`。但是由于以后几乎所有的模型都是多层的，在这里使用`Sequential`会让你熟悉标准的流水线。\n\n回顾3.1.2中的单层网络架构，这一单层被称为*全连接层*（fully-connected layer），因为它的每一个输入都通过矩阵-向量乘法连接到它的每个输出。\n\n在PyTorch中，全连接层在`Linear`类中定义。值得注意的是，我们将两个参数传递到`nn.Linear`中。第一个指定输入特征形状，即2，第二个指定输出特征形状，输出特征形状为单个标量，因此为1。\n\n```python\n# `nn` 是神经网络的缩写\nfrom torch import nn\n\nnet = nn.Sequential(nn.Linear(2, 1))\n```\n\n## (**初始化模型参数**)\n\n在使用`net`之前，我们需要初始化模型参数。如在线性回归模型中的权重和偏置。\n深度学习框架通常有预定义的方法来初始化参数。\n在这里，我们指定每个权重参数应该从均值为0、标准差为0.01的正态分布中随机采样，偏置参数将初始化为零。\n\n\n正如我们在构造`nn.Linear`时指定输入和输出尺寸一样。现在我们直接访问参数以设定初始值。我们通过`net[0]`选择网络中的第一个图层，然后使用`weight.data`和`bias.data`方法访问参数。然后使用替换方法`normal_`和`fill_`来重写参数值。\n\n```python\nnet[0].weight.data.normal_(0, 0.01)\nnet[0].bias.data.fill_(0)\n```\n\n\n## 定义损失函数\n\n\n计算均方误差使用的是`MSELoss`类。默认情况下，它返回所有样本损失的平均值。\n\n```python\nloss = nn.MSELoss()\n```\n\n## 定义优化算法\n\n\n小批量随机梯度下降算法是一种优化神经网络的标准工具，PyTorch在`optim`模块中实现了该算法的许多变种。当我们(**实例化`SGD`实例**)时，我们要指定优化的参数（可通过`net.parameters()`从我们的模型中获得）以及优化算法所需的超参数字典。小批量随机梯度下降只需要设置`lr`值，这里设置为0.03。\n\n```python\ntrainer = torch.optim.SGD(net.parameters(), lr=0.03)\n```\n\n## 训练\n\n通过深度学习框架的高级API来实现我们的模型只需要相对较少的代码。\n我们不必单独分配参数、不必定义我们的损失函数，也不必手动实现小批量随机梯度下降。\n\n我们将完整遍历一次数据集（`train_data`），不停地从中获取一个小批量的输入和相应的标签。对于每一个小批量，我们会进行以下步骤:\n\n* 通过调用`net(X)`生成预测并计算损失`l`（正向传播）。（计算损失）\n* 通过进行反向传播来计算梯度。（反向传播损失）\n* 通过调用优化器来更新模型参数。（优化更新参数）\n\n为了更好的衡量训练效果，我们计算每个迭代周期后的损失，并打印它来监控训练过程。\n\n\n```python\nnum_epochs = 3\nfor epoch in range(num_epochs):\n    for X, y in data_iter:\n        l = loss(net(X) ,y)\n        trainer.zero_grad()\n        l.backward()\n        trainer.step()\n    l = loss(net(features), labels)\n    print(f'epoch {epoch + 1}, loss {l:f}')\n```\n\n下面我们比较生成数据集的真实参数和通过有限数据训练获得的模型参数。\n要访问参数，我们首先从`net`访问所需的层，然后读取该层的权重和偏置。\n正如在从零开始实现中一样，我们估计得到的参数与生成数据的真实参数非常接近。\n\n```python\nw = net[0].weight.data\nprint('w的估计误差：', true_w - w.reshape(true_w.shape))\nb = net[0].bias.data\nprint('b的估计误差：', true_b - b)\n```\n","source":"_posts/02.md","raw":"---\ntitle: Pytorch学习回顾--线性回归\ntags: Pytorch\ndate: 2022/12/29 18:49:20\n---\n\n## 生成数据集\n\n我们可以调用框架中现有的API来读取数据。我们将`features`和`labels`作为API的参数传递，并在实例化数据迭代器对象时指定`batch_size`。此外，布尔值`is_train`表示是否希望数据迭代器对象在每个迭代周期内打乱数据。\n\n```python\ndef load_array(data_arrays, batch_size, is_train=True): \n    \"\"\"构造一个PyTorch数据迭代器。\"\"\"\n    dataset = data.TensorDataset(*data_arrays)\n    return data.DataLoader(dataset, batch_size, shuffle=is_train)\n```\n\n\n```python\nbatch_size = 10\ndata_iter = load_array((features, labels), batch_size)\n```\n\n使用`data_iter`的方式与我们在3.2节中使用`data_iter`函数的方式相同。为了验证是否正常工作，让我们读取并打印第一个小批量样本。\n与3.2节不同，这里我们使用`iter`构造Python迭代器，并使用`next`从迭代器中获取第一项。\n\n\n```python\nnext(iter(data_iter))\n```\n\n## 定义模型\n\n当我们在3.2节中实现线性回归时，我们明确定义了模型参数变量，并编写了计算的代码，这样通过基本的线性代数运算得到输出。但是，如果模型变得更加复杂，而且当你几乎每天都需要实现模型时，你会想简化这个过程。这种情况类似于从头开始编写自己的博客。做一两次是有益的、有启发性的，但如果每次你每需要一个博客就花一个月的时间重新发明轮子，那你将是一个糟糕的网页开发者。\n\n对于标准操作，我们可以使用框架的预定义好的层。这使我们只需关注使用哪些层来构造模型，而不必关注层的实现细节。我们首先定义一个模型变量`net`，它是一个`Sequential`类的实例。`Sequential`类为串联在一起的多个层定义了一个容器。当给定输入数据，`Sequential`实例将数据传入到第一层，然后将第一层的输出作为第二层的输入，依此类推。在下面的例子中，我们的模型只包含一个层，因此实际上不需要`Sequential`。但是由于以后几乎所有的模型都是多层的，在这里使用`Sequential`会让你熟悉标准的流水线。\n\n回顾3.1.2中的单层网络架构，这一单层被称为*全连接层*（fully-connected layer），因为它的每一个输入都通过矩阵-向量乘法连接到它的每个输出。\n\n在PyTorch中，全连接层在`Linear`类中定义。值得注意的是，我们将两个参数传递到`nn.Linear`中。第一个指定输入特征形状，即2，第二个指定输出特征形状，输出特征形状为单个标量，因此为1。\n\n```python\n# `nn` 是神经网络的缩写\nfrom torch import nn\n\nnet = nn.Sequential(nn.Linear(2, 1))\n```\n\n## (**初始化模型参数**)\n\n在使用`net`之前，我们需要初始化模型参数。如在线性回归模型中的权重和偏置。\n深度学习框架通常有预定义的方法来初始化参数。\n在这里，我们指定每个权重参数应该从均值为0、标准差为0.01的正态分布中随机采样，偏置参数将初始化为零。\n\n\n正如我们在构造`nn.Linear`时指定输入和输出尺寸一样。现在我们直接访问参数以设定初始值。我们通过`net[0]`选择网络中的第一个图层，然后使用`weight.data`和`bias.data`方法访问参数。然后使用替换方法`normal_`和`fill_`来重写参数值。\n\n```python\nnet[0].weight.data.normal_(0, 0.01)\nnet[0].bias.data.fill_(0)\n```\n\n\n## 定义损失函数\n\n\n计算均方误差使用的是`MSELoss`类。默认情况下，它返回所有样本损失的平均值。\n\n```python\nloss = nn.MSELoss()\n```\n\n## 定义优化算法\n\n\n小批量随机梯度下降算法是一种优化神经网络的标准工具，PyTorch在`optim`模块中实现了该算法的许多变种。当我们(**实例化`SGD`实例**)时，我们要指定优化的参数（可通过`net.parameters()`从我们的模型中获得）以及优化算法所需的超参数字典。小批量随机梯度下降只需要设置`lr`值，这里设置为0.03。\n\n```python\ntrainer = torch.optim.SGD(net.parameters(), lr=0.03)\n```\n\n## 训练\n\n通过深度学习框架的高级API来实现我们的模型只需要相对较少的代码。\n我们不必单独分配参数、不必定义我们的损失函数，也不必手动实现小批量随机梯度下降。\n\n我们将完整遍历一次数据集（`train_data`），不停地从中获取一个小批量的输入和相应的标签。对于每一个小批量，我们会进行以下步骤:\n\n* 通过调用`net(X)`生成预测并计算损失`l`（正向传播）。（计算损失）\n* 通过进行反向传播来计算梯度。（反向传播损失）\n* 通过调用优化器来更新模型参数。（优化更新参数）\n\n为了更好的衡量训练效果，我们计算每个迭代周期后的损失，并打印它来监控训练过程。\n\n\n```python\nnum_epochs = 3\nfor epoch in range(num_epochs):\n    for X, y in data_iter:\n        l = loss(net(X) ,y)\n        trainer.zero_grad()\n        l.backward()\n        trainer.step()\n    l = loss(net(features), labels)\n    print(f'epoch {epoch + 1}, loss {l:f}')\n```\n\n下面我们比较生成数据集的真实参数和通过有限数据训练获得的模型参数。\n要访问参数，我们首先从`net`访问所需的层，然后读取该层的权重和偏置。\n正如在从零开始实现中一样，我们估计得到的参数与生成数据的真实参数非常接近。\n\n```python\nw = net[0].weight.data\nprint('w的估计误差：', true_w - w.reshape(true_w.shape))\nb = net[0].bias.data\nprint('b的估计误差：', true_b - b)\n```\n","slug":"02","published":1,"updated":"2022-12-31T11:08:20.691Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clcbucv560000hquv8nz99iym","content":"<h2 id=\"生成数据集\"><a href=\"#生成数据集\" class=\"headerlink\" title=\"生成数据集\"></a>生成数据集</h2><p>我们可以调用框架中现有的API来读取数据。我们将<code>features</code>和<code>labels</code>作为API的参数传递，并在实例化数据迭代器对象时指定<code>batch_size</code>。此外，布尔值<code>is_train</code>表示是否希望数据迭代器对象在每个迭代周期内打乱数据。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">load_array</span>(<span class=\"params\">data_arrays, batch_size, is_train=<span class=\"literal\">True</span></span>): </span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;构造一个PyTorch数据迭代器。&quot;&quot;&quot;</span></span><br><span class=\"line\">    dataset = data.TensorDataset(*data_arrays)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data.DataLoader(dataset, batch_size, shuffle=is_train)</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">batch_size = <span class=\"number\">10</span></span><br><span class=\"line\">data_iter = load_array((features, labels), batch_size)</span><br></pre></td></tr></table></figure>\n\n<p>使用<code>data_iter</code>的方式与我们在3.2节中使用<code>data_iter</code>函数的方式相同。为了验证是否正常工作，让我们读取并打印第一个小批量样本。<br>与3.2节不同，这里我们使用<code>iter</code>构造Python迭代器，并使用<code>next</code>从迭代器中获取第一项。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">next</span>(<span class=\"built_in\">iter</span>(data_iter))</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"定义模型\"><a href=\"#定义模型\" class=\"headerlink\" title=\"定义模型\"></a>定义模型</h2><p>当我们在3.2节中实现线性回归时，我们明确定义了模型参数变量，并编写了计算的代码，这样通过基本的线性代数运算得到输出。但是，如果模型变得更加复杂，而且当你几乎每天都需要实现模型时，你会想简化这个过程。这种情况类似于从头开始编写自己的博客。做一两次是有益的、有启发性的，但如果每次你每需要一个博客就花一个月的时间重新发明轮子，那你将是一个糟糕的网页开发者。</p>\n<p>对于标准操作，我们可以使用框架的预定义好的层。这使我们只需关注使用哪些层来构造模型，而不必关注层的实现细节。我们首先定义一个模型变量<code>net</code>，它是一个<code>Sequential</code>类的实例。<code>Sequential</code>类为串联在一起的多个层定义了一个容器。当给定输入数据，<code>Sequential</code>实例将数据传入到第一层，然后将第一层的输出作为第二层的输入，依此类推。在下面的例子中，我们的模型只包含一个层，因此实际上不需要<code>Sequential</code>。但是由于以后几乎所有的模型都是多层的，在这里使用<code>Sequential</code>会让你熟悉标准的流水线。</p>\n<p>回顾3.1.2中的单层网络架构，这一单层被称为<em>全连接层</em>（fully-connected layer），因为它的每一个输入都通过矩阵-向量乘法连接到它的每个输出。</p>\n<p>在PyTorch中，全连接层在<code>Linear</code>类中定义。值得注意的是，我们将两个参数传递到<code>nn.Linear</code>中。第一个指定输入特征形状，即2，第二个指定输出特征形状，输出特征形状为单个标量，因此为1。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># `nn` 是神经网络的缩写</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> torch <span class=\"keyword\">import</span> nn</span><br><span class=\"line\"></span><br><span class=\"line\">net = nn.Sequential(nn.Linear(<span class=\"number\">2</span>, <span class=\"number\">1</span>))</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"初始化模型参数\"><a href=\"#初始化模型参数\" class=\"headerlink\" title=\"(初始化模型参数)\"></a>(<strong>初始化模型参数</strong>)</h2><p>在使用<code>net</code>之前，我们需要初始化模型参数。如在线性回归模型中的权重和偏置。<br>深度学习框架通常有预定义的方法来初始化参数。<br>在这里，我们指定每个权重参数应该从均值为0、标准差为0.01的正态分布中随机采样，偏置参数将初始化为零。</p>\n<p>正如我们在构造<code>nn.Linear</code>时指定输入和输出尺寸一样。现在我们直接访问参数以设定初始值。我们通过<code>net[0]</code>选择网络中的第一个图层，然后使用<code>weight.data</code>和<code>bias.data</code>方法访问参数。然后使用替换方法<code>normal_</code>和<code>fill_</code>来重写参数值。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">net[<span class=\"number\">0</span>].weight.data.normal_(<span class=\"number\">0</span>, <span class=\"number\">0.01</span>)</span><br><span class=\"line\">net[<span class=\"number\">0</span>].bias.data.fill_(<span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"定义损失函数\"><a href=\"#定义损失函数\" class=\"headerlink\" title=\"定义损失函数\"></a>定义损失函数</h2><p>计算均方误差使用的是<code>MSELoss</code>类。默认情况下，它返回所有样本损失的平均值。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">loss = nn.MSELoss()</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"定义优化算法\"><a href=\"#定义优化算法\" class=\"headerlink\" title=\"定义优化算法\"></a>定义优化算法</h2><p>小批量随机梯度下降算法是一种优化神经网络的标准工具，PyTorch在<code>optim</code>模块中实现了该算法的许多变种。当我们(<strong>实例化<code>SGD</code>实例</strong>)时，我们要指定优化的参数（可通过<code>net.parameters()</code>从我们的模型中获得）以及优化算法所需的超参数字典。小批量随机梯度下降只需要设置<code>lr</code>值，这里设置为0.03。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">trainer = torch.optim.SGD(net.parameters(), lr=<span class=\"number\">0.03</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"训练\"><a href=\"#训练\" class=\"headerlink\" title=\"训练\"></a>训练</h2><p>通过深度学习框架的高级API来实现我们的模型只需要相对较少的代码。<br>我们不必单独分配参数、不必定义我们的损失函数，也不必手动实现小批量随机梯度下降。</p>\n<p>我们将完整遍历一次数据集（<code>train_data</code>），不停地从中获取一个小批量的输入和相应的标签。对于每一个小批量，我们会进行以下步骤:</p>\n<ul>\n<li>通过调用<code>net(X)</code>生成预测并计算损失<code>l</code>（正向传播）。（计算损失）</li>\n<li>通过进行反向传播来计算梯度。（反向传播损失）</li>\n<li>通过调用优化器来更新模型参数。（优化更新参数）</li>\n</ul>\n<p>为了更好的衡量训练效果，我们计算每个迭代周期后的损失，并打印它来监控训练过程。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">num_epochs = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> epoch <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(num_epochs):</span><br><span class=\"line\">    <span class=\"keyword\">for</span> X, y <span class=\"keyword\">in</span> data_iter:</span><br><span class=\"line\">        l = loss(net(X) ,y)</span><br><span class=\"line\">        trainer.zero_grad()</span><br><span class=\"line\">        l.backward()</span><br><span class=\"line\">        trainer.step()</span><br><span class=\"line\">    l = loss(net(features), labels)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">f&#x27;epoch <span class=\"subst\">&#123;epoch + <span class=\"number\">1</span>&#125;</span>, loss <span class=\"subst\">&#123;l:f&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>下面我们比较生成数据集的真实参数和通过有限数据训练获得的模型参数。<br>要访问参数，我们首先从<code>net</code>访问所需的层，然后读取该层的权重和偏置。<br>正如在从零开始实现中一样，我们估计得到的参数与生成数据的真实参数非常接近。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">w = net[<span class=\"number\">0</span>].weight.data</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#x27;w的估计误差：&#x27;</span>, true_w - w.reshape(true_w.shape))</span><br><span class=\"line\">b = net[<span class=\"number\">0</span>].bias.data</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#x27;b的估计误差：&#x27;</span>, true_b - b)</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"cover":"/img/cover.jpg","excerpt":"","more":"<h2 id=\"生成数据集\"><a href=\"#生成数据集\" class=\"headerlink\" title=\"生成数据集\"></a>生成数据集</h2><p>我们可以调用框架中现有的API来读取数据。我们将<code>features</code>和<code>labels</code>作为API的参数传递，并在实例化数据迭代器对象时指定<code>batch_size</code>。此外，布尔值<code>is_train</code>表示是否希望数据迭代器对象在每个迭代周期内打乱数据。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">load_array</span>(<span class=\"params\">data_arrays, batch_size, is_train=<span class=\"literal\">True</span></span>): </span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;构造一个PyTorch数据迭代器。&quot;&quot;&quot;</span></span><br><span class=\"line\">    dataset = data.TensorDataset(*data_arrays)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data.DataLoader(dataset, batch_size, shuffle=is_train)</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">batch_size = <span class=\"number\">10</span></span><br><span class=\"line\">data_iter = load_array((features, labels), batch_size)</span><br></pre></td></tr></table></figure>\n\n<p>使用<code>data_iter</code>的方式与我们在3.2节中使用<code>data_iter</code>函数的方式相同。为了验证是否正常工作，让我们读取并打印第一个小批量样本。<br>与3.2节不同，这里我们使用<code>iter</code>构造Python迭代器，并使用<code>next</code>从迭代器中获取第一项。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">next</span>(<span class=\"built_in\">iter</span>(data_iter))</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"定义模型\"><a href=\"#定义模型\" class=\"headerlink\" title=\"定义模型\"></a>定义模型</h2><p>当我们在3.2节中实现线性回归时，我们明确定义了模型参数变量，并编写了计算的代码，这样通过基本的线性代数运算得到输出。但是，如果模型变得更加复杂，而且当你几乎每天都需要实现模型时，你会想简化这个过程。这种情况类似于从头开始编写自己的博客。做一两次是有益的、有启发性的，但如果每次你每需要一个博客就花一个月的时间重新发明轮子，那你将是一个糟糕的网页开发者。</p>\n<p>对于标准操作，我们可以使用框架的预定义好的层。这使我们只需关注使用哪些层来构造模型，而不必关注层的实现细节。我们首先定义一个模型变量<code>net</code>，它是一个<code>Sequential</code>类的实例。<code>Sequential</code>类为串联在一起的多个层定义了一个容器。当给定输入数据，<code>Sequential</code>实例将数据传入到第一层，然后将第一层的输出作为第二层的输入，依此类推。在下面的例子中，我们的模型只包含一个层，因此实际上不需要<code>Sequential</code>。但是由于以后几乎所有的模型都是多层的，在这里使用<code>Sequential</code>会让你熟悉标准的流水线。</p>\n<p>回顾3.1.2中的单层网络架构，这一单层被称为<em>全连接层</em>（fully-connected layer），因为它的每一个输入都通过矩阵-向量乘法连接到它的每个输出。</p>\n<p>在PyTorch中，全连接层在<code>Linear</code>类中定义。值得注意的是，我们将两个参数传递到<code>nn.Linear</code>中。第一个指定输入特征形状，即2，第二个指定输出特征形状，输出特征形状为单个标量，因此为1。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># `nn` 是神经网络的缩写</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> torch <span class=\"keyword\">import</span> nn</span><br><span class=\"line\"></span><br><span class=\"line\">net = nn.Sequential(nn.Linear(<span class=\"number\">2</span>, <span class=\"number\">1</span>))</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"初始化模型参数\"><a href=\"#初始化模型参数\" class=\"headerlink\" title=\"(初始化模型参数)\"></a>(<strong>初始化模型参数</strong>)</h2><p>在使用<code>net</code>之前，我们需要初始化模型参数。如在线性回归模型中的权重和偏置。<br>深度学习框架通常有预定义的方法来初始化参数。<br>在这里，我们指定每个权重参数应该从均值为0、标准差为0.01的正态分布中随机采样，偏置参数将初始化为零。</p>\n<p>正如我们在构造<code>nn.Linear</code>时指定输入和输出尺寸一样。现在我们直接访问参数以设定初始值。我们通过<code>net[0]</code>选择网络中的第一个图层，然后使用<code>weight.data</code>和<code>bias.data</code>方法访问参数。然后使用替换方法<code>normal_</code>和<code>fill_</code>来重写参数值。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">net[<span class=\"number\">0</span>].weight.data.normal_(<span class=\"number\">0</span>, <span class=\"number\">0.01</span>)</span><br><span class=\"line\">net[<span class=\"number\">0</span>].bias.data.fill_(<span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"定义损失函数\"><a href=\"#定义损失函数\" class=\"headerlink\" title=\"定义损失函数\"></a>定义损失函数</h2><p>计算均方误差使用的是<code>MSELoss</code>类。默认情况下，它返回所有样本损失的平均值。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">loss = nn.MSELoss()</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"定义优化算法\"><a href=\"#定义优化算法\" class=\"headerlink\" title=\"定义优化算法\"></a>定义优化算法</h2><p>小批量随机梯度下降算法是一种优化神经网络的标准工具，PyTorch在<code>optim</code>模块中实现了该算法的许多变种。当我们(<strong>实例化<code>SGD</code>实例</strong>)时，我们要指定优化的参数（可通过<code>net.parameters()</code>从我们的模型中获得）以及优化算法所需的超参数字典。小批量随机梯度下降只需要设置<code>lr</code>值，这里设置为0.03。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">trainer = torch.optim.SGD(net.parameters(), lr=<span class=\"number\">0.03</span>)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"训练\"><a href=\"#训练\" class=\"headerlink\" title=\"训练\"></a>训练</h2><p>通过深度学习框架的高级API来实现我们的模型只需要相对较少的代码。<br>我们不必单独分配参数、不必定义我们的损失函数，也不必手动实现小批量随机梯度下降。</p>\n<p>我们将完整遍历一次数据集（<code>train_data</code>），不停地从中获取一个小批量的输入和相应的标签。对于每一个小批量，我们会进行以下步骤:</p>\n<ul>\n<li>通过调用<code>net(X)</code>生成预测并计算损失<code>l</code>（正向传播）。（计算损失）</li>\n<li>通过进行反向传播来计算梯度。（反向传播损失）</li>\n<li>通过调用优化器来更新模型参数。（优化更新参数）</li>\n</ul>\n<p>为了更好的衡量训练效果，我们计算每个迭代周期后的损失，并打印它来监控训练过程。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">num_epochs = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> epoch <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(num_epochs):</span><br><span class=\"line\">    <span class=\"keyword\">for</span> X, y <span class=\"keyword\">in</span> data_iter:</span><br><span class=\"line\">        l = loss(net(X) ,y)</span><br><span class=\"line\">        trainer.zero_grad()</span><br><span class=\"line\">        l.backward()</span><br><span class=\"line\">        trainer.step()</span><br><span class=\"line\">    l = loss(net(features), labels)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">f&#x27;epoch <span class=\"subst\">&#123;epoch + <span class=\"number\">1</span>&#125;</span>, loss <span class=\"subst\">&#123;l:f&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>下面我们比较生成数据集的真实参数和通过有限数据训练获得的模型参数。<br>要访问参数，我们首先从<code>net</code>访问所需的层，然后读取该层的权重和偏置。<br>正如在从零开始实现中一样，我们估计得到的参数与生成数据的真实参数非常接近。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">w = net[<span class=\"number\">0</span>].weight.data</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#x27;w的估计误差：&#x27;</span>, true_w - w.reshape(true_w.shape))</span><br><span class=\"line\">b = net[<span class=\"number\">0</span>].bias.data</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#x27;b的估计误差：&#x27;</span>, true_b - b)</span><br></pre></td></tr></table></figure>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"clblitu7p0000hwg7asxs7inf","tag_id":"clblj6mcs0001q4g7b6cl6r0v","_id":"clblj6mct0002q4g735jo5oxs"},{"post_id":"clc1r3i820000u4g7bm633qim","tag_id":"clc1r3i880001u4g741pscag8","_id":"clc1r3i8a0002u4g7dfn52wqa"},{"post_id":"clc1w4qdq0000y8g77ft106wy","tag_id":"clc1w4qdw0001y8g72oq775go","_id":"clc1w4qdy0002y8g76rn349bs"},{"post_id":"clc23xw6l0000a4g7bvqr1fwh","tag_id":"clc23xw6o0001a4g7bos1330i","_id":"clc23xw6p0002a4g772om419p"},{"post_id":"clc23xw6v0003a4g748tk1eq8","tag_id":"clc1w4qdw0001y8g72oq775go","_id":"clc23xw710004a4g7apb5dlyw"},{"post_id":"clc48t54x0000tcg72gso30uk","tag_id":"clc23xw6o0001a4g7bos1330i","_id":"clc48t54y0002tcg7bdsc6nhb"},{"post_id":"clc48t54y0001tcg7g6qy4mm0","tag_id":"clc1w4qdw0001y8g72oq775go","_id":"clc48t5500004tcg74wsu3eos"},{"post_id":"clc48t54y0003tcg73pd226hn","tag_id":"clc23xw6o0001a4g7bos1330i","_id":"clc48t5500005tcg7gxki67g3"},{"post_id":"clcbtyjkh0000v1uv0rnyf8pt","tag_id":"clcbtyjkl0001v1uvbvj191t5","_id":"clcbtyjkn0002v1uvhk0ohtpn"},{"post_id":"clcbucv560000hquv8nz99iym","tag_id":"clcbtyjkl0001v1uvbvj191t5","_id":"clcbucv580001hquv6dwkfjil"}],"Tag":[{"name":"High Performance Computing","_id":"clblj6mcs0001q4g7b6cl6r0v"},{"name":"Cyberspace Security","_id":"clc1r3i880001u4g741pscag8"},{"name":"Computer Network","_id":"clc1w4qdw0001y8g72oq775go"},{"name":"Devops","_id":"clc23xw6o0001a4g7bos1330i"},{"name":"Pytorch","_id":"clcbtyjkl0001v1uvbvj191t5"}]}}